<?xml version="1.0" encoding="utf-8"?>
<search> 
  
  
    
    <entry>
      <title>WALLE</title>
      <link href="2021/02/walle/"/>
      <url>2021/02/walle/</url>
      
        <content type="html"><![CDATA[<h2 id="瓦力机器人全栈计划执行中…"><a href="#瓦力机器人全栈计划执行中…" class="headerlink" title="瓦力机器人全栈计划执行中…"></a>瓦力机器人全栈计划执行中…</h2><h3 id="WALLE瓦力机器人演示"><a href="#WALLE瓦力机器人演示" class="headerlink" title="WALLE瓦力机器人演示"></a>WALLE瓦力机器人演示</h3><h3 id="WALLE瓦力机器人结构"><a href="#WALLE瓦力机器人结构" class="headerlink" title="WALLE瓦力机器人结构"></a>WALLE瓦力机器人结构</h3><h3 id="WALLE瓦力机器人硬件"><a href="#WALLE瓦力机器人硬件" class="headerlink" title="WALLE瓦力机器人硬件"></a>WALLE瓦力机器人硬件</h3><h3 id="WALLE瓦力机器人软件"><a href="#WALLE瓦力机器人软件" class="headerlink" title="WALLE瓦力机器人软件"></a>WALLE瓦力机器人软件</h3>]]></content>
      
      
      <categories>
          
          <category> MarsPlan </category>
          
      </categories>
      
      
        <tags>
            
            <tag> WALLE </tag>
            
            <tag> WALL-E </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>如何白嫖属于自己的免费网站</title>
      <link href="2021/02/ru-he-bai-piao-shu-yu-zi-ji-de-mian-fei-wang-zhan/"/>
      <url>2021/02/ru-he-bai-piao-shu-yu-zi-ji-de-mian-fei-wang-zhan/</url>
      
        <content type="html"><![CDATA[<h2 id="入门"><a href="#入门" class="headerlink" title="入门"></a>入门</h2><p><strong>如何做到白嫖免费搭建呢？</strong>服务器使用别人的就可以啦，比如<a href="https://pages.github.com/" rel="external nofollow noreferrer"><strong>GitHub Pages</strong></a>~</p><p><strong>网站增加文章的话还得懂网页开发？</strong>当然不需要啦，使用<a href="https://hexo.io/" rel="external nofollow noreferrer"><strong>Hexo</strong></a>帮你搭建一套个人网站就可以啦~</p><p><strong>增加网站内容会不会比较麻烦？</strong>这都啥时代啦，使用Markdown工具<a href="https://typora.io/" rel="external nofollow noreferrer"><strong>Typora</strong></a>发布内容非常方便哦~</p><p>刚才提到了三个关键词，解释如下：</p><table><thead><tr><th>名词</th><th align="left">解释</th></tr></thead><tbody><tr><td>GitHub Pages</td><td align="left">我们访问的任意网站都是放在服务器上的，通过域名或者说网址为我们提供服务，GitHub Pages就是为我们提供域名和服务器的，域名为GitHub.io的子域名</td></tr><tr><td>Hexo</td><td align="left">有了服务器还需要有一套网页的模板，还需要开发网页？Hexo提供了丰富的网页模板和插件，帮助我们更好的个性化和维护自己的网站</td></tr><tr><td>Typora</td><td align="left">增加网页的特点离不开文章内容的编写，文字、图片、视频、音乐等等，一个高效的编写工具尤为重要，Typora是一个文档编辑软件，基于Markdown语法开发保证了编写的效率，另外支持实时渲染，所见即所得，从而脱颖而出，成为目前最亮眼的Markdown文档编辑工具</td></tr></tbody></table><p>使用GitHub+Hexo+Typora搭建的免费网站，演示如下：</p><p>==为了方便理解，这里以后会放一个演示视频，先放这里占个位置，后期补上来(●ˇ∀ˇ●)==</p><h2 id="基础"><a href="#基础" class="headerlink" title="基础"></a>基础</h2><p>GitHub提供了<strong>pages</strong>服务，即静态网页访问服务。因此咱们只需要按照GitHub的要求，创建一个GitHub pages仓库，就相当于拥有一个搭建网站的服务器啦。</p><p>而有了服务器咱们还需要些代码来完成网页的开发，小白表示太不友好了/(ㄒoㄒ)/~~。幸好有大神帮我们开发好了一套友好的框架叫<strong>Hexo</strong>，咱们主要学会安装部署，再学会Markdown文章高效编写就可以啦。</p><p>当然使用Gitee或者Coding也支持pages服务，如果觉得GitHub慢的小伙伴也可以用这两个哦，只是个人习惯了GitHub，也是全世界代码分享的平台（男性交友平台），不想放弃啊🤭。</p><p>另外Hexo也有替代产品，如果不喜欢折腾，想快速搭建的也可以使用<a href="https://gridea.dev/" rel="external nofollow noreferrer">gridea</a>来快速搭建博客，适合非开发人员或爱好者，使用gridea可以参考<a href="https://yharea.com/433/" rel="external nofollow noreferrer">这篇文章</a>。</p><p>下面咱们回归正题，使用GitHub Pages+Hexo开始搭建（折腾）吧，说不定等gridea各方面都完备了，就转过去了🤭。</p><h3 id="免费的服务器-GitHub"><a href="#免费的服务器-GitHub" class="headerlink" title="免费的服务器-GitHub"></a>免费的服务器-GitHub</h3><ol><li><p>创建GitHub账号，<a href="https://github.com/" rel="external nofollow noreferrer">注册地址</a></p><p> <img src="https://cdn.jsdelivr.net/gh/aibittek/ImageHost/img/image-20210223145014702.png" alt="注册页面"></p><p> 填好自己得个人信息，注意Username使用英文；</p><p> <img src="https://cdn.jsdelivr.net/gh/aibittek/ImageHost/img/v2-7872012db459db8c8bab2793f7f79101_1440w.jpg" alt="信息填写"></p><p> 选择免费的版本，并且点击继续，填写个人的一些信息后，点击Submit完成注册。</p><p> <img src="https://cdn.jsdelivr.net/gh/aibittek/ImageHost/img/image-20210223144550429.png" alt="注册成功后的界面"></p><p> 注册成功后，看到以上的界面信息就表示注册成功了。</p></li><li><p>创建GitHub Page仓库</p><p> 点击右上角的加号选择New repository来创建一个GitHub Pages</p><p> <img src="https://cdn.jsdelivr.net/gh/aibittek/ImageHost/img/image-20210223144754011.png" alt="创建仓库"></p><p> 创建仓库的名称（也作为将来的域名），注意图中的要求，仓库名称必须是<strong>用户名.github.io</strong>，其中用户名是注册时填写的Username字段。</p><p> <img src="https://cdn.jsdelivr.net/gh/aibittek/ImageHost/img/image-20210223150133862.png" alt="填写仓库名称"></p><p> 然后点击最下面的Create repository创建仓库就可以了。</p></li><li><p>安装Git工具</p><p> Git是一个版本管理工具，可以方便的使用Git命令管理你的仓库。</p><p> <a href="https://git-scm.com/download/win" rel="external nofollow noreferrer">下载Git命令</a></p><p> 如果是64位的windows可以选择图中相关的安装文件，下载后安装即可</p><p> <img src="https://cdn.jsdelivr.net/gh/aibittek/ImageHost/img/image-20210223151401927.png" alt="Git工具下载"></p></li></ol><p>下载并安装完成后，打开Git Bash应用</p><p><img src="https://cdn.jsdelivr.net/gh/aibittek/ImageHost/img/image-20210223151528087.png" alt="Git Bash应用"></p><p>打开后，如图所示</p><p><img src="https://cdn.jsdelivr.net/gh/aibittek/ImageHost/img/image-20210223151623811.png" alt="Git Bash命令行"></p><p>在命令行中输入全局配置，user.name和user.email配置信息</p><pre class="line-numbers language-bash" data-language="bash"><code class="language-bash"><span class="token function">git</span> config --global user.name <span class="token string">"你的GitHub用户名"</span><span class="token function">git</span> config --global user.email <span class="token string">"你的GitHub注册邮箱"</span><span aria-hidden="true" class="line-numbers-rows"><span></span><span></span></span></code></pre><p>生成ssh密钥文件，提示内容时直接回车即可：</p><pre class="line-numbers language-shell" data-language="shell"><code class="language-shell">ssh-keygen -t rsa -C <span class="token string">"你的GitHub注册邮箱"</span><span aria-hidden="true" class="line-numbers-rows"><span></span></span></code></pre><p>创建成功后，大概是这个样子，注意红色框框的文件，需要打开，把内容拷贝到GitHub上去。</p><p><img src="https://cdn.jsdelivr.net/gh/aibittek/ImageHost/img/image-20210223152128655.png" alt="image-20210223152128655"></p><p>打开<a href="https://link.zhihu.com/?target=https://github.com/settings/keys" rel="external nofollow noreferrer">GitHub_Settings_keys</a> 页面，新建new SSH Key</p><p><img src="https://cdn.jsdelivr.net/gh/aibittek/ImageHost/img/image-20210223152525778.png" alt="新增SSH Key"></p><p>标题Title可以随便写，增加成功后在Git Bash命令行中，输入</p><pre class="line-numbers language-shell" data-language="shell"><code class="language-shell"><span class="token function">ssh</span> git@github.com<span aria-hidden="true" class="line-numbers-rows"><span></span></span></code></pre><p>输入后，得到红框中的内容说明SSH Key设置成功</p><p><img src="https://cdn.jsdelivr.net/gh/aibittek/ImageHost/img/image-20210223152757219.png" alt="SSH Key设置成功信息"></p><p>设置SSH Key的原因是，当我们编写好文章后，需要通过Git命令把内容推送给GitHub服务器上，这就需要账号密码验证，我们刚上传了id_rsa.pub的内容是公钥，私钥在咱们电脑上，这样在提交时就可以通过非对称加密的公钥与私钥来完成账号的验证了，就能检测提交代码者的身份是合法的了。</p><h3 id="搭建Hexo静态网站"><a href="#搭建Hexo静态网站" class="headerlink" title="搭建Hexo静态网站"></a>搭建Hexo静态网站</h3><ol><li><p>nodejs安装</p><p> Hexo基于nodejs的，下载nodejs：<a href="https://nodejs.org/en/download/%EF%BC%8C%E5%AE%89%E8%A3%85%E6%88%90%E5%8A%9F%E8%BE%93%E5%85%A5%E5%91%BD%E4%BB%A4%E6%9F%A5%E7%9C%8B%E6%98%AF%E5%90%A6%E5%AE%89%E8%A3%85%E6%88%90%E5%8A%9F" rel="external nofollow noreferrer">https://nodejs.org/en/download/，安装成功输入命令查看是否安装成功</a></p><p> <img src="https://cdn.jsdelivr.net/gh/aibittek/ImageHost/img/image-20210223153525207.png" alt="查看node安装是否成功"></p></li><li><p>Hexo安装</p><p> hexo-cli安装</p> <pre class="line-numbers language-shell" data-language="shell"><code class="language-shell"><span class="token function">npm</span> <span class="token function">install</span> -g hexo-cli<span aria-hidden="true" class="line-numbers-rows"><span></span></span></code></pre><p> 创建blog</p> <pre class="line-numbers language-shell" data-language="shell"><code class="language-shell">hexo init blog<span aria-hidden="true" class="line-numbers-rows"><span></span></span></code></pre><p> 以上的命令在当前目录下创建了一个blog目录，其中包含了Hexo的相关信息</p></li><li><p>hexo测试</p><p> hexo的基本命令如下：</p><p> 通过hexo new “test”来创建一篇新的名字叫test的文章</p><p> 通过hexo g命令generate进行构建，生成静态网页</p><p> 通过hexo s命令在本地创建一个server服务，默认是localhost:4000</p><p> 通过hexo d命令deploy部署静态网页到GitHub或其他你想发布的地方</p><p> 可以通过hexo g和hexo s，然后在浏览器中输入local host:4000检查是否已经可以看到你的网页了</p> <pre class="line-numbers language-none"><code class="language-none">hexo ghexo s<span aria-hidden="true" class="line-numbers-rows"><span></span><span></span></span></code></pre><p> 构建时候，如果出现LF will be replaced的警告，可以通过以下的命令解决：</p> <pre class="line-numbers language-shell" data-language="shell"><code class="language-shell"><span class="token function">git</span> config --global core.autocrlf <span class="token boolean">false</span><span aria-hidden="true" class="line-numbers-rows"><span></span></span></code></pre><p> 这条命令是禁用自动转换，这个不设置后面上传时会出现警告</p></li><li><p>测试发布</p><p> 打开创建blog根目录下的_config.yml配置文件，修改deploy字段</p> <pre class="line-numbers language-yaml" data-language="yaml"><code class="language-yaml"><span class="token key atrule">deploy</span><span class="token punctuation">:</span>  <span class="token key atrule">type</span><span class="token punctuation">:</span> git  <span class="token key atrule">repo</span><span class="token punctuation">:</span> https<span class="token punctuation">:</span>//github.com/aibittek/aibittek.github.io.git  <span class="token key atrule">branch</span><span class="token punctuation">:</span> master<span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span></span></code></pre><p> 注意repo填写的是仓库地址，可以进入仓库进行复制粘贴过来，防止写错了部署不成功，branch是版本分支的意思，按照下图中左侧可以查看分支名称，有可能新版本分支是main哦，小心一点</p><p> <img src="https://cdn.jsdelivr.net/gh/aibittek/ImageHost/img/image-20210223154908917.png" alt="复制仓库地址"></p></li></ol><p>安装提交git部署的插件</p><pre class="line-numbers language-shell" data-language="shell"><code class="language-shell"><span class="token function">npm</span> <span class="token function">install</span> hexo-deployer-git --save<span aria-hidden="true" class="line-numbers-rows"><span></span></span></code></pre><p>输入命令进行部署</p><pre class="line-numbers language-shell" data-language="shell"><code class="language-shell">hexo cleanhexo ghexo d<span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span></span></code></pre><p>其中clean是清除之前构建的内容，也可以通过一条命令完成以上的步骤</p><pre class="line-numbers language-shell" data-language="shell"><code class="language-shell">hexo clean <span class="token operator">&amp;&amp;</span> hexo g -d<span aria-hidden="true" class="line-numbers-rows"><span></span></span></code></pre><p>部署成功后，会把hexo g构建的静态网页部署到_config.yml，deploy填写的repo仓库中，现在通过网页浏览你的网站吧，通过<strong>用户名.github.io</strong>来访问哦。</p><h2 id="进阶"><a href="#进阶" class="headerlink" title="进阶"></a>进阶</h2><h3 id="绑定个性域名"><a href="#绑定个性域名" class="headerlink" title="绑定个性域名"></a>绑定个性域名</h3><p>你一定觉得使用github.io域名不够酷，想要一个自己的域名吧🤭</p><p>可以通过申请一个域名，把原本访问<strong>用户名.github.io</strong>改为访问你自己的域名即可，需要<strong>域名申请和域名绑定</strong>。</p><h4 id="域名申请"><a href="#域名申请" class="headerlink" title="域名申请"></a>域名申请</h4><p>可以到<a href="https://www.dnspod.cn/" rel="external nofollow noreferrer">DNSPod</a>申请一个喜欢的域名，或者任何其他你想要购买域名的地方。</p><p>选择DNSPod的原因是之前一直在用DNSPod的DDNS服务，花生咳这个服务用的我已经一口老血都咳出来了。DNSPod目前也是被腾讯收购了，当然阿里云之类的也可以，也是支持DDNS服务的，并提供API接口。点击上面的DNSPod链接，切换到域名一栏点击购买即可。</p><h4 id="域名绑定"><a href="#域名绑定" class="headerlink" title="域名绑定"></a>域名绑定</h4><p>有两处需要设置，假设上一节你已经选择好了域名，域名叫kui.ge，那么先到你的GitHub上，进入用户名.github.io这个仓库，点击右侧的settings</p><p><img src="https://cdn.jsdelivr.net/gh/aibittek/ImageHost/img/image-20210223160605182.png" alt="设置域名绑定"></p><p>然后往下拉，找到GitHub Pages设置一栏，按照如下的方式填写即可</p><p><img src="https://cdn.jsdelivr.net/gh/aibittek/ImageHost/img/image-20210223160749616.png" alt="个性化网页设置"></p><p>设置成功后，就使用你的新域名进行访问静态网页了。</p><p>但是如果我们直接在浏览器输入kui.ge的话，其实也是想访问<strong>你的用户名.github.io</strong>的，怎么办呢？在域名注册商处DNS解析的地方使用CNAME填写以下内容即可：</p><p><img src="https://cdn.jsdelivr.net/gh/aibittek/ImageHost/img/image-20210223161233437.png" alt="CNAME域名绑定"></p><p>CNAME后面填写的是你的GitHub的用户名.github.io.，注意后面还有个点，@记录后面填写的IP地址，这个地址可以通过<code>ping 你的用户名.github.io</code>来获得。</p><p>最后还要在你的博客目录下，增加一个CNAME文件，内容就写你的域名即可</p><p><img src="https://cdn.jsdelivr.net/gh/aibittek/ImageHost/img/image-20210223161658525.png" alt="CNAME域名文件"></p><p>完成以上的步骤后，在blog目录下，执行以下命令，对新修改的内容进行部署发布</p><pre class="line-numbers language-shell" data-language="shell"><code class="language-shell">hexo clean <span class="token operator">&amp;&amp;</span> hexo g -d<span aria-hidden="true" class="line-numbers-rows"><span></span></span></code></pre><p>发布成功后，使用你自己的域名来访问就可以访问到GitHub Pages里面的静态网页啦，演示如下</p><p><img src="https://cdn.jsdelivr.net/gh/aibittek/ImageHost/img/image-20210223161857758.png" alt="个性化域名访问GitHub Pages演示"></p><h3 id="高效发布文章"><a href="#高效发布文章" class="headerlink" title="高效发布文章"></a>高效发布文章</h3><h4 id="Typora图床编辑"><a href="#Typora图床编辑" class="headerlink" title="Typora图床编辑"></a>Typora图床编辑</h4><p>网站搭建好之后，是不是就想着发布分享自己的文章内容了呢，那么就要选择一款高效的工具，这里推荐的是Typora Markdown工具，不好意思不是推荐，我想强制你用这个😄。因为实在是太好用了，可以在写的同时渲染出结果，所见即所得，还有很多的优点，这里就不一一介绍啦。</p><p>下载地址：<a href="https://typora.io/" rel="external nofollow noreferrer">https://typora.io/</a></p><p>例子：使用hexo new “name”可以在source/_ports目录下创建出来name.md的Markdown文件，然后双击通过Typora打开进行创作就可以啦。</p><h4 id="图床PicGo"><a href="#图床PicGo" class="headerlink" title="图床PicGo"></a>图床PicGo</h4><p>咱们在写文章的时候，会用到图片，音乐和视频，你应该不希望这些数据都保存到你的GitHub中吧，否则随着文章的增多内容会增大很多，数据同步的话也变得困难。</p><p>一般的像网易云音乐，B站视频等都提供了外部链接，咱们可以把这些媒体资源信息放到对应的音乐视频网站上，减小自己网站的大小，然后通过提供的外部链接放到自己的文章里来就可以了。</p><p><strong>图片也一样，可以使用专门提供图片存储地址的服务，这个服务被翻译成图床，英文叫Image Host</strong></p><p>有很多软件提供了图床的功能，而PicGo则是提供聚合的图床的工具，我们可以看到支持了很多图床工具的设置</p><p><img src="https://cdn.jsdelivr.net/gh/aibittek/ImageHost/img/image-20210223163843008.png" alt="PicGo图床支持"></p><p>接下来需要做这几步骤：</p><ol><li><p> Github创建一个新的仓库用来存放图片</p></li><li><p> Typora中设置PicGo应用，设置成功后，粘贴图片时会调用PicGo进行自动上传；</p></li><li><p> 下载安装PicGo，推荐使用app带界面的更加直观，配置PicGo在接收到数据后上传到哪里，这里我们要设置上传到咱们在GitHub上创建出来的专门放图片的仓库里</p></li><li><p> 由于PicGo把图片自动上传到GitHub上需要权限，因此在PicGo中填写GitHub中的token来授权</p></li></ol><p>Github创建仓库就不用说了，Typora中下载PicGo app，然后把下载的应用路径填写进去，再把上面的几个勾勾打上即可，Typora就能在插入图片时自动把图片交给PicGo上传啦。</p><p><img src="https://cdn.jsdelivr.net/gh/aibittek/ImageHost/img/image-20210223164847344.png" alt="Typora的偏好设置"></p><p>打开PicGo设置上传到的地址：</p><p><img src="https://cdn.jsdelivr.net/gh/aibittek/ImageHost/img/image-20210223165040077.png" alt="PicGo上传设置"></p><p>其中repo是你建立的仓库名称，branch是图片上传到哪个分支，token待会从GitHub获取，path是保存到这个分支的哪个目录下，customUrl使用了CDN加速，你自己的可以这么写<a href="https://cdn.jsdelivr.net/gh/aibittek/ImageHost%EF%BC%8C%E5%85%B6%E4%B8%ADaibittek/ImageHost%E6%94%B9%E6%88%90%E4%BD%A0%E8%87%AA%E5%B7%B1%E7%9A%84repo%E5%8D%B3%E5%8F%AF%E3%80%82" rel="external nofollow noreferrer">https://cdn.jsdelivr.net/gh/aibittek/ImageHost，其中aibittek/ImageHost改成你自己的repo即可。</a></p><p>我使用的是githubPlus，上面其实有一个GitHub图床了，单有时候会上传失败，选择githubPlus插件，上传图片错误的概率会小一点，可以在插件设置里搜索githubPlus，然后下载就可以了，然后把以上的这些内容填写到githubPlus这些框框中，最后不要忘记设为默认图床哦。</p><p>还差最后一步token获取，登录GitHub-&gt;Settings-&gt;Developer Settings-&gt;Personal access tokens-&gt;Generate new token，在Note中取一个名字，然后repo勾上，最后会生成一个token，这个token令牌要注意保存下，只显示一次，并把token存放到PicGo的githubPlus的token一栏点击确定就可以啦。</p><p><img src="https://cdn.jsdelivr.net/gh/aibittek/ImageHost/img/image-20210223165904550.png" alt="token获取步骤"></p><p>设置好之后，在Typora里随便粘贴一张图片会发现正在上传，然后点击GitHub上的图床仓库，看图片是不是已经上传成功了呢。</p><p><img src="https://cdn.jsdelivr.net/gh/aibittek/ImageHost/img/image-20210223170113124.png" alt="上传成功验证"></p><p>这个是上面这张图粘贴到Typora中的时候的自动上传效果</p><p><img src="https://cdn.jsdelivr.net/gh/aibittek/ImageHost/img/image-20210223170213582.png" alt="上传过程"></p><h3 id="美化网站内容"><a href="#美化网站内容" class="headerlink" title="美化网站内容"></a>美化网站内容</h3><h4 id="主题选择"><a href="#主题选择" class="headerlink" title="主题选择"></a>主题选择</h4><p>可以通过 <a href="https://hexo.io/themes" rel="external nofollow noreferrer">https://hexo.io/themes</a> 在搜索框中选择自己喜欢的主题，我选择的是这个主题Matery</p><p><img src="https://cdn.jsdelivr.net/gh/aibittek/ImageHost/img/image-20210223171205653.png" alt="Matery主题"></p><p>主题下载地址：<a href="https://github.com/blinkfox/hexo-theme-matery" rel="external nofollow noreferrer">https://github.com/blinkfox/hexo-theme-matery</a></p><p>下载之后解压，把hexo-theme-matery目录放到博客的themes目录下即可</p><p><img src="https://cdn.jsdelivr.net/gh/aibittek/ImageHost/img/image-20210223171352328.png" alt="matery主题"></p><p>修改根目录下的_config.yaml配置文件，使得新增加的主题生效</p><pre class="line-numbers language-yaml" data-language="yaml"><code class="language-yaml"><span class="token comment"># Extensions</span><span class="token comment">## Plugins: https://hexo.io/plugins/</span><span class="token comment">## Themes: https://hexo.io/themes/</span><span class="token key atrule">theme</span><span class="token punctuation">:</span> hexo<span class="token punctuation">-</span>theme<span class="token punctuation">-</span>matery<span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span></span></code></pre><p>通过以下命令构建部署之后，访问网页查看结果是不是已经焕然一新了呢😄</p><pre class="line-numbers language-shell" data-language="shell"><code class="language-shell">hexo clean <span class="token operator">&amp;&amp;</span> hexo g -d<span aria-hidden="true" class="line-numbers-rows"><span></span></span></code></pre><h4 id="主题配置"><a href="#主题配置" class="headerlink" title="主题配置"></a>主题配置</h4><p>当然主题还有很多优化设置，比如主页怎么显示，动画怎么展示等等，这些matery已经都提供了修改方法，在源码的Readme文件中的配置一栏，这里就不详述了，可根据自己的需求在文档的配置章节，根据自己的喜好进行自定义修改，传送门：<a href="https://github.com/blinkfox/hexo-theme-matery/blob/develop/README_CN.md" rel="external nofollow noreferrer">https://github.com/blinkfox/hexo-theme-matery/blob/develop/README_CN.md</a></p><h4 id="评论系统"><a href="#评论系统" class="headerlink" title="评论系统"></a>评论系统</h4><p>以上文档中提到了支持的评论系统，但是没有具体说明如何支持，这里咱们介绍下。</p><p>目前不需要服务端的评论系统有两个用的比较多的，一个是valine，一个是Gitalk。</p><p>valine使用了LeanCloud访问速度快，无需搭建服务端，也不需要用户登录，就可以随意评论，但是担心不能长久使用，所以我使用了Gitalk，也是基于GitHub的，本质上借助了issue的功能。</p><p>既然选择了Gitalk，就开始搭建评论系统的环境吧，需要以下几步：</p><ol><li> GitHub开启授权</li><li> Gitalk网页配置</li><li> GitalkBUG修复</li></ol><h4 id="GitHub开启授权"><a href="#GitHub开启授权" class="headerlink" title="GitHub开启授权"></a>GitHub开启授权</h4><p>通过Settings-&gt;Developer settings-&gt;OAuth Apps-&gt;New OAuth App创建一个授权，我这里已经创建好了一个叫kui.ge的授权</p><p><img src="https://cdn.jsdelivr.net/gh/aibittek/ImageHost/img/image-20210223173530412.png" alt="开启授权操作路径"></p><p>看下我的授权是怎么写的</p><p><img src="https://cdn.jsdelivr.net/gh/aibittek/ImageHost/img/image-20210223173639200.png" alt="授权内容填写"></p><p>注意，如果你的域名已经转到了自定义域名，这里填写的是你的新域名，如果没有，填写的callback URL应该是你的<strong>用户名.github.io</strong></p><p>填写好之后，点击确认，会得到Client ID和Client secrets，注意保存Client secrets，只显示一次：</p><p><img src="https://cdn.jsdelivr.net/gh/aibittek/ImageHost/img/image-20210223173822448.png" alt="获取Client ID和Client secrets"></p><h4 id="Gitalk网页配置"><a href="#Gitalk网页配置" class="headerlink" title="Gitalk网页配置"></a>Gitalk网页配置</h4><p>打开网站源码的themes/_config.yml配置文件，找到gitalk配置如下：</p><blockquote><p>  注意如果不是这个主题，可能没有集成Gitalk，需要按照Gitalk的要求进行配置，<a href="https://github.com/gitalk/gitalk" rel="external nofollow noreferrer">源码及文档地址</a></p></blockquote><pre class="line-numbers language-shell" data-language="shell"><code class="language-shell"><span class="token comment"># the Gitalk config，default disabled</span><span class="token comment"># Gitalk 评论模块的配置，默认为不激活</span>gitalk:  enable: <span class="token boolean">true</span>  owner: aibittek <span class="token comment">#填写你OAuth App的用户名</span>  repo: aibittek.github.io <span class="token comment">#填写你自己的</span>  oauth:    clientId: <span class="token comment">#填写上面获取到的</span>    clientSecret: <span class="token comment">#填写上面获取到的</span>  admin: aibittek <span class="token comment">#填写你自己的，github用户名</span>  proxy: https://netnr-proxy.cloudno.de/https://github.com/login/oauth/access_token<span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre><p>按照以上填写就可以了，多了一个proxy，是为了解决近期的一个BUG的，参考下一章节。</p><h4 id="Gitalk-BUG修复"><a href="#Gitalk-BUG修复" class="headerlink" title="Gitalk BUG修复"></a>Gitalk BUG修复</h4><p>最近使用Gitalk的都出现了不能评论的问题，具体原因可参考<a href="https://github.com/gitalk/gitalk/issues/429" rel="external nofollow noreferrer">issue</a></p><p>错误提示：<strong>Error: Request failed with status code 403</strong></p><p>错误原因：<a href="https://mp.weixin.qq.com/s/Lwl9rf95EqlTYLfconjflQ" rel="external nofollow noreferrer">https://mp.weixin.qq.com/s/Lwl9rf95EqlTYLfconjflQ</a></p><p>解决办法：在Gitalk构造时增加CORS proxy，然后在配置中增加这个代理。</p><p>刚才在配置中已经增加了proxy的字段了，后面的网址就是CORS proxy，也可以通过cloudflare自己创建一个worker，通过Gitalk提供的请求要求搭建一个，也可以像我一样白嫖人家的😄</p><blockquote><p>  注意：Gitalk有安全漏洞，从而导致GitHub获取到全局的读写权限，最差的可能是你的GitHub全站可能会被人删除跑路/(ㄒoㄒ)/~~，具体说明如下：<a href="https://www.v2ex.com/t/535608" rel="external nofollow noreferrer">https://www.v2ex.com/t/535608</a></p></blockquote><p>打开gitalk.ejs代码，增加以下一行即可，完结撒花解决这个BUG了</p><pre class="line-numbers language-js" data-language="js"><code class="language-js">proxy<span class="token operator">:</span> <span class="token string">'&lt;%- theme.gitalk.proxy %>'</span><span class="token punctuation">,</span><span aria-hidden="true" class="line-numbers-rows"><span></span></span></code></pre><p><img src="https://cdn.jsdelivr.net/gh/aibittek/ImageHost/img/image-20210223175045009.png" alt="构造增加proxy字段"></p><p>重新构建部署后，打开网站看看是不是可以评论啦</p><p><img src="https://cdn.jsdelivr.net/gh/aibittek/ImageHost/img/image-20210223175227501.png" alt="评论界面"></p><p>如果不能够登录，需要登录授权后才能登录哦。</p><p>另外还可能出现一些其他奇怪的问题，大多的可能性和GitHub开启授权的时候填写的内容错误有关，需要注意callback URL的填写不是仓库的地址，而是github.io的静态网页访问的地址，但是如果你做了自定义域名，就要填写自定义域名的地址了，比如说我的就改成了<a href="https://kui.ge/">https://kui.ge</a></p><h2 id="高级"><a href="#高级" class="headerlink" title="高级"></a>高级</h2><h3 id="优化访问速度"><a href="#优化访问速度" class="headerlink" title="优化访问速度"></a>优化访问速度</h3><p>GitHub国内的访问速度比较慢，另外GitHub也禁止了百度爬虫，导致百度不能收录GitHub内容，这些问题通过这一章节都可以得到解决。</p><ul><li>  1、申请<a href="https://www.cloudflare.com/" rel="external nofollow noreferrer">Cloudflare账号</a>，点击右上角的<strong>添加站点</strong>按钮，输入自己的域名，如下：</li></ul><p><img src="https://cdn.jsdelivr.net/gh/aibittek/ImageHost/img/image-20210222140210567.png" alt="Cloudflare添加站点"></p><ul><li>  2、到自己的域名服务器上修改DNS为Cloudflare的DNS</li></ul><p>不同的域名注册商略有不同，参考如下：</p><p><img src="https://cdn.jsdelivr.net/gh/aibittek/ImageHost/img/image-20210222140044197.png" alt="修改域名DNS服务商到cloudflare"></p><ul><li>  3、把自己的域名DNS解析转到Cloudflare</li></ul><p><img src="https://cdn.jsdelivr.net/gh/aibittek/ImageHost/img/image-20210222135814969.png" alt="域名DNS转到Cloudflare"></p><ul><li><p>4、确认激活状态</p><p>  进入注册Cloudflare的邮箱，查看激活状态。成功激活Cloudflare的邮箱参考如下：</p><p>  <img src="https://cdn.jsdelivr.net/gh/aibittek/ImageHost/img/image-20210222140648526.png" alt="Cloudflare激活提示邮件"></p></li><li><p>5、确定状态激活成功</p><p>  如下所示，进入<a href="https://dash.cloudflare.com/" rel="external nofollow noreferrer">看板</a>查看概述，已经激活了。</p></li></ul><p><img src="https://cdn.jsdelivr.net/gh/aibittek/ImageHost/img/image-20210222140754636.png" alt="image-20210222140754636"></p><ul><li><p>6、访问自己的网站，访问速度明显加快</p><p>  以下是参考，打开浏览器的F12调试窗口，设置Disable cache，查看Finish大概3秒钟基本数据加载完毕，之前需要7-8秒钟的时间</p></li></ul><p><img src="https://cdn.jsdelivr.net/gh/aibittek/ImageHost/img/image-20210222142007780.png" alt="网页在不开缓存的情况下加载显示速度"></p><ul><li>  7、使用工具查看最终的访问路由是否正确指向了Cloudflare</li></ul><p>通过<a href="https://tools.ipip.net/traceroute.php" rel="external nofollow noreferrer">在线路由查询网址</a>，输入自己想查询的域名，看看经过的路由是不是最终到达了Cloudflare。</p><p><img src="https://cdn.jsdelivr.net/gh/aibittek/ImageHost/img/image-20210222144656971.png" alt="Cloudflare访问路由验证"></p><p><strong>其他的一些设置</strong></p><p>DNSSEC设置，点击启用后，在域名服务商处填写DS记录，大概10多分钟到1个小时后启动成功。</p><p><img src="https://cdn.jsdelivr.net/gh/aibittek/ImageHost/img/image-20210222155007186.png" alt="DNSSEC设置"></p><p>SSL/TLS的端到端加密</p><p><img src="https://cdn.jsdelivr.net/gh/aibittek/ImageHost/img/image-20210222155107313.png" alt="设置端到端的加密访问策略"></p><h3 id="搜索引擎收录"><a href="#搜索引擎收录" class="headerlink" title="搜索引擎收录"></a>搜索引擎收录</h3><h4 id="Google-Analytics统计功能"><a href="#Google-Analytics统计功能" class="headerlink" title="Google Analytics统计功能"></a>Google Analytics统计功能</h4><p>打开<a href="https://analytics.google.com/" rel="external nofollow noreferrer">Google Analytics</a>链接，登录自己的谷歌账号，按提示添加服务，重要的地方如下，打开高级选项，选择创建Universal Analytics媒体资源，把要统计分析的网址填写上去。</p><p><img src="https://cdn.jsdelivr.net/gh/aibittek/ImageHost/img/image-20210222165210139.png" alt="设置媒体资源"></p><p>得到跟踪ID</p><p><img src="https://cdn.jsdelivr.net/gh/aibittek/ImageHost/img/image-20210222165652588.png" alt="获取跟踪ID"></p><p>增加统计功能</p><p>在Hexo的主题配置文件_config.yml中查找googleAnalytics完成跟踪ID的添加，按照以下参考Google Analytics统计功能</p><pre class="line-numbers language-yaml" data-language="yaml"><code class="language-yaml"><span class="token comment"># Add google analytics configuration</span><span class="token comment"># 添加 Google Analytics 配置</span><span class="token key atrule">googleAnalytics</span><span class="token punctuation">:</span>  <span class="token key atrule">enable</span><span class="token punctuation">:</span> <span class="token boolean important">true</span>  <span class="token key atrule">id</span><span class="token punctuation">:</span> UA<span class="token punctuation">-</span>xxxxxxxx<span class="token punctuation">-</span><span class="token number">1</span><span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span></span></code></pre><h4 id="谷歌收录"><a href="#谷歌收录" class="headerlink" title="谷歌收录"></a>谷歌收录</h4><h5 id="收录域名提交"><a href="#收录域名提交" class="headerlink" title="收录域名提交"></a>收录域名提交</h5><ol><li><p>登录<a href="https://search.google.com/search-console/about" rel="external nofollow noreferrer">谷歌搜索排名网址</a></p><p> <img src="https://cdn.jsdelivr.net/gh/aibittek/ImageHost/img/image-20210222222819218.png" alt="收录域名提交"></p></li><li><p>获取网站验证码</p><p> 点击继续后，弹出谷歌网站验证码，点击复制，并把这个值按照图中的要求增加到域名的DNS记录中。</p><p> <img src="https://cdn.jsdelivr.net/gh/aibittek/ImageHost/img/image-20210223213459248.png" alt="获取网站验证码"></p></li><li><p>登录域名增加TXT解析记录</p><p> 增加一条TXT记录，name为@，内容为以上谷歌提供的值，我这里kui.ge的域名DNS解析已经转入了Cloudflare，因此在Cloudflare的TXT解析记录如下</p><p> <img src="https://cdn.jsdelivr.net/gh/aibittek/ImageHost/img/image-20210222223329909.png" alt="TXT解析记录"></p></li><li><p>点击验证，提示验证成功</p><p> <img src="https://cdn.jsdelivr.net/gh/aibittek/ImageHost/img/image-20210222223553295.png" alt="验证成功界面"></p></li><li><p>前往资源页面进行管理</p><p> 点击站点地图，把博客根目录下构建生成的sitemap.xml的URL地址填写进去帮忙收录，可以看到谷歌识别到了24个有效访问链接。</p><p> <img src="https://cdn.jsdelivr.net/gh/aibittek/ImageHost/img/image-20210222225246537.png" alt="站点地图提交"></p></li><li><p>查看收录结果</p><p> 使用<code>site:kui.ge</code>便可以查看收录结果，一般24小时内就能够查阅到结果，使用谷歌这个功能需要科学上网的哦</p><p> <img src="https://cdn.jsdelivr.net/gh/aibittek/ImageHost/img/image-20210223094704695.png" alt="谷歌成功收录结果"></p></li></ol><h5 id="Sitemap谷歌收录"><a href="#Sitemap谷歌收录" class="headerlink" title="Sitemap谷歌收录"></a>Sitemap谷歌收录</h5><ul><li><p>安装插件</p>  <pre class="line-numbers language-shell" data-language="shell"><code class="language-shell"><span class="token function">npm</span> <span class="token function">install</span> hexo-generator-sitemap --save<span aria-hidden="true" class="line-numbers-rows"><span></span></span></code></pre></li><li><p>修改配置文件</p><p>  修改根节点_config.xml，添加以下内容：</p>  <pre class="line-numbers language-yaml" data-language="yaml"><code class="language-yaml"><span class="token key atrule">sitemap</span><span class="token punctuation">:</span>  <span class="token key atrule">path</span><span class="token punctuation">:</span> sitemap.xml<span aria-hidden="true" class="line-numbers-rows"><span></span><span></span></span></code></pre></li></ul><h4 id="百度收录"><a href="#百度收录" class="headerlink" title="百度收录"></a>百度收录</h4><p>提交百度有网页直接提交、手动提交、主动推送，自动推送和sitemap五种方式，各自的优缺点可以看<a href="https://zhuanlan.zhihu.com/p/129740968" rel="external nofollow noreferrer">这篇博文</a>。</p><h5 id="网页直接提交"><a href="#网页直接提交" class="headerlink" title="网页直接提交"></a>网页直接提交</h5><p>在百度搜索框搜索域名，然后点击提交网址，直接提交给百度即可。</p><p><img src="https://cdn.jsdelivr.net/gh/aibittek/ImageHost/img/image-20210222184206912.png" alt="网页提交指南"></p><h5 id="手动提交"><a href="#手动提交" class="headerlink" title="手动提交"></a>手动提交</h5><p>登录<a href="https://ziyuan.baidu.com/" rel="external nofollow noreferrer">百度搜索资源平台</a>， 登录成功之后在 用户中心 –&gt; 站点管理 页面中点击<a href="https://links.jianshu.com/go?to=https://ziyuan.baidu.com/site/siteadd" rel="external nofollow noreferrer">添加网站</a>，按提示操作。</p><p><img src="https://cdn.jsdelivr.net/gh/aibittek/ImageHost/img/image-20210222172445482.png" alt="添加站点"></p><blockquote><p>  注意：GitHub禁止了百度爬虫，因此需要确认是否完成了上一章节的Cloudflare设置</p></blockquote><p>HTML标签验证</p><p><img src="https://cdn.jsdelivr.net/gh/aibittek/ImageHost/img/image-20210222173807500.png" alt="HTML标签验证"></p><p>先不要点击验证，找到Hexo主题的head.ejs文件，把上图的代码加入进来，然后<code>hexo clean &amp;&amp; hexo g -d</code>部署成功之后，再点击上面的完成验证。</p><p><img src="https://cdn.jsdelivr.net/gh/aibittek/ImageHost/img/image-20210222181525160.png" alt="添加baidu-site-verification"></p><p>如果使用的是Next主题可以复制百度上图中提供的content值，在Next主题的_config.yml中搜索 <code>baidu_site_verification</code>填入即可。</p><h5 id="主动推送"><a href="#主动推送" class="headerlink" title="主动推送"></a>主动推送</h5><p>GitHub禁止百度爬虫访问的补救办法，并能够及时把新创建的文件提交给百度收录，也能保护原创文章，推荐。</p><ul><li>  <strong>安装hexo-baidu-url-submit插件</strong></li></ul><p>首先，在Hexo根目录下，安装本插件：</p><pre class="line-numbers language-undefined" data-language="undefined"><code class="language-undefined">npm install hexo-baidu-url-submit --save<span aria-hidden="true" class="line-numbers-rows"><span></span></span></code></pre><p><strong>请注意， 本插件的配置文件中包含秘钥， 请把您的Hexo博客源文件托管到私有仓库里。</strong></p><ul><li>  <strong>配置_config.yml文件</strong></li></ul><p>同样在根目录下，把以下内容配置到<code>_config.yml</code>文件中:</p><pre class="line-numbers language-yaml" data-language="yaml"><code class="language-yaml"><span class="token key atrule">baidu_url_submit</span><span class="token punctuation">:</span>  <span class="token key atrule">count</span><span class="token punctuation">:</span> <span class="token number">10</span> <span class="token comment">## 比如10，代表提交最新的10个链接</span>  <span class="token key atrule">host</span><span class="token punctuation">:</span> kui.ge <span class="token comment">## 在百度站长平台中注册的域名</span>  <span class="token key atrule">token</span><span class="token punctuation">:</span> your_token <span class="token comment">## 请注意这是您的秘钥，请不要发布在公众仓库里!</span>  <span class="token key atrule">path</span><span class="token punctuation">:</span> baidu_urls.txt <span class="token comment">## 文本文档的地址，新链接会保存在此文本文档里</span><span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span></span></code></pre><p>your_token可以通过登录<a href="https://ziyuan.baidu.com/" rel="external nofollow noreferrer">百度搜索资源平台</a>，找到自动提交中的主动推送，找到token，填写进入即可。</p><p><img src="https://cdn.jsdelivr.net/gh/aibittek/ImageHost/img/image-20210222174736408.png" alt="主动推送token获取"></p><ul><li>  <strong>检查url</strong></li></ul><p>其次，记得查看<code>_config.yml</code>文件中url的值， 必须包含是百度站长平台注册的域名（一般有www）， 比如:</p><pre class="line-numbers language-yaml" data-language="yaml"><code class="language-yaml"><span class="token comment"># URL</span><span class="token key atrule">url</span><span class="token punctuation">:</span> http<span class="token punctuation">:</span>//kui.ge<span class="token key atrule">root</span><span class="token punctuation">:</span> /<span class="token key atrule">permalink</span><span class="token punctuation">:</span> <span class="token punctuation">:</span>year/<span class="token punctuation">:</span>month/<span class="token punctuation">:</span>title/<span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span></span></code></pre><ul><li>  <strong>加入deploy</strong></li></ul><pre class="line-numbers language-yaml" data-language="yaml"><code class="language-yaml"><span class="token key atrule">deploy</span><span class="token punctuation">:</span><span class="token punctuation">-</span> <span class="token key atrule">type</span><span class="token punctuation">:</span> git  <span class="token key atrule">repo</span><span class="token punctuation">:</span> https<span class="token punctuation">:</span>//github.com/aibittek/aibittek.github.io.git  <span class="token key atrule">branch</span><span class="token punctuation">:</span> master<span class="token punctuation">-</span> <span class="token key atrule">type</span><span class="token punctuation">:</span> baidu_url_submitter<span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span></span></code></pre><p>执行hexo d的时候，新的链接就会被推送了。</p><p>成功推送的显示结果</p><p><img src="https://cdn.jsdelivr.net/gh/aibittek/ImageHost/img/image-20210223180208395.png" alt="成功推送的显示结果"></p><p><strong>实现原理</strong></p><p>推送功能的实现，分为两部分：</p><p>新链接的产生，<code>hexo g</code>会产生一个文本文件，里面包含最新的链接</p><p>新链接的提交，<code>hexo d</code>会从上述文件中读取链接，提交至百度搜索引擎。</p><h5 id="自动推送"><a href="#自动推送" class="headerlink" title="自动推送"></a>自动推送</h5><p><code>hexo-theme-matery/_config.yml</code> 默认打开，如下：</p><pre class="line-numbers language-yaml" data-language="yaml"><code class="language-yaml"><span class="token comment"># 百度搜索资源平台提交链接</span><span class="token key atrule">baiduPush</span><span class="token punctuation">:</span> <span class="token boolean important">true</span><span aria-hidden="true" class="line-numbers-rows"><span></span><span></span></span></code></pre><h5 id="Sitemap百度收录"><a href="#Sitemap百度收录" class="headerlink" title="Sitemap百度收录"></a>Sitemap百度收录</h5><ul><li><p>安装插件</p>  <pre class="line-numbers language-shell" data-language="shell"><code class="language-shell"><span class="token function">npm</span> <span class="token function">install</span> hexo-generator-baidu-sitemap --save<span aria-hidden="true" class="line-numbers-rows"><span></span></span></code></pre></li><li><p>修改配置文件</p><p>  修改根节点_config.xml，添加以下内容：</p>  <pre class="line-numbers language-yaml" data-language="yaml"><code class="language-yaml"><span class="token key atrule">baidusitemap</span><span class="token punctuation">:</span>  <span class="token key atrule">path</span><span class="token punctuation">:</span> baidusitemap.xml<span aria-hidden="true" class="line-numbers-rows"><span></span><span></span></span></code></pre></li></ul><h5 id="查看百度收录结果"><a href="#查看百度收录结果" class="headerlink" title="查看百度收录结果"></a>查看百度收录结果</h5><p><img src="https://cdn.jsdelivr.net/gh/aibittek/ImageHost/img/image-20210223094905172.png" alt="这是反例，1天了还没收录，还是各种手段都一起上的结果"></p><p>此时我的心情：</p><p><img src="https://cdn.jsdelivr.net/gh/aibittek/ImageHost/img/image-20210223095236095.png" alt="不要管哥的发型"></p><h4 id="必应收录"><a href="#必应收录" class="headerlink" title="必应收录"></a>必应收录</h4><h5 id="收录方法"><a href="#收录方法" class="headerlink" title="收录方法"></a>收录方法</h5><p>点击<a href="https://www.bing.com/webmasters" rel="external nofollow noreferrer">必应收录网址</a>，使用谷歌账号登录，会自动检测谷歌收录服务，点击直接导入即可</p><p><img src="https://cdn.jsdelivr.net/gh/aibittek/ImageHost/img/image-20210222225637845.png" alt="必应使用谷歌收录导入"></p><p>Sitemap网站地图也要提交一遍，如下：</p><p><img src="https://cdn.jsdelivr.net/gh/aibittek/ImageHost/img/image-20210222225807576.png" alt="Sitemap提交"></p><p><img src="https://cdn.jsdelivr.net/gh/aibittek/ImageHost/img/image-20210222225910444.png" alt="提交sitemap.xml网站地图"></p><h5 id="收录结果"><a href="#收录结果" class="headerlink" title="收录结果"></a>收录结果</h5><p><img src="https://cdn.jsdelivr.net/gh/aibittek/ImageHost/img/image-20210223095416086.png" alt="必应收录结果"></p><p>没有对比就没有伤害，百度我把网页提交、手动提交、自动提交、自动推送、sitemap、robots.txt能加的都加上了，目前还得不到收录，谷歌和必应基本上半天就有结果/(ㄒoㄒ)/~~</p><h4 id="SEO优化"><a href="#SEO优化" class="headerlink" title="SEO优化"></a>SEO优化</h4><h5 id="修改-url-格式"><a href="#修改-url-格式" class="headerlink" title="修改 url 格式"></a>修改 url 格式</h5><blockquote><p>  seo搜索引擎优化认为，网站的最佳结构是用户从首页点击三次就可以到达任何一个页面</p></blockquote><p>但是我们使用hexo编译的站点打开文章的url是：sitename/year/mounth/day/title四层的结构，这样的url结构很不利于seo，爬虫就会经常爬不到我们的文章，修改 hexo 配置文件：</p><pre class="line-numbers language-yaml" data-language="yaml"><code class="language-yaml"><span class="token key atrule">permalink</span><span class="token punctuation">:</span> <span class="token punctuation">:</span>year/<span class="token punctuation">:</span>month/<span class="token punctuation">:</span>title/<span aria-hidden="true" class="line-numbers-rows"><span></span></span></code></pre><h5 id="nofollow设置"><a href="#nofollow设置" class="headerlink" title="nofollow设置"></a>nofollow设置</h5><p>外链越多，搜索引擎给此站点的权重就越低，即排位越后。为了提高权重，可以禁止搜索引擎跟进外链，添加 nofollow 属性就可以做到。</p><p>hexo 博客根目录安装插件</p><pre class="line-numbers language-shell" data-language="shell"><code class="language-shell"><span class="token function">npm</span> <span class="token function">install</span> hexo-filter-nofollow --save<span aria-hidden="true" class="line-numbers-rows"><span></span></span></code></pre><p>编辑 hexo 配置文件，添加：</p><pre class="line-numbers language-yaml" data-language="yaml"><code class="language-yaml"><span class="token key atrule">nofollow</span><span class="token punctuation">:</span>  <span class="token key atrule">enable</span><span class="token punctuation">:</span> <span class="token boolean important">true</span>  <span class="token key atrule">field</span><span class="token punctuation">:</span> post <span class="token comment"># post：仅处理文章内容，site：处理全站所有页面</span>  <span class="token key atrule">exclude</span><span class="token punctuation">:</span>    <span class="token punctuation">-</span> <span class="token string">'exclude1.com'</span>    <span class="token punctuation">-</span> <span class="token string">'exclude2.com'</span><span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre><h5 id="增加robots-txt"><a href="#增加robots-txt" class="headerlink" title="增加robots.txt"></a>增加robots.txt</h5><p>在 source 目录下添加 robots.txt ，编写爬虫规则，参考如下</p><pre class="line-numbers language-txt" data-language="txt"><code class="language-txt">User-agent: *Allow: &#x2F;Allow: &#x2F;archives&#x2F;Allow: &#x2F;tags&#x2F;Allow: &#x2F;categories&#x2F;Disallow: &#x2F;vendors&#x2F;Disallow: &#x2F;js&#x2F;Disallow: &#x2F;lib&#x2F;Disallow: &#x2F;css&#x2F;Disallow: &#x2F;fonts&#x2F;Disallow: &#x2F;vendors&#x2F;Disallow: &#x2F;fancybox&#x2F;Disallow: &#x2F;old&#x2F;Sitemap: http:&#x2F;&#x2F;kui.ge&#x2F;sitemap.xmlSitemap: http:&#x2F;&#x2F;kui.ge&#x2F;baidusitemap.xml<span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre><h4 id="收录工具"><a href="#收录工具" class="headerlink" title="收录工具"></a>收录工具</h4><p>对于这么多的搜索引擎，使用命令的方式或者分别登录不同平台的搜索引擎进行提交不太方便，有没有聚合的能在一个地方对所有的所有引擎提交收录呢，整理了网页版本和软件版本，有需要的可以学习使用下哦，效率更高。</p><h5 id="网页版本"><a href="#网页版本" class="headerlink" title="网页版本"></a>网页版本</h5><p><a href="https://www.sousuoyinqingtijiao.com/" rel="external nofollow noreferrer">https://www.sousuoyinqingtijiao.com/</a></p><p><img src="https://cdn.jsdelivr.net/gh/aibittek/ImageHost/img/image-20210223100423764.png" alt="image-20210223100423764"></p><h5 id="站长工具"><a href="#站长工具" class="headerlink" title="站长工具"></a>站长工具</h5><p>有了网站免不了要进行维护，查看用户访问数据，以便有针对的满足用户的需求。</p><p>不仅可以通过谷歌分析、百度分析等分析引擎，也可以使用<a href="https://tool.chinaz.com/" rel="external nofollow noreferrer">站长工具</a>可以比较方便的查看网站被收录，访问数据的信息情况。</p>]]></content>
      
      
      <categories>
          
          <category> Earth </category>
          
      </categories>
      
      
        <tags>
            
            <tag> GitHub pages </tag>
            
            <tag> Hexo </tag>
            
            <tag> Typora </tag>
            
            <tag> PicGo </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>自建永久免费的百度VIP网盘</title>
      <link href="2021/02/zi-jian-yong-jiu-mian-fei-de-bai-du-vip-wang-pan/"/>
      <url>2021/02/zi-jian-yong-jiu-mian-fei-de-bai-du-vip-wang-pan/</url>
      
        <content type="html"><![CDATA[<h2 id="自建永久免费的百度VIP网盘"><a href="#自建永久免费的百度VIP网盘" class="headerlink" title="自建永久免费的百度VIP网盘"></a>自建永久免费的百度VIP网盘</h2><h3 id="为什么要自建网盘？"><a href="#为什么要自建网盘？" class="headerlink" title="为什么要自建网盘？"></a>为什么要自建网盘？</h3><p>记得有次看到个不错的电影，叫什么3D有噗团，听说很有学习价值，好不容易找到了某度的网盘链接，大小差不多10多个GB，开始下载几百KB/s的速度，看了下大概需要20个小时左右下载完，心想着等时间到了再过来看🤭，就放它在后台慢慢下了。但事实证明我还是太天真了，20小时过去了，下载才20%，一看下载速度已经变成了2KB/s。纳尼~我这卫生纸都准备好了，你就这么对我┭┮﹏┭┮。作为一个”知识愤子”表示很愤怒，但是看着电影宣传页的画面，还是忍了一把，乖乖的掏出了20多米办了个会员，下载速度能到MB的级别了，期间提示我还有一个超级会员的下载速度60秒体验，点了一下下载速度又噌的一下上去了，好家伙会员也是有级别的。后来发现了办了会员后，也不用下载，只不过可惜我当时办的是会员，看的不是高清画面，最终还是下载到本地，用支持3D的屏幕享受了一把😄。</p><p>以上就是我的遭遇，并且有些视频上传上去之后，就被删除了，原因大家都懂o((⊙﹏⊙))o</p><p>因此后面就想自己建立个网盘喽。最好资料都保存在自己的硬盘里，远程可以访问，也可以分享给其他人，还能多终端在线浏览视频、音频、文档这些VIP功能那就再好不过了。</p><h3 id="为什么选择树莓派4b做网盘？"><a href="#为什么选择树莓派4b做网盘？" class="headerlink" title="为什么选择树莓派4b做网盘？"></a>为什么选择树莓派4b做网盘？</h3><p>以上我的需求其实就是NAS（Network Attached Storage）网络附属存储。业界做NAS最好的应该就是群晖之类的服务商了，如果家里有闲置电脑，还可以使用黑群晖来做也是可以的。还有一些发烧友使用万兆以太网搭配NVMe固态硬盘，为了达到同样的速度电脑接口可能也需要雷电3，支持万兆的网线，太土豪了，我还是想要一个：</p><ul><li>  <strong>永久免费</strong>（一次性投入硬件成本，后续不收费，有某度的VIP功能）</li><li>  <strong>功耗低</strong>（电费也是钱，尽量功耗最低，低到1年的电费可以忽略不计）</li><li>  <strong>小巧</strong>（想放哪放哪，不占地方）</li><li>  <strong>利用家里闲置带宽</strong>（不用白不用）</li><li>  <strong>可动态扩展</strong>（扩展网盘，任意文件内容，私密内容，做服务器，做其他有趣的东西都可以）</li></ul><p>好了，怎么diy做一个自己的网盘呢？首先挑选硬件平台。万兆太贵，家庭千兆网络环境已经普及。因此只要挑选一个能够支持千兆网路的设备做NAS主机，再挑选一块支持千兆读写的硬盘就可以啦。</p><p>不喜欢折腾的可以直接选择最近刚出的猫盘plus之类的NAS网盘；</p><p>米不多的可以选择黑群晖（功耗）、全洗白猫盘（100多加自备硬盘，需要自己折腾或者某宝某夕夕上）、N1（价格不到100加自备硬盘，硬伤是USB2.0）、蜗牛星际等；</p><p>因此我最终选择了树莓派4b，原因如下：</p><p>体积小：尽可能的”藏”在某个角落，一般来说最可能的是和入户光猫装在集线盒中，太大了放不下；</p><p>功耗低：树莓派做网盘一年的电费按6毛一度电计算，待机功耗5V * 0.55A左右$\approx$2.75W；全速拷贝速度在100MByte/s的时候功耗5V * 1.10A左右$\approx$5.5W；一年的电费在((2.75W * 24 * 365)/1000)*0.6~((5.5W * 24 * 365)/1000)*0.6，大概一年的电费在15元-30元之间；</p><p>速度快：树莓派4b支持千兆以太网配合上USB3.0的移动硬盘，可以满速达到1Gbps的数据读写，这个对于个人或者家庭使用已经够用了，当然也可以组RAID来提高磁盘读写速度和数据安全保障。如果有万兆需求的发烧友，要考虑通信设备（电脑、路由、网线等）支持万兆，硬盘一般也需要物理层M.2接口的，PCIe硬件协议的，NVMe通信协议的SSD固态硬盘才能保证万兆的下限读写速度，而这些都太贵了了，保证每个环节都满足条件也难，因此就不考虑这个情况了哦。</p><p>扩展性：个人有服务器的需求，比如做一些智能硬件远程控制、手机App、Web页面、微信小程序的功能会用到服务器，国内的主机又比较贵，使用家庭闲置带宽和树莓派4b可以临时搭建以上的这些服务器，完成相关的功能。后期如果能够商用或者用户量大的时候，再考虑购买国内的知名主机或者进行水平扩展。</p><p>最后，树莓派4b是一个硬件开放平台，可以安装很多的系统和软件，生态非常好，因此对于学习很多的物联网、人工智能、边缘计算的应用和实施都很有帮助，一平台多用途，这也是最终选择它的一个原因。</p><p>一个利用家里闲置带宽，使用树莓派4b搭建的支持千兆传输的网盘，能力媲美百度VIP网盘的配置如下。</p><table><thead><tr><th>序号</th><th>设备</th><th>备注</th></tr></thead><tbody><tr><td>1</td><td>树莓派4b 2G</td><td>体积小、功耗低、易扩展、千兆以太网、USB3.0</td></tr><tr><td>2</td><td>移动硬盘</td><td>支持千兆读写速度的高性价比2T移动硬盘</td></tr><tr><td>3</td><td>公网宽带</td><td>家庭公网宽带</td></tr><tr><td>4</td><td>其他</td><td>5V3A电源线、16G及以上TF卡、千兆网线、千兆路由、散热片或外壳、HDMI线（非必须）</td></tr></tbody></table><p>既然有了配置，接下来就开始完成一个自建永久免费网盘的功能吧</p><p>主要分为4个部分，完成前两个部分就是一个局域网的网盘了，完成第三个就是一个远程网盘了：</p><p>安装系统：<a href="#%E7%BB%99%E4%BD%A0%E7%9A%84%E6%A0%91%E8%8E%93%E6%B4%BE%E5%AE%89%E8%A3%85%E4%B8%80%E4%B8%AA%E7%B3%BB%E7%BB%9F">给你的树莓派安装一个系统</a>，后续网盘软件是建立在这个操作系统上的；</p><p>本地网盘：<a href="#%E5%81%9A%E4%B8%80%E4%B8%AA%E6%9C%AC%E5%9C%B0%E7%BD%91%E7%9B%98">做一个本地网盘</a>，在家里的局域网可以共享，投屏，千兆满速读写的本地网盘；</p><p>VIP网盘：<a href="#%E5%81%9A%E4%B8%80%E4%B8%AA%E5%AE%8C%E6%95%B4%E7%9A%84%E7%99%BE%E5%BA%A6VIP%E7%BD%91%E7%9B%98">做一个完整的类似百度VIP网盘</a>，支持远程多终端访问上传下载，在线浏览，链接分享等VIP功能；</p><p>离线下载：<a href="#%E7%BB%99%E7%BD%91%E7%9B%98%E6%8F%92%E4%B8%8A%E7%BF%B1%E7%BF%94%E7%9A%84%E7%BF%85%E8%86%80">给网盘插上翱翔的翅膀</a>，让网盘可以利用家里的闲置带宽自动帮我们下载一些资源；</p><h2 id="给你的树莓派安装一个系统"><a href="#给你的树莓派安装一个系统" class="headerlink" title="给你的树莓派安装一个系统"></a>给你的树莓派安装一个系统</h2><h3 id="系统选择"><a href="#系统选择" class="headerlink" title="系统选择"></a>系统选择</h3><p>这里选择了树莓派官方的Raspbian Buster系统。</p><h3 id="系统下载"><a href="#系统下载" class="headerlink" title="系统下载"></a>系统下载</h3><p>官方镜像网站：<a href="https://www.raspberrypi.org/software/" rel="external nofollow noreferrer">https://www.raspberrypi.org/software/</a></p><p>目前官网有一个Raspberry Pi Imager的工具，制作树莓派操作更加便捷。如果遇到系统镜像的下载速度比较慢的，还是推荐地址<a href="https://www.raspberrypi.org/software/operating-systems/#raspberry-pi-os-32-bit" rel="external nofollow noreferrer">下载32位镜像</a>，总大小3GB，使用迅雷下载，下载速度大概能到15MB/s。</p><p><img src="https://cdn.jsdelivr.net/gh/aibittek/ImageHost/img/image-20210216212903149.png" alt="2021-01-11-raspios-buster-armhf-full.zip"></p><p>下载好之后，是一个压缩包，解压得到2021-01-11-raspios-buster-armhf-full.img镜像文件，8GB多。</p><h3 id="系统安装"><a href="#系统安装" class="headerlink" title="系统安装"></a>系统安装</h3><p>系统是安装在TF卡中的。在安装系统之前，TF需要格式化。</p><h4 id="SDFormatter-4-0格式化TF卡"><a href="#SDFormatter-4-0格式化TF卡" class="headerlink" title="SDFormatter 4.0格式化TF卡"></a>SDFormatter 4.0格式化TF卡</h4><p>这里使用SDFormatter 4.0格式化SD卡，操作很简单，打开界面，选择要格式化的盘，注意一定要看好了TF卡的盘符，不要格式化错了，数据无价，一定要小心操作哦。</p><p>SDFormatter 4.0下载链接：</p><pre class="line-numbers language-none"><code class="language-none">链接: https:&#x2F;&#x2F;pan.baidu.com&#x2F;s&#x2F;1Fk7brPQlCy-hUtCfJBxgEg 提取码: htfi<span aria-hidden="true" class="line-numbers-rows"><span></span><span></span></span></code></pre><p>操作界面：</p><p>插上TF卡到电脑，Drive显示盘符，确认盘符无误后，选择格式化即可。</p><p>默认是快速格式化，也可以通过界面中的<strong>选项设置</strong>改变格式化选项。</p><p><img src="https://cdn.jsdelivr.net/gh/aibittek/ImageHost/img/4e46bfb745591802c11bd48b4683b858.jpg" alt="SDFormatter操作界面"></p><h4 id="Win32-Disk-Imager制作系统"><a href="#Win32-Disk-Imager制作系统" class="headerlink" title="Win32 Disk Imager制作系统"></a>Win32 Disk Imager制作系统</h4><p><a href="https://win32diskimager.download/Win32DiskImager-1.0.0-src.zip" rel="external nofollow noreferrer">下载Win32 Disk Imager</a></p><p>选择U盘作为设备，下载解压好的映像文件，点击写入，当任务进度100%后，即可完成Raspberry系统到SD卡的写入。</p><p><img src="https://cdn.jsdelivr.net/gh/aibittek/ImageHost/img/image-20210216215143775.png" alt="image-20210216215143775"></p><h3 id="系统启动与验证"><a href="#系统启动与验证" class="headerlink" title="系统启动与验证"></a>系统启动与验证</h3><ol><li> 为了验证系统是否成功，需要在刚才的SD卡中新建一个空文件，名为ssh，就可以开启SSH功能进行远程登录了；</li><li> 把SD卡插入到树莓派的SD插槽中，接上5V3A的电源，插上千兆网线到路由器，保证和电脑在同一个局域网；</li><li> 电脑上打开cmd命令行，输入以下命令<code>ping raspberrypi.local</code>查询树莓派的IP地址，用于SSH的远程登录；也可以在路由器中查看树莓派的IPv6地址；</li><li> 通过第三步得到的树莓派设备IP地址，使用SSH远程登录，能够进入命令行说明系统安装成功，具体操作如下：</li></ol><p><img src="https://cdn.jsdelivr.net/gh/aibittek/ImageHost/img/image-20210216221718333.png" alt="image-20210216221718333"></p><p>为了后面的服务，在路由器中给树莓派设置一个固定的IP。</p><h3 id="无线网络开启"><a href="#无线网络开启" class="headerlink" title="无线网络开启"></a>无线网络开启</h3><p>虽然做网盘不赞成用网盘，因为速度不稳定。</p><p>但是可能一开始在配置的时候，<strong>没有有线网络环境，因此可以通过以下方法在做完系统后开启无线网络，适合于暂时无显示器也没有有线网络的情况下。</strong></p><p>这种方式适用于第一次刻录完系统，并且没有有线网络连接的情况下设置树莓派WiFi。方法如下：<br>在SD卡的boot分区种新建 wpa_supplicant.conf 文件，并且配置 WiFi 的 SSID 和密码，这样树莓派启动后会自行读取 wpa_supplicant.conf 配置文件连接 WiFi 设备。</p><pre class="line-numbers language-none"><code class="language-none">ctrl_interface&#x3D;DIR&#x3D;&#x2F;var&#x2F;run&#x2F;wpa_supplicant GROUP&#x3D;netdevupdate_config&#x3D;1network&#x3D;&#123;ssid&#x3D;&quot;WiFi的SSID&quot;psk&#x3D;&quot;WiFi密码&quot;&#125;<span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre><p>树莓派开机，就会自动连接WiFi，可以查看路由器中分配的IP地址是多少，或者通过命令ping raspberrypi.local获取树莓派的IP地址，再通过SSH登录到树莓派进行命令行的控制。</p><h2 id="做一个本地网盘"><a href="#做一个本地网盘" class="headerlink" title="做一个本地网盘"></a>做一个本地网盘</h2><p>树莓派安装了Linux的系统，一般使用samba服务把挂载的磁盘暴露给局域网内的其他主机，从而当作局域网网盘来使用。</p><p><strong>完成本地网盘需要两个部分：磁盘挂载，配置samba服务。</strong></p><h3 id="本地挂载"><a href="#本地挂载" class="headerlink" title="本地挂载"></a>本地挂载</h3><h4 id="查询磁盘"><a href="#查询磁盘" class="headerlink" title="查询磁盘"></a>查询磁盘</h4><p>插入购买的移动硬盘到USB3.0接口上之后，输入以下命令：</p><pre class="line-numbers language-shell" data-language="shell"><code class="language-shell"><span class="token function">sudo</span> <span class="token function">fdisk</span> -l<span aria-hidden="true" class="line-numbers-rows"><span></span></span></code></pre><p>找到对应的磁盘名称，一般是/dev/sda、/dev/sdb等，可根据容量判别</p><pre class="line-numbers language-shell" data-language="shell"><code class="language-shell">Disk /dev/sda: <span class="token number">1.8</span> TiB, <span class="token number">2000398931968</span> bytes, <span class="token number">3907029164</span> sectorsDisk model: EXTERNAL_USB    Units: sectors of <span class="token number">1</span> * <span class="token number">512</span> <span class="token operator">=</span> <span class="token number">512</span> bytesSector size <span class="token punctuation">(</span>logical/physical<span class="token punctuation">)</span>: <span class="token number">512</span> bytes / <span class="token number">512</span> bytesI/O size <span class="token punctuation">(</span>minimum/optimal<span class="token punctuation">)</span>: <span class="token number">512</span> bytes / <span class="token number">512</span> bytesDisklabel type: dosDisk identifier: 0x3fe8e79c<span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre><h4 id="磁盘格式化"><a href="#磁盘格式化" class="headerlink" title="磁盘格式化"></a>磁盘格式化</h4><p>磁盘被使用前需要格式化，假设磁盘的名称是/dev/sda，则磁盘格式化命令为：</p><pre class="line-numbers language-shell" data-language="shell"><code class="language-shell"><span class="token function">sudo</span> <span class="token function">fdisk</span> /dev/sda<span aria-hidden="true" class="line-numbers-rows"><span></span></span></code></pre><p>然后进入格式化命令行，分别执行输入n、w，其他的默认即可，如下：</p><pre class="line-numbers language-shell" data-language="shell"><code class="language-shell">Command<span class="token punctuation">(</span>m <span class="token keyword">for</span> <span class="token builtin class-name">help</span><span class="token punctuation">)</span>: nCommand action  e   extended  p   primary partition <span class="token punctuation">(</span><span class="token number">1</span>-4<span class="token punctuation">)</span>      ---指定分区类型  e为扩展分区  p为主分区p （输入p选择创建主分区）Partition number <span class="token punctuation">(</span><span class="token number">1</span>-4<span class="token punctuation">)</span>: <span class="token number">1</span> （创建第一个主分区，也即是后来的sda1） ---主分区最多只能有四个First cylinder <span class="token punctuation">(</span><span class="token number">1</span>-2610, default <span class="token number">1</span><span class="token punctuation">)</span>: <span class="token number">1</span>   ---设定起始分区的位置Last cylinder or +size or +sizeM or +sizeK<span class="token punctuation">(</span><span class="token number">1</span>-2610, default <span class="token number">2610</span><span class="token punctuation">)</span>:2610Using default value <span class="token number">2610</span>            ---设定结束分区的位置Command <span class="token punctuation">(</span>m <span class="token keyword">for</span> <span class="token builtin class-name">help</span><span class="token punctuation">)</span>: w             ---保存刚才的配置信息。The partition table has been altered<span class="token operator">!</span>Calling ioctl<span class="token punctuation">(</span><span class="token punctuation">)</span> to re-read partition table.Syncing disks.<span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre><p>通过以上的命令设置成功后，现在已经创建出了一个主分区，再次通过sudo fdisk -l查看是否存在名称为/dev/sda1的分区，当然如果磁盘的名称是sdb，那么名称应该是/dev/sdb1</p><pre class="line-numbers language-shell" data-language="shell"><code class="language-shell">Device     Boot Start        End    Sectors  Size Id Type/dev/sda1        <span class="token number">2048</span> <span class="token number">3907029163</span> <span class="token number">3907027116</span>  <span class="token number">1</span>.8T <span class="token number">83</span> Linux<span aria-hidden="true" class="line-numbers-rows"><span></span><span></span></span></code></pre><p>可以看到/dev/sda1是一个2TB的分区，接下来再对磁盘进行格式化的操作。</p><p>使用mkfs命令格式化/dev/sda1分区（根据自己的情况，可能你的板子不是sda1的名字哦）</p><pre class="line-numbers language-shell" data-language="shell"><code class="language-shell"><span class="token function">sudo</span> mkfs.ext4 /dev/sda1<span aria-hidden="true" class="line-numbers-rows"><span></span></span></code></pre><p>注意这里面ext4是Linux下的磁盘文件类型，支持的很好，<strong>千万不要用NTFS之类的格式，不然发挥不了USB3.0的性能，测试的读写速度也是跑不满的</strong>。</p><h4 id="磁盘手动挂载"><a href="#磁盘手动挂载" class="headerlink" title="磁盘手动挂载"></a>磁盘手动挂载</h4><pre class="line-numbers language-shell" data-language="shell"><code class="language-shell"><span class="token function">mount</span> /dev/sda1 /mnt<span aria-hidden="true" class="line-numbers-rows"><span></span></span></code></pre><p>以上的命令是把/dev/sda1这个磁盘挂载到了/mnt的目录下，以后读写mnt目录就相当于对/dev/sda1这个分区磁盘做读写了。</p><h4 id="磁盘自动挂载"><a href="#磁盘自动挂载" class="headerlink" title="磁盘自动挂载"></a>磁盘自动挂载</h4><p>系统系统启动时候能够自动挂载，可以打开/etc/fstab文件</p><pre class="line-numbers language-shell" data-language="shell"><code class="language-shell"><span class="token function">sudo</span> <span class="token function">nano</span> /etc/fstab<span aria-hidden="true" class="line-numbers-rows"><span></span></span></code></pre><p>在最后一行写入如下的内容，<strong>一定要注意配置这个文件，编写错误会造成无法开机</strong></p><pre class="line-numbers language-shell" data-language="shell"><code class="language-shell">/dev/sda1       /mnt            ext4    defaults,noatime,nodiratime     <span class="token number">0</span>       <span class="token number">0</span><span aria-hidden="true" class="line-numbers-rows"><span></span></span></code></pre><p>然后按ctrl+o进行保存，ctrl+x退出，sudo reboot后重新启动后输入df命令查看是否能看sda1对应到mnt的挂载目录，如果能看到，表示系统已经能够自启动挂载磁盘了。</p><pre class="line-numbers language-none"><code class="language-none">Filesystem      1K-blocks     Used  Available Use% Mounted on&#x2F;dev&#x2F;root        14989012  7355960    6928572  52% &#x2F;&#x2F;dev&#x2F;sda1      1921802516 15000880 1809109576   1% &#x2F;mnttmpfs              191132        0     191132   0% &#x2F;run&#x2F;user&#x2F;1000<span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span></span></code></pre><h3 id="samba服务"><a href="#samba服务" class="headerlink" title="samba服务"></a>samba服务</h3><h4 id="samba服务下载"><a href="#samba服务下载" class="headerlink" title="samba服务下载"></a>samba服务下载</h4><p>安装samba前，需要更新一下软件包的源，命令如下：</p><pre class="line-numbers language-none"><code class="language-none">sudo apt-get update<span aria-hidden="true" class="line-numbers-rows"><span></span></span></code></pre><p>安装</p><pre class="line-numbers language-shell" data-language="shell"><code class="language-shell"><span class="token function">sudo</span> <span class="token function">apt-get</span> <span class="token function">install</span> samba samba-common-bin<span aria-hidden="true" class="line-numbers-rows"><span></span></span></code></pre><h4 id="samba服务配置与自启动"><a href="#samba服务配置与自启动" class="headerlink" title="samba服务配置与自启动"></a>samba服务配置与自启动</h4><p>修改共享配置文件</p><pre class="line-numbers language-shell" data-language="shell"><code class="language-shell"><span class="token function">sudo</span> <span class="token function">nano</span> /etc/samba/smb.conf<span aria-hidden="true" class="line-numbers-rows"><span></span></span></code></pre><p>在smb.conf文件末尾增加以下内容，path代表共享的目录，valid users代表允许的用户，browseable代表可浏览。</p><pre class="line-numbers language-none"><code class="language-none">[box]   path&#x3D;&#x2F;mnt&#x2F;   valid users&#x3D;pi   write list&#x3D;pi   browseable&#x3D;yes   create mask&#x3D;0777   public&#x3D;no   guest ok &#x3D; no<span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre><p>由于samba服务使用的账号密码和系统的不一致，因此需要配置samba的用户密码，如下：</p><pre class="line-numbers language-shell" data-language="shell"><code class="language-shell"><span class="token function">sudo</span> smbpasswd -a pi<span aria-hidden="true" class="line-numbers-rows"><span></span></span></code></pre><p>使能pi用户</p><pre class="line-numbers language-shell" data-language="shell"><code class="language-shell"><span class="token function">sudo</span> smbpasswd -e pi<span aria-hidden="true" class="line-numbers-rows"><span></span></span></code></pre><p>启动或重启samba服务</p><pre class="line-numbers language-shell" data-language="shell"><code class="language-shell">systemctl restart smbd<span aria-hidden="true" class="line-numbers-rows"><span></span></span></code></pre><p>需要自启动，可以使用systemctl命令：</p><pre class="line-numbers language-shell" data-language="shell"><code class="language-shell">systemctl <span class="token builtin class-name">enable</span> smbd<span aria-hidden="true" class="line-numbers-rows"><span></span></span></code></pre><h4 id="samba远程挂载"><a href="#samba远程挂载" class="headerlink" title="samba远程挂载"></a>samba远程挂载</h4><p>windows可以打开文件资源管理器窗口，找到映射网络驱动器，如下图：</p><p><img src="https://cdn.jsdelivr.net/gh/aibittek/ImageHost/img/image-20210218223155457.png" alt="windows samba磁盘映射"></p><p>输入samba用户pi的账号密码即可访问到树莓派4b中的/mnt目录内容了，<strong>可以像本地磁盘一样进行文件的读写了</strong></p><h4 id="磁盘读写性能测试"><a href="#磁盘读写性能测试" class="headerlink" title="磁盘读写性能测试"></a>磁盘读写性能测试</h4><p>本地磁盘速度测试</p><p>写入测试，结果为<strong>128MB/s，满足千兆写入要求</strong></p><pre class="line-numbers language-shell" data-language="shell"><code class="language-shell">pi@raspberrypi:~ $ <span class="token function">sudo</span> <span class="token function">dd</span> <span class="token assign-left variable">if</span><span class="token operator">=</span>/dev/sda1 <span class="token assign-left variable">of</span><span class="token operator">=</span>/dev/null <span class="token assign-left variable">bs</span><span class="token operator">=</span>8k <span class="token assign-left variable">count</span><span class="token operator">=</span><span class="token number">200000</span><span class="token number">200000</span>+0 records <span class="token keyword">in</span><span class="token number">200000</span>+0 records out<span class="token number">1638400000</span> bytes <span class="token punctuation">(</span><span class="token number">1.6</span> GB, <span class="token number">1.5</span> GiB<span class="token punctuation">)</span> copied, <span class="token number">13.2203</span> s, <span class="token number">128</span> MB/s<span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span></span></code></pre><p>读取测试，结果为<strong>123MB/s，也基本满足千兆读取要求</strong></p><pre class="line-numbers language-shell" data-language="shell"><code class="language-shell">pi@raspberrypi:~ $ <span class="token function">sudo</span> <span class="token function">dd</span> <span class="token assign-left variable">if</span><span class="token operator">=</span>/dev/sda1 <span class="token assign-left variable">of</span><span class="token operator">=</span>/dev/null <span class="token assign-left variable">bs</span><span class="token operator">=</span>8k <span class="token assign-left variable">count</span><span class="token operator">=</span><span class="token number">200000</span><span class="token number">200000</span>+0 records <span class="token keyword">in</span><span class="token number">200000</span>+0 records out<span class="token number">1638400000</span> bytes <span class="token punctuation">(</span><span class="token number">1.6</span> GB, <span class="token number">1.5</span> GiB<span class="token punctuation">)</span> copied, <span class="token number">13.2891</span> s, <span class="token number">123</span> MB/s<span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span></span></code></pre><p>samba远程读写速度测试，找了一个2GB大小的单文件测试。</p><p>写入速度</p><p><img src="https://cdn.jsdelivr.net/gh/aibittek/ImageHost/img/image-20210218224939184.png" alt="image-20210218224939184"></p><p>读取速度</p><p><img src="https://cdn.jsdelivr.net/gh/aibittek/ImageHost/img/image-20210218225025491.png" alt="image-20210218225025491"></p><p>可以看到，基本上本地的网盘基本上已经满足千兆的读写要求啦，开心😊</p><p><strong>注意速度达不到要求的，要保证磁盘的文件类型不能为NTFS的，要格式化为ext4的，另外要使用千兆的路由器和网线。</strong></p><h3 id="耗电量检测"><a href="#耗电量检测" class="headerlink" title="耗电量检测"></a>耗电量检测</h3><p>待机功耗（非传输数据，磁盘休眠）</p><p><strong>按照1度电6毛线来算大概是一年15元钱</strong></p><p><img src="https://cdn.jsdelivr.net/gh/aibittek/ImageHost/img/image-20210218231447163.png" alt="磁盘休眠时的功耗"></p><p>传输功耗（满负荷传输数据）</p><p><strong>按照1度电6毛线来算大概是一年30元钱</strong></p><p><img src="https://cdn.jsdelivr.net/gh/aibittek/ImageHost/img/image-20210218230753508.png" alt="满负荷磁盘数据传输时的功耗"></p><p><strong>这个功耗不算开始的硬件投入，这些电费损耗可以忽略不计的话，做到这一步已经相当于有一个免费的本地网盘啦</strong>😊</p><h2 id="做一个完整的百度VIP网盘"><a href="#做一个完整的百度VIP网盘" class="headerlink" title="做一个完整的百度VIP网盘"></a>做一个完整的百度VIP网盘</h2><h3 id="网盘软件选择"><a href="#网盘软件选择" class="headerlink" title="网盘软件选择"></a>网盘软件选择</h3><p>目前开源的免费网盘应用很多，比如Seafile、Nextcloud、Cloudreve等等。为了简便，这里选择的是国内开源的，基于ThinkPHP开发的Cloudreve。</p><p>选择Cloudreve的原因是:</p><p>部署方便：单文件即可运行，没有其他依赖；</p><p>配置灵活：可选的Sqlite和Mysql支持；</p><p>使用方便：提供网页版操作界面，不会存在Nextcloud多终端App的适配问题；</p><p><a href="https://cloudreve.org/" rel="external nofollow noreferrer">功能丰富</a>：支持文件及批量上传、可分享、可在线预览、支持七牛/又拍云/阿里OSS等的云存储、WebDAV网盘映射等丰富的功能；</p><h3 id="网盘软件安装使用"><a href="#网盘软件安装使用" class="headerlink" title="网盘软件安装使用"></a>网盘软件安装使用</h3><p>安装非常简单，下载后直接运行即可。</p><p>下载地址：打开<a href="https://cloudreve.org/%EF%BC%8C%E7%82%B9%E5%87%BB%E4%B8%8B%E8%BD%BD%E5%8D%B3%E5%8F%AF%EF%BC%8C%E6%B3%A8%E6%84%8F%E5%92%B1%E4%BB%AC%E7%9A%84%E7%B3%BB%E7%BB%9F%E6%98%AFarm32%E7%9A%84%EF%BC%8C%E6%89%80%E4%BB%A5%E4%B8%8B%E8%BD%BD%E5%A6%82%E4%B8%8B%E7%9A%84arm" rel="external nofollow noreferrer">https://cloudreve.org/，点击下载即可，注意咱们的系统是arm32的，所以下载如下的arm</a> 32位的版本：</p><p><img src="https://cdn.jsdelivr.net/gh/aibittek/ImageHost/img/image-20210219111752145.png" alt="下载ARM32位版本的Cloudreve"></p><p>进入目录后，直接在命令行运行即可：</p><pre class="line-numbers language-shell" data-language="shell"><code class="language-shell">./cloudreve<span aria-hidden="true" class="line-numbers-rows"><span></span></span></code></pre><p>显示信息如下，</p><pre class="line-numbers language-shell" data-language="shell"><code class="language-shell">   V3.2.1  Commit <span class="token comment">#3b22b4f  Pro=false</span><span class="token operator">==</span><span class="token operator">==</span><span class="token operator">==</span><span class="token operator">==</span><span class="token operator">==</span><span class="token operator">==</span><span class="token operator">==</span><span class="token operator">==</span><span class="token operator">==</span><span class="token operator">==</span><span class="token operator">==</span><span class="token operator">==</span><span class="token operator">==</span><span class="token operator">==</span><span class="token operator">==</span><span class="token operator">==</span><span class="token operator">==</span><span class="token operator">==</span><span class="token operator">==</span><span class="token operator">==</span><span class="token operator">==</span><span class="token operator">==</span><span class="token operator">==</span><span class="token operator">==</span><span class="token punctuation">[</span>Info<span class="token punctuation">]</span>    <span class="token number">2021</span>-02-19 03:21:39 初始化数据库连接<span class="token punctuation">[</span>Info<span class="token punctuation">]</span>    <span class="token number">2021</span>-02-19 03:21:39 数据库版本匹配，跳过数据库迁移<span class="token punctuation">[</span>Info<span class="token punctuation">]</span>    <span class="token number">2021</span>-02-19 03:21:39 初始化任务队列，WorkerNum <span class="token operator">=</span> <span class="token number">10</span><span class="token punctuation">[</span>Info<span class="token punctuation">]</span>    <span class="token number">2021</span>-02-19 03:21:39 初始化定时任务<span class="token punctuation">..</span>.<span class="token punctuation">[</span>Info<span class="token punctuation">]</span>    <span class="token number">2021</span>-02-19 03:21:39 当前运行模式：Master<span class="token punctuation">[</span>Info<span class="token punctuation">]</span>    <span class="token number">2021</span>-02-19 03:21:39 开始监听 :5212<span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre><p>打开浏览器输入树莓派的IP地址:5212即可访问你的网盘啦（注意第一次登录在终端会提供系统账号和密码，以后运行不再提供，需要记一下哦）</p><p>登录之后显示内容如下，可上传下载、分享、在线预览等网盘的一些VIP功能啦</p><p><img src="https://cdn.jsdelivr.net/gh/aibittek/ImageHost/img/image-20210219112838397.png" alt="一个基本的VIP网盘诞生啦"></p><h3 id="服务自启动配置"><a href="#服务自启动配置" class="headerlink" title="服务自启动配置"></a>服务自启动配置</h3><p>打开自启动配置文件：</p><pre class="line-numbers language-shell" data-language="shell"><code class="language-shell"><span class="token function">sudo</span> <span class="token function">nano</span> /usr/lib/systemd/system/cloudreve.service<span aria-hidden="true" class="line-numbers-rows"><span></span></span></code></pre><p>输入以下内容，注意其中WorkingDirectory要改为你的cloudreve执行程序的绝对路径，ExecStart改为cloudreve的绝对执行路径名称，然后ctrl+o保存，再ctrl+x退出即可。</p><pre class="line-numbers language-none"><code class="language-none">[Unit]    Description&#x3D;Cloudreve    Documentation&#x3D; &#x3D;[查看链接](https:&#x2F;&#x2F;docs.cloudreve.org&#x2F;)    After&#x3D;network.target    Wants&#x3D;network.target[Service]    WorkingDirectory&#x3D;&#x2F;mnt&#x2F;Cloudreve    ExecStart&#x3D;&#x2F;mnt&#x2F;Cloudreve&#x2F;cloudreve    Restart&#x3D;on-abnormal    RestartSec&#x3D;5s    KillMode&#x3D;mixed    StandardOutput&#x3D;null    StandardError&#x3D;syslog[Install]    WantedBy&#x3D;multi-user.target<span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre><h3 id="服务自启动"><a href="#服务自启动" class="headerlink" title="服务自启动"></a>服务自启动</h3><p>更新自启动配置</p><pre class="line-numbers language-shell" data-language="shell"><code class="language-shell">systemctl daemon-reload<span aria-hidden="true" class="line-numbers-rows"><span></span></span></code></pre><p>启动服务</p><pre class="line-numbers language-shell" data-language="shell"><code class="language-shell">systemctl start cloudreve<span aria-hidden="true" class="line-numbers-rows"><span></span></span></code></pre><p>开机自启动</p><pre class="line-numbers language-shell" data-language="shell"><code class="language-shell">systemctl <span class="token builtin class-name">enable</span> cloudreve<span aria-hidden="true" class="line-numbers-rows"><span></span></span></code></pre><p>平时也可以通过以下命令来管理cloudreve网盘服务：</p><pre class="line-numbers language-shell" data-language="shell"><code class="language-shell"><span class="token comment"># 启动服务</span>systemctl start cloudreve<span class="token comment"># 停止服务</span>systemctl stop cloudreve<span class="token comment"># 重启服务</span>systemctl restart cloudreve<span class="token comment"># 查看状态，有启动的问题等也可以通过这里查看到</span>systemctl status cloudreve<span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre><h3 id="网站优化"><a href="#网站优化" class="headerlink" title="网站优化"></a>网站优化</h3><p>点击右上角的头像，在弹出的菜单中选择管理面板</p><p><img src="https://cdn.jsdelivr.net/gh/aibittek/ImageHost/img/image-20210219114502409.png" alt="网盘管理面板如何进入"></p><p>进入后，右侧有相关的设置选项，请根据自己的需求进行设置哦，也可以登录Github查看他们的<a href="https://github.com/cloudreve/Cloudreve" rel="external nofollow noreferrer">使用文档</a>，注意其中的站点URL在确定外网访问地址后，要修改一下，否则分享出去的地址别人访问不了哦。</p><p><img src="https://cdn.jsdelivr.net/gh/aibittek/ImageHost/img/image-20210219114808546.png" alt="VIP网盘后台管理页面"></p><h3 id="支持外网访问"><a href="#支持外网访问" class="headerlink" title="支持外网访问"></a>支持外网访问</h3><p>到达这里，我们已经有一个局域网的VIP网盘啦😄。</p><p>如果希望通过外网域名访问自己的网盘，就需要满足<strong>以下3点基本条件</strong>：</p><p><strong>注册一个自己的域名</strong>：通过自己的域名访问你家里的网盘</p><p><strong>使用DDNS动态解析</strong>：由于IPv4地址紧缺，电信移动给咱们的出口IP地址都是动态更新的，需要能把动态改变的IP映射到自己的域名上，这样访问自己的域名就能通过动态解析的IP找到家里的IP啦</p><p><strong>家里的网需要是公网IP</strong>（查看路由器上的外网IP是否为公网的，不是的话可以打电话给电信或者移动，让他们把你家的IP地址改成公网的）</p><h4 id="域名注册"><a href="#域名注册" class="headerlink" title="域名注册"></a>域名注册</h4><p>推荐使用<a href="https://www.dnspod.cn/" rel="external nofollow noreferrer">DNSPOD</a>的注册，他家提供免费的DDNS服务，可以找一个便宜点的域名，差不多20多块钱就能搞定</p><h4 id="DDNS动态解析"><a href="#DDNS动态解析" class="headerlink" title="DDNS动态解析"></a>DDNS动态解析</h4><p>登录dnspod控制台<a href="https://console.dnspod.cn/dns/list%EF%BC%8C%E5%88%9B%E5%BB%BA%E4%B8%80%E6%9D%A1A%E8%AE%B0%E5%BD%95%EF%BC%8C%E4%B8%BB%E6%9C%BA%E8%AE%B0%E5%BD%95%E5%A1%AB%E5%86%99%E4%BA%8C%E7%BA%A7%E5%9F%9F%E5%90%8D%E7%9A%84%E5%90%8D%E7%A7%B0%EF%BC%8C%E6%88%91%E8%BF%99%E9%87%8C%E6%98%AFbox%EF%BC%8C%E8%AE%B0%E5%BD%95%E5%80%BC%E5%A1%AB%E5%86%99%E7%9A%84%E6%98%AFIP%EF%BC%8C%E4%BD%86%E8%BF%99%E4%B8%AA%E6%98%AF%E5%90%8E%E9%9D%A2%E8%A6%81%E8%87%AA%E5%8A%A8%E7%94%9F%E6%88%90%E7%9A%84%E5%AE%B6%E9%87%8C%E7%9A%84IP%E5%9C%B0%E5%9D%80%EF%BC%8C%E8%BF%99%E9%87%8C%E5%85%88%E9%9A%8F%E4%BE%BF%E5%A1%AB%E5%86%99%E5%8D%B3%E5%8F%AF%E3%80%82" rel="external nofollow noreferrer">https://console.dnspod.cn/dns/list，创建一条A记录，主机记录填写二级域名的名称，我这里是box，记录值填写的是IP，但这个是后面要自动生成的家里的IP地址，这里先随便填写即可。</a></p><p><img src="https://cdn.jsdelivr.net/gh/aibittek/ImageHost/img/image-20210219220321102.png" alt="动态域名"></p><p>在<a href="https://console.dnspod.cn/account/token%E9%A1%B5%E9%9D%A2%E5%88%9B%E5%BB%BA%E4%B8%80%E4%B8%AA%E5%AF%86%E9%92%A5%EF%BC%8C%E6%B3%A8%E6%84%8F%E4%B8%80%E5%AE%9A%E8%A6%81%E8%AE%B0%E4%BD%8F%E6%8F%90%E4%BE%9B%E7%9A%84Token%EF%BC%8C%E5%8F%AA%E4%BC%9A%E6%98%BE%E7%A4%BA%E4%B8%80%E6%AC%A1%EF%BC%8C%E5%90%8E%E9%9D%A2%E6%9C%89%E7%94%A8%E3%80%82" rel="external nofollow noreferrer">https://console.dnspod.cn/account/token页面创建一个密钥，注意一定要记住提供的Token，只会显示一次，后面有用。</a></p><p><img src="https://cdn.jsdelivr.net/gh/aibittek/ImageHost/img/image-20210219220606791.png" alt="ddns密钥"></p><p>在树莓派上下载动态更新脚本</p><pre class="line-numbers language-shell" data-language="shell"><code class="language-shell"><span class="token function">git</span> clone https://github.com/imki911/ArDNSPod.git<span aria-hidden="true" class="line-numbers-rows"><span></span></span></code></pre><p>讲DNSPOD上得到的ID和Token填写在dns.conf文件的arToken中，arDdnsCheck后面改成在DNSPAD上填写的一级和二级域名</p><p><img src="https://cdn.jsdelivr.net/gh/aibittek/ImageHost/img/image-20210219221026595.png" alt="ddns配置文件"></p><p>在当前目录下创建一个守护程序ddns_daemon.sh，内容如下：</p><pre class="line-numbers language-shell" data-language="shell"><code class="language-shell"><span class="token shebang important">#!/bin/sh</span><span class="token keyword">while</span> <span class="token punctuation">[</span> <span class="token number">1</span> <span class="token punctuation">]</span><span class="token keyword">do</span><span class="token function">sh</span> /mnt/DDNS/ArDNSPod/ddnspod.sh <span class="token operator">></span>/dev/null <span class="token operator"><span class="token file-descriptor important">2</span>></span><span class="token file-descriptor important">&amp;1</span><span class="token function">sleep</span> <span class="token number">600</span><span class="token keyword">done</span><span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre><p>注意，第5行sh后面的脚本路径需要按照自己的绝对路径修改，目的是执行到ddnspod.sh这个脚本即可。另外保存后执行chmod +x ddns_daemon.sh，使得这个文件有被执行的权限。</p><p>增加系统自启动，打开/etc/rc.local，在exit 0之前增加一行：</p><pre class="line-numbers language-shell" data-language="shell"><code class="language-shell">/mnt/DDNS/ArDNSPod/ddns_daemon.sh <span class="token operator">&amp;</span><span aria-hidden="true" class="line-numbers-rows"><span></span></span></code></pre><p>注意，ddns_daemon.sh也需要更改为你自己的绝对路径。</p><p>大功告成，可以手动执行ddns_daemon.sh，观察DNSPOD的A记录值是否发生变化，并且是你家里的出口IP，是的话，DDNS解析就可以啦，可以通过你的<strong>二级域名:5212</strong>这个网址来访问你的VIP网盘啦，如果能够显示cloudreve登录界面，<strong>恭喜你的网盘支持外网访问啦。</strong></p><h4 id="支持安全访问"><a href="#支持安全访问" class="headerlink" title="支持安全访问"></a>支持安全访问</h4><p>目前已经完成了公网访问网盘了，但是默认是HTTP访问的，这里我们希望访问通过HTTPS加密方式，因此需要HTTP访问时也跳转到HTTPS，因此目前需要解决两个问题：一是HTTPS访问支持，一是HTTP访问时跳转到HTTPS访问。</p><p>这里使用简单的方式，使用Nginx反向代理来做，先下载Nginx</p><p>安装Nginx</p><pre class="line-numbers language-shell" data-language="shell"><code class="language-shell"><span class="token function">sudo</span> <span class="token function">apt-get</span> <span class="token function">install</span> nginx<span aria-hidden="true" class="line-numbers-rows"><span></span></span></code></pre><p>启动Nginx</p><pre class="line-numbers language-shell" data-language="shell"><code class="language-shell"><span class="token function">sudo</span> /etc/init.d/nginx start<span aria-hidden="true" class="line-numbers-rows"><span></span></span></code></pre><p>可以在内网浏览器访问树莓派的IP地址，查看Nginx是否安装成功，成功之后会显示一个Nginx的网页，否则无法展示网页信息。</p><p>修改Nginx配置文件，sudo nano /etc/nginx/conf.d/aibittek.com.conf</p><pre class="line-numbers language-none"><code class="language-none">server &#123;        listen 8000 ssl;        server_name box.aibittek.com;        error_page 497 301 https:&#x2F;&#x2F;$server_name:8000$request_uri;        ssl_certificate  &#x2F;mnt&#x2F;crt&#x2F;box.aibittek.com.crt;        ssl_certificate_key &#x2F;mnt&#x2F;crt&#x2F;box.aibittek.com.key;        ssl_session_timeout 5m;        ssl_ciphers ECDHE-RSA-AES128-GCM-SHA256:ECDHE:ECDH:AES:HIGH:!NULL:!aNULL:!MD5:!ADH:!RC4;        ssl_protocols TLSv1 TLSv1.1 TLSv1.2;        ssl_prefer_server_ciphers on;        location &#x2F; &#123;                proxy_buffer_size  128k;                proxy_buffers   32 32k;                proxy_busy_buffers_size 128k;                proxy_pass http:&#x2F;&#x2F;127.0.0.1:5212;                client_max_body_size 0;        &#125;&#125;<span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre><p>对以上的配置文件内容说明如下：</p><p>listen 8000 ssl：表示监听8000端口，为什么不是默认的80或HTTPS的443？这个要问电信了，已经把入口的80和443端口给封了，否则你都没备案就可以自己在家造网页服务了，那不乱了套啦。所以访问我的网盘也变成了box.aibittek.com:8000才可以了，哎没办法，必须显性加端口号才能访问了；</p><p>server_name：是代理的域名；</p><p>error_page：是一种方法，使得原来http访问的强制使用后面的https方式访问；</p><p>ssl_certificate和ssl_certificate_key是https访问证书信息，进入<a href="https://console.dnspod.cn/dns/list%E7%BD%91%E5%9D%80%EF%BC%8C%E6%89%BE%E5%88%B0DDNS%E7%9A%84%E8%BF%99%E6%9D%A1%E8%AE%B0%E5%BD%95%E7%9A%84SSL%EF%BC%8C%E8%BF%9B%E8%A1%8C%E5%85%8D%E8%B4%B9%E4%B8%80%E5%B9%B4%E7%9A%84%E7%94%B3%E8%AF%B7%EF%BC%8C%E7%94%B3%E8%AF%B7%E9%80%9A%E8%BF%87%E5%90%8E%EF%BC%8C%E7%82%B9%E5%87%BB%E4%B8%8B%E8%BD%BD%E5%B0%B1%E5%BE%97%E5%88%B0%E4%BA%86%E8%BF%99%E4%B8%A4%E4%B8%AA%E6%96%87%E4%BB%B6%E3%80%82![image-20210219223312858](https://cdn.jsdelivr.net/gh/aibittek/ImageHost/img/image-20210219223312858.png)" rel="external nofollow noreferrer">https://console.dnspod.cn/dns/list网址，找到DDNS的这条记录的SSL，进行免费一年的申请，申请通过后，点击下载就得到了这两个文件。![image-20210219223312858](https://cdn.jsdelivr.net/gh/aibittek/ImageHost/img/image-20210219223312858.png)</a></p><p>proxy_pass是代理到的IP和端口，这里的<a href="http://127.0.0.1:5212是cloudreve；" rel="external nofollow noreferrer">http://127.0.0.1:5212是cloudreve；</a></p><p>client_max_body_size是缓存大小，如果设置的太小，使用cloudreve下载上传数据时，会卡住；</p><p>设置Nginx跟随系统自启动</p><pre class="line-numbers language-shell" data-language="shell"><code class="language-shell">systemctl <span class="token builtin class-name">enable</span> nginx<span aria-hidden="true" class="line-numbers-rows"><span></span></span></code></pre><p>好啦，一切都大功告成了，验证一下是不是每次重启系统树莓派之后，浏览器输入自己定义的域名，都能访问到网盘页面了呢，并且都是使用HTTPS访问了呢？</p><h2 id="给网盘插上翱翔的翅膀"><a href="#给网盘插上翱翔的翅膀" class="headerlink" title="给网盘插上翱翔的翅膀"></a>给网盘插上翱翔的翅膀</h2><p>以上已经完成了VIP网盘的全部内容，如果还想科学上网并离线下载，可以参考本章节的aria2离线下载和shadowsocksR的科学上网</p><h3 id="aria2离线下载"><a href="#aria2离线下载" class="headerlink" title="aria2离线下载"></a>aria2离线下载</h3><p>aria2是一个下载神器，超越迅雷，只要资源好，BT磁力链下载速度贼快，下面我们来安装使用下。</p><h4 id="aria2安装"><a href="#aria2安装" class="headerlink" title="aria2安装"></a>aria2安装</h4><p>专业人干专业事，已经有小伙伴做了一个一键安装和配置的<a href="https://github.com/P3TERX/aria2.sh" rel="external nofollow noreferrer">脚本</a>，安装方法如下：</p><ul><li><p>下载基础组件</p>  <pre class="line-numbers language-shell" data-language="shell"><code class="language-shell"><span class="token function">sudo</span> <span class="token function">apt</span> <span class="token function">install</span> <span class="token function">wget</span> <span class="token function">curl</span> ca-certificates<span aria-hidden="true" class="line-numbers-rows"><span></span></span></code></pre></li><li><p>下载脚本</p>  <pre class="line-numbers language-shell" data-language="shell"><code class="language-shell"><span class="token function">wget</span> -N git.io/aria2.sh <span class="token operator">&amp;&amp;</span> <span class="token function">chmod</span> +x aria2.sh<span aria-hidden="true" class="line-numbers-rows"><span></span></span></code></pre></li><li><p>运行脚本</p>  <pre class="line-numbers language-shell" data-language="shell"><code class="language-shell"><span class="token function">sudo</span> ./aria2.sh<span aria-hidden="true" class="line-numbers-rows"><span></span></span></code></pre></li><li><p>选择你要执行的选项</p>  <pre class="line-numbers language-shell" data-language="shell"><code class="language-shell">Aria2 一键安装管理脚本 增强版 <span class="token punctuation">[</span>v2.7.4<span class="token punctuation">]</span> by P3TERX.COM   <span class="token number">0</span>. 升级脚本 ———————————————————————  <span class="token number">1</span>. 安装 Aria2  <span class="token number">2</span>. 更新 Aria2  <span class="token number">3</span>. 卸载 Aria2 ———————————————————————  <span class="token number">4</span>. 启动 Aria2  <span class="token number">5</span>. 停止 Aria2  <span class="token number">6</span>. 重启 Aria2 ———————————————————————  <span class="token number">7</span>. 修改 配置  <span class="token number">8</span>. 查看 配置  <span class="token number">9</span>. 查看 日志 <span class="token number">10</span>. 清空 日志 ——————————————————————— <span class="token number">11</span>. 手动更新 BT-Tracker <span class="token number">12</span>. 自动更新 BT-Tracker ——————————————————————— Aria2 状态: 未安装 <span class="token operator">|</span> 未启动 自动更新 BT-Tracker: 未开启 请输入数字 <span class="token punctuation">[</span><span class="token number">0</span>-12<span class="token punctuation">]</span>:<span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre><p>  输入1回车，等待安装完毕即可，成功之后的界面如下：</p><p>  <img src="https://cdn.jsdelivr.net/gh/aibittek/ImageHost/img/image-20210220140544763.png" alt="image-20210220140544763"></p></li></ul><p>打开AriaNG链接地址，测试下磁力链的下载速度：</p><p><img src="https://cdn.jsdelivr.net/gh/aibittek/ImageHost/img/image-20210220140804414.png" alt="AriaNG的下载速度"></p><h4 id="cloudreve配置验证"><a href="#cloudreve配置验证" class="headerlink" title="cloudreve配置验证"></a>cloudreve配置验证</h4><p>本章节可以参考<a href="https://docs.cloudreve.org/use/aria2" rel="external nofollow noreferrer">官方文档</a>进行配置，配置界面如下：</p><p><img src="https://cdn.jsdelivr.net/gh/aibittek/ImageHost/img/image-20210219184958247.png" alt="image-20210219184958247"></p><p>注意修改这里的RPC Secret为Aria2脚本启动时提供的RPC密钥。配置完成点击保存，然后点击<strong>测试连接</strong>，如果右上角显示绿色的aria2的版本号则说明配置成功啦😄。</p><p>进入到主页点击离线下载，支持HTTP(s)/FTP/磁力链的下载，下载速度大概能到20MB/s，相当可观。</p><p><img src="https://cdn.jsdelivr.net/gh/aibittek/ImageHost/img/image-20210220140933599.png" alt="image-20210220140933599"></p><h4 id="aria2自启动"><a href="#aria2自启动" class="headerlink" title="aria2自启动"></a>aria2自启动</h4><p>创建systemd文件:<code>sudo vim /lib/systemd/system/aria2.service</code>为如下:</p><pre class="line-numbers language-shell" data-language="shell"><code class="language-shell"><span class="token punctuation">[</span>Unit<span class="token punctuation">]</span><span class="token assign-left variable">Description</span><span class="token operator">=</span>Aria2c download manager<span class="token assign-left variable">After</span><span class="token operator">=</span>network.target<span class="token punctuation">[</span>Service<span class="token punctuation">]</span><span class="token assign-left variable">Type</span><span class="token operator">=</span>simple<span class="token assign-left variable">User</span><span class="token operator">=</span>rootExecStart/usr/local/bin/aria2c --conf-path<span class="token operator">=</span>/mnt/aria2/aria2.conf<span class="token punctuation">[</span>Install<span class="token punctuation">]</span><span class="token assign-left variable">WantedBy</span><span class="token operator">=</span>multi-user.target<span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre><p>启动:<code>sudo systemctl start aria2.service</code></p><p>可以设置开机启动:<code>sudo systemctl enable aria2.service</code>,如果要关闭开机启动:<code>sudo systemctl disable aria2.service</code></p><h3 id="shadowsocksR科学上网"><a href="#shadowsocksR科学上网" class="headerlink" title="shadowsocksR科学上网"></a>shadowsocksR科学上网</h3><p>在某些时候，可能需要科学上网，可以通过以下方式安装和使用。</p><h4 id="安装ssr-helper"><a href="#安装ssr-helper" class="headerlink" title="安装ssr-helper"></a>安装ssr-helper</h4><pre class="line-numbers language-shell" data-language="shell"><code class="language-shell"><span class="token function">npm</span> <span class="token function">install</span> -g ssr-helper<span aria-hidden="true" class="line-numbers-rows"><span></span></span></code></pre><h4 id="安装配置脚本"><a href="#安装配置脚本" class="headerlink" title="安装配置脚本"></a>安装配置脚本</h4><pre class="line-numbers language-shell" data-language="shell"><code class="language-shell"><span class="token function">git</span> clone -b manyuser https://github.com/shadowsocksr-backup/shadowsocksr.git<span aria-hidden="true" class="line-numbers-rows"><span></span></span></code></pre><p>配置以上工具的路径，假设以上的源代码被放在了/mnt/shadowsocksr，则：</p><pre class="line-numbers language-shell" data-language="shell"><code class="language-shell">ssr config /mnt/shadowsocksr<span aria-hidden="true" class="line-numbers-rows"><span></span></span></code></pre><p>使用ssr add命令添加服务器，根据自己SSR的情况一步步的填写即可。</p><p><img src="https://cdn.jsdelivr.net/gh/aibittek/ImageHost/img/image-20210219214212116.png" alt="SSR服务器信息"></p><h4 id="启动ssr服务器"><a href="#启动ssr服务器" class="headerlink" title="启动ssr服务器"></a>启动ssr服务器</h4><pre class="line-numbers language-shell" data-language="shell"><code class="language-shell">ssr start<span aria-hidden="true" class="line-numbers-rows"><span></span></span></code></pre><h4 id="设置开机自启动"><a href="#设置开机自启动" class="headerlink" title="设置开机自启动"></a>设置开机自启动</h4><pre class="line-numbers language-shell" data-language="shell"><code class="language-shell">ssr startup<span aria-hidden="true" class="line-numbers-rows"><span></span></span></code></pre><h4 id="SwitchyOmega配置浏览器科学上网"><a href="#SwitchyOmega配置浏览器科学上网" class="headerlink" title="SwitchyOmega配置浏览器科学上网"></a>SwitchyOmega配置浏览器科学上网</h4><p>默认已经有了两个示例，一个 proxy 代理服务器、一个 auto switch 自动切换模块式，可直接修改，也可以点 + 新建情景模式。</p><p>先建立一个代理服务器</p><table><thead><tr><th align="left">网址协议</th><th align="left">代理协议</th><th align="left">代理服务器</th><th align="left">代理端口</th></tr></thead><tbody><tr><td align="left">(默认)</td><td align="left">socks5</td><td align="left">127.0.0.1</td><td align="left">1080</td></tr></tbody></table><p>再建一个自动切换模式</p><p>切换规则</p><table><thead><tr><th align="left">排序</th><th align="left">条件类型</th><th align="left">条件设置</th><th align="left">情景模式</th></tr></thead><tbody><tr><td align="left"></td><td align="left">规则列表规则</td><td align="left">(按照规则列表匹配请求)</td><td align="left">(刚刚建的代理服务器)</td></tr><tr><td align="left"></td><td align="left">默认情景模式</td><td align="left"></td><td align="left">直接连接</td></tr></tbody></table><p>规则列表设置</p><p>规则列表格式 SwitchyAu­to­Proxy<br>        规则列表网址 <a href="https://raw.githubusercontent.com/gfwlist/gfwlist/master/gfwlist.txt" rel="external nofollow noreferrer">https://raw.githubusercontent.com/gfwlist/gfwlist/master/gfwlist.txt</a></p><h4 id="使用全局代理"><a href="#使用全局代理" class="headerlink" title="使用全局代理"></a>使用全局代理</h4><p>安装Privoxy</p><pre class="line-numbers language-shell" data-language="shell"><code class="language-shell"><span class="token function">sudo</span> <span class="token function">apt-get</span> <span class="token function">install</span> -y privoxy<span aria-hidden="true" class="line-numbers-rows"><span></span></span></code></pre><p>修改配置文件</p><pre class="line-numbers language-shell" data-language="shell"><code class="language-shell"><span class="token function">sudo</span> <span class="token function">vim</span> /etc/privoxy/config<span aria-hidden="true" class="line-numbers-rows"><span></span></span></code></pre><p>增加行</p><pre class="line-numbers language-shell" data-language="shell"><code class="language-shell">forward-socks5t   /               <span class="token number">127.0</span>.0.1:1080 <span class="token builtin class-name">.</span><span aria-hidden="true" class="line-numbers-rows"><span></span></span></code></pre><p>注意forward顶格写，1080后面又一个点。</p><p>启动服务</p><pre class="line-numbers language-shell" data-language="shell"><code class="language-shell">systemctl start privoxy<span aria-hidden="true" class="line-numbers-rows"><span></span></span></code></pre><p>修改环境变量</p><pre class="line-numbers language-shell" data-language="shell"><code class="language-shell"><span class="token builtin class-name">export</span> <span class="token assign-left variable">http_proxy</span><span class="token operator">=</span>http://127.0.0.1:8118<span class="token builtin class-name">export</span> <span class="token assign-left variable">https_proxy</span><span class="token operator">=</span>http://127.0.0.1:8118<span class="token builtin class-name">export</span> <span class="token assign-left variable">ftp_proxy</span><span class="token operator">=</span>http://127.0.0.1:8118<span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span></span></code></pre><p>也可以把以上的3行环境变量增加到~/.bashrc的文件末尾，然后使用source ~/.bashrc使之生效。</p><p>验证是否可以科学上网</p><pre class="line-numbers language-shell" data-language="shell"><code class="language-shell"><span class="token function">curl</span> www.google.com<span aria-hidden="true" class="line-numbers-rows"><span></span></span></code></pre><p>查看以上是否有输出内容即代表可以科学上网啦。</p>]]></content>
      
      
      <categories>
          
          <category> Earth </category>
          
      </categories>
      
      
        <tags>
            
            <tag> 百度网盘 </tag>
            
            <tag> 自建网盘 </tag>
            
            <tag> cloudreve </tag>
            
            <tag> NAS </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>1秒钟给小学生批改作业的人工智能小程序</title>
      <link href="2021/01/1-miao-zhong-gei-xiao-xue-sheng-pi-gai-zuo-ye-de-ren-gong-zhi-neng-xiao-cheng-xu/"/>
      <url>2021/01/1-miao-zhong-gei-xiao-xue-sheng-pi-gai-zuo-ye-de-ren-gong-zhi-neng-xiao-cheng-xu/</url>
      
        <content type="html"><![CDATA[<h2 id="题拍拍小程序简介"><a href="#题拍拍小程序简介" class="headerlink" title="题拍拍小程序简介"></a>题拍拍小程序简介</h2><h3 id="背景"><a href="#背景" class="headerlink" title="背景"></a>背景</h3><p>咱们的家长们都很关心小朋友们的健康成长，快乐学习。</p><p>学校也为了小朋友们的成长煞费苦心，也会精心安排一些练习和作业验证学生们的学习成果，甚至要求作业要日清，周清，月清。这里可能包含家庭作业、课堂作业、午间作业等等。</p><p><img src="https://cdn.jsdelivr.net/gh/aibittek/ImageHost/img/image-20210124201027759.png" alt="image-20210124201027759"></p><p>这些作业还不是一门，可能包含语文、数学、英语等等。这么多的作业对于很多家庭早已失去了主动学习、积极探索知识的本质，变成了一种<strong>负担</strong>。</p><p><strong>负担</strong>很容易变成一种应付，从而打击了学生最重要的一点：<strong>兴趣</strong></p><p>很多时候，作业的负担也承担在了家长的身上，想想自己繁重的工作还没有做完，房贷的压力、身体的透支、老人的照顾等等，小朋友们也失去了家长最重要的一点：<strong>关心</strong></p><h3 id="目标"><a href="#目标" class="headerlink" title="目标"></a>目标</h3><p>要想解决以上的问题是一个复杂的问题，我们可以通过很多工具和方法来减缓这种繁重的作业。</p><p>比如家长教孩子作业，本来期望是这样的：</p><p><img src="https://cdn.jsdelivr.net/gh/aibittek/ImageHost/img/image-20210122104843824.png" alt="image-20210122104843824"></p><p><img src="https://cdn.jsdelivr.net/gh/aibittek/ImageHost/img/image-20210122104915960.png" alt="image-20210122104915960"></p><p>而实际情况可能是这样的：</p><p><img src="https://cdn.jsdelivr.net/gh/aibittek/ImageHost/img/image-20210122104408686.png" alt="image-20210122104408686"></p><p><img src="https://cdn.jsdelivr.net/gh/aibittek/ImageHost/img/image-20210122104609303.png" alt="image-20210122104609303"></p><p>我们的理想可能是这样的：</p><p><img src="https://cdn.jsdelivr.net/gh/aibittek/ImageHost/img/image-20210122105017631.png"></p><p><strong>为了缓解学生作业的压力，我们把重点放在了通过人工智能来完成作业的自动批改上，把之前需要家长完成的作业批改，使用人工智能自动批改，家里没有大人的孩子也可以通过自动批改的功能来自我验证，节省了家长和小朋友的很多时间和精力。</strong></p><h3 id="方案"><a href="#方案" class="headerlink" title="方案"></a>方案</h3><p>题拍拍的应用方案采用了小程序，打开就可以使用，非常方便。</p><p><strong>题拍拍的技术方案采用了科大讯飞的基于深度学习的拍照速算的能力，针对K12教育范围内15种题型的识别和判分，通过注册为开发者，通过HTTP接口调用，就可以比较容易的完成拍照速算的功能。</strong>以下是支持的速算题型。</p><table><thead><tr><th>No.</th><th>题型名称</th><th>题型示例</th></tr></thead><tbody><tr><td>1</td><td>四则混合运算</td><td><img src="data:image/jpeg;base64,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" alt="示例图片"></td></tr><tr><td>2</td><td>带题标号的四则混合运算</td><td><img src="data:image/jpeg;base64,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" alt="示例图片"></td></tr><tr><td>3</td><td>已知结果求运算因子</td><td><img src="data:image/jpeg;base64,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" alt="示例图片"></td></tr><tr><td>4</td><td>填写“&lt;” “&gt;” “=”</td><td><img src="data:image/jpeg;base64,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" alt="示例图片"></td></tr><tr><td>5</td><td>填最大数、最小数</td><td><img src="data:image/jpeg;base64,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" alt="示例图片"></td></tr><tr><td>6</td><td>约等于估算</td><td><img src="data:image/jpeg;base64,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" alt="示例图片"></td></tr><tr><td>7</td><td>带余除数法</td><td><img src="data:image/jpeg;base64,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" alt="示例图片"></td></tr><tr><td>8</td><td>相邻数</td><td><img src="data:image/jpeg;base64,/9j/4AAQSkZJRgABAQEAYABgAAD/2wBDAAMCAgMCAgMDAwMEAwMEBQgFBQQEBQoHBwYIDAoMDAsKCwsNDhIQDQ4RDgsLEBYQERMUFRUVDA8XGBYUGBIUFRT/wAALCAAeAKEBAREA/8QAHwAAAQUBAQEBAQEAAAAAAAAAAAECAwQFBgcICQoL/8QAtRAAAgEDAwIEAwUFBAQAAAF9AQIDAAQRBRIhMUEGE1FhByJxFDKBkaEII0KxwRVS0fAkM2JyggkKFhcYGRolJicoKSo0NTY3ODk6Q0RFRkdISUpTVFVWV1hZWmNkZWZnaGlqc3R1dnd4eXqDhIWGh4iJipKTlJWWl5iZmqKjpKWmp6ipqrKztLW2t7i5usLDxMXGx8jJytLT1NXW19jZ2uHi4+Tl5ufo6erx8vP09fb3+Pn6/9oACAEBAAA/AP1ToooooooooooooooooooorzL41avcLp2jeHLWZrefxHqUentMkmyRIeXmKf8AAEI/4HXotnZw2NrFbwpshjXYqe1eZ+Lz4ij1TVL3U/F9v4K8N22yOzcJC73B2/O7u/8A6B7VqfBnxTq/jDwPDqOrokk5nmjhvY08tLyFHwk+z+DeO3tWb8aLpvClvpHjCCWWJ9HvES4hjb5J7aZwjq30yH/CvUq5vxR460HwkhOrapBaOfuwbt0z/wC6i/Ma0NB1iPXNMgvYobiBJhuWO6iMUn/fNcR4zPiOTW7maTxJb+D/AArawoUu40ieW4l5379/CIlP+C3irU/Fnh/ULi+uodTtYL6S2stXhh8tb+FP+W23t3T/AIBVnxdb+MNa8UWel6Rc/wBiaEtu091qyJHLM778LCiP93jJ31m/CnxZrGsa54q0bUb5ddtNJuI0ttaiiRPO3Jl432fJvQ/3K9LmnS3jZ5HVI1+8zVy2n/EzQ9V15dH065k1W4x872ELzQw/78w+T9au+OfEP/CH+Dda1rb5hsLSS4VP9pUJrP8AhRo9xpHgXSzfTNc6neR/bbuZ2+/NL87/AM6veMvGVt4P02OaVGu725fybSxh/wBZczf3ErkPgv4o8SeJLjxjbeKJrZ73TNVNskdqnyQp5aPsz/F1610vxM0W513wXqMdjO1rqdun2q0mRuUmT50qz8P/ABIfGHgvRdbdAj31ok7Iv97HNdLXmvxm0W5udN0jXbGJri/8OX8epJBGm+SaPlJkT/gDmvQbO8S+tYriLdslXeu5a86v28Z6brGrwz6Ja+MdFuJfOsd8yQPbfJ/qXRk+f/fz3q78HvB+o+CvDN1b6i8P2m7v5rwWtq26G0R34hT2Sqfxe0ybxh/Y3hCG3me31S7Sa8uo1/dwW0Lh3+bs74Cfia9Kkj3ptryiw+Ddx4F1S/1TwdqMInvH8+a11yE3Id/9mf8A1qfjvr0bw/dajdaTA+rWkVjqB/1sEM3mqv8AwKuP1r/hLtL8TX7waXb+KfDl2ieVatMkM1o/RwS/Do9ZXg/wz4o8F+HfE2oW2nWUmt6nffbLbQ0n2W1vwibN4HsXpnxQ0/xtr2p6bZWGnGfwv5HmX0NnqK2s88v/ADxLnkJ/u11Xw7hvNP0s6dJ4Th8KWVv/AMe1vBdpMjf98Uz4kfDXTfido8FhqUt5AltN58L2sxQbx2dPuun+y47VB4c0vxZ4burbTJDpOq6HjYLqCH7FPD9UT5H/AOAbK3vGfh9PGXhDV9GZ/L+32klvv/u71xWT8K7y+vPAumRapbNa6nZJ9juY2XHzp8nH+zVPxF8Ln17xdB4jt/Eeq6Tew2/2ZEtPJZEQ/e2h435NYXwn+F+ueDPFHivUNQ126u7e+v8AzYEdkPnpsQeZJ8n36674lapfaT4L1E6VbtdalcJ9ltIVX/ls/wAiZ9FzV3wH4a/4Q3wfo2iGTzPsNskLP/eYf/XroqKKKKKKKKKKKKKKKKKKKKK//9k=" alt="示例图片"></td></tr><tr><td>9</td><td>分数四则运算</td><td><img src="data:image/jpeg;base64,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" alt="示例图片"></td></tr><tr><td>10</td><td>单位换算</td><td><img src="data:image/jpeg;base64,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" alt="示例图片"></td></tr><tr><td>11</td><td>竖式加减法</td><td><img src="data:image/jpeg;base64,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" alt="示例图片"></td></tr><tr><td>12</td><td>竖式乘除法</td><td><img src="data:image/jpeg;base64,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" alt="示例图片"></td></tr><tr><td>13</td><td>脱式运算</td><td><img src="data:image/jpeg;base64,/9j/4AAQSkZJRgABAQEAYABgAAD/2wBDAAMCAgMCAgMDAwMEAwMEBQgFBQQEBQoHBwYIDAoMDAsKCwsNDhIQDQ4RDgsLEBYQERMUFRUVDA8XGBYUGBIUFRT/wAALCABOAJABAREA/8QAHwAAAQUBAQEBAQEAAAAAAAAAAAECAwQFBgcICQoL/8QAtRAAAgEDAwIEAwUFBAQAAAF9AQIDAAQRBRIhMUEGE1FhByJxFDKBkaEII0KxwRVS0fAkM2JyggkKFhcYGRolJicoKSo0NTY3ODk6Q0RFRkdISUpTVFVWV1hZWmNkZWZnaGlqc3R1dnd4eXqDhIWGh4iJipKTlJWWl5iZmqKjpKWmp6ipqrKztLW2t7i5usLDxMXGx8jJytLT1NXW19jZ2uHi4+Tl5ufo6erx8vP09fb3+Pn6/9oACAEBAAA/AP1TooorP/trTvt32L7fa/a8f6jzl8z/AL5zWhWdDrenXl5JawX9rPcp96GOZWdf+A5rRooqt9qi87yPMXztu7y93zVZoqtdXUNjC01xKkESfekkbYoplhqNtqUHn2txFcxH/lpC4dajvNYsdNZVury3tXboJ5VQ0+x1S01FGe0uorlV+95Lh6u0UUVR1WMzafdJ9oa03ROvnr/yz4PzV8+fFb4f6Z4K8BPY6V4U+0RrCk83jDcjz2b7xvun/jd/4/k9a9l1TSZPF3gN7HT9ce3kvbRUTV7dfn2/309/8a8g1rwz4e1TUdB8OfD7S4ZNZ0q7hnudftU2JZon39838bv/AHK918QeJNN8L2P2zVLyOytt2zzJP71cX4W+LOm6ldXVrqWraSJpLspYpYvI5eH+DfuT79aXxD+IVt4FtbWFPJn1rUn8nTrKaXyxNJ1+dv4EXPWvLfAEdnov7Ql2134ki1bVL/QUe5uvtKbHm8/7kafwJ/sV7P4q8baP4Ph/4md/DaTOjvEkh+/iud+GPxa0vx/oumH7db/2zcwtI9rBu+Sj4leFdF1W+0zWfFGpRx6BpCySPY3Y/wBFlmbhHf8Av7cHCVznwn0oX3jjWvE2i6dJ4c8H3VokEVjJF5Ivp9+ftPk/wcfJ/t1V8c+Adb8Q/FiXUm8J6X4g0xNKS1tp9YmTyIpvMd3+TDP6Vv8Awjv7K2vNd8PnwvZ+FdZ090ku7fTwvkzI4+SVGHtnrXqdFFFUdU0u21rT7mwvIxPa3ETwyxt/ErcEV5q3wTvpdFXw7P401Sfwzt8o2RhiEzw4x5Pn437cV2niPwjHrHgy68O2N3LocM1v9mSex+/Cv+xXIeGfhPrvhezsbHT/AB1eQaZZ7QlrHptqiMnp9yvUKxPD/h06C2o7tSvtRF3cvcgXsm/yc/wJ/s1PrHhjSPEQjGq6Xa6j5XKfaoUk2/nXKWnwV8LWXjtPE1vptrHOln9lS1S2QQr+837+n367u6t0ureSFujrtrK8JeGYfB/h6y0i3keeCzj2JJJ9+uX+JPwvb4gavoWoLr1xpT6O7zwwpDHNC8nQO6P121qeFfC+v6LqEk+reLrrXYnj2LbTWcMIRv7+Uqp4g+HNxdeJDr+ia7d6BqckIhufLjSaG4RT8u9H/jH96rHgvwDD4PuNSvZb+41jW9RZGu9QusB32/cUKowiAdq7OiiiiiiiiiiiiiiiiiiiuEvvjV4N0y+ms7vWkiuoX8uSMwTZRvT7lb/hfxZpXi7T3vdIvPtdsrmIybHT5v8AgVbleF/FDxEtv8ULPR/EWuX+k+GprHzbWPRZ3jnluN/z+ds+fZsrV+BviK414+JRBq9xrPh20u44dOn1GTN4Pk/eJJn5sbz8m/nFdx408aWngzTIbydPOD3MNtsRv777K6OOZJPuur/7teU694Z1HUNQ17WvGHia58PaBZvjT10vUTaokP8Az2mb+/Wt8E9a1nXfANreay8s8jzTG2urhNk01rv/AHLun950rxvw7q0mv2Os6vrWp/ECYLqVzvfRJnS2t4Uf5P8AKV9DeCbrTb7wlpk+lajLrGnvD+5vp5fMeVfVnroqKKKKKK4m+8B6rdXs08XjLWLVHbekMaQ7E/8AHK2/Dek3Wi6e9vd6rd6xJuL+fdbN4/2flrbry678D+IfDvxF1fxXoMdhqw1W2hgms9QneF4tn9xwj/J/sVd8B+DdW0/xZ4g8Ta09lDfaskMP2GwHyQqmfvv/ABv8/WqHxM+CGh+OIfOt9Os01R7yGea6m35dEfLiu38N+D9H8HwzQ6PYQ2KTPvdI/wCKvMNe+H/jXVvHV7rOoWWg+IdPhm/4lFleXkyQ2yf33h2FGm/269P8OzavNpuddtrW1vQzZjsZnkj2/wC86If0rjWs/iVp9te6fFNpOsrM7m21O9kaF4kfoHhRMPtrofhv4LX4f+DtN0JLhrt7VTvuHXbvZ3Luf1rraKKKKKKKKKKKKKKKKKKKKKKKKgN1CvWVP++6ekiyfdZXqSuB8S6h4uuvEUem6PDa6XpMNt51zrd6omR3z/qkTeO3V3qr8L/HGp+KNX8T6RqZtbyTRriOFNT0/wD1NxvQPj/fTpT9YvvGF74kvrayk0/w3oVoi7NR1GHz3u3PJ2pvTYiVJ8JfG19430nUjqMFubjTr6Sy+3WZzbXmz/lrD7V6DRRRRRRRRRRXietfCfV9S1i8uovDngm4jmlaRJLyG585/wDfrvfhz4buPC2gvZ3VhpOnStM8nk6MriH/AMf/AIq6+vNPGWvaxp3iCez1TwzL4i8GX9ukaDTrbz5opc/Osyf3D61n/BnQb7S9Y8R3lvpU/hrwpdyRHTtGuvkdWH+sm2f8s9/Hye1P8W61eLq2p6R4q8HXHiTw5MyzafLp1mbron3JkP8AHnNTfA7w/rHh/R9V+3Wsul6VcX7TaTo8zfPY23ZOOn+52r1Kiiiiiiiiiiiiiiiiiiiiiiiiiiiv/9k=" alt="示例图片"></td></tr><tr><td>14</td><td>解方程</td><td><img src="data:image/jpeg;base64,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" alt="示例图片"></td></tr><tr><td>15</td><td>求平方</td><td><img src="data:image/jpeg;base64,/9j/4AAQSkZJRgABAQEAYABgAAD/2wBDAAMCAgMCAgMDAwMEAwMEBQgFBQQEBQoHBwYIDAoMDAsKCwsNDhIQDQ4RDgsLEBYQERMUFRUVDA8XGBYUGBIUFRT/wAALCAA0ATkBAREA/8QAHwAAAQUBAQEBAQEAAAAAAAAAAAECAwQFBgcICQoL/8QAtRAAAgEDAwIEAwUFBAQAAAF9AQIDAAQRBRIhMUEGE1FhByJxFDKBkaEII0KxwRVS0fAkM2JyggkKFhcYGRolJicoKSo0NTY3ODk6Q0RFRkdISUpTVFVWV1hZWmNkZWZnaGlqc3R1dnd4eXqDhIWGh4iJipKTlJWWl5iZmqKjpKWmp6ipqrKztLW2t7i5usLDxMXGx8jJytLT1NXW19jZ2uHi4+Tl5ufo6erx8vP09fb3+Pn6/9oACAEBAAA/AP1ToooooooooooooooooooooooooqnqGoQ6bZTXdy4htrdHllkPRVXk15A/xj8Ur4ZbxhD4NV/CSL54ke7H217b/ntsx6fNs9K9d03UoNW061vbf54biJJUP+y4yKvV474q8VeLdB1NtQ+1QRRNqaWFh4dMSPJewl0R5t/3xwXf6JXsVFFc5448YWHgDwvqGualuNraJv8ALQfO7fwovvXByfFvxJ4abTLzxZ4Xj0nRNQmS2S6trvzntHf7nnJj+Vev0UUUUUUUUUUUUUUUUUUUUUUUUUUUVxvgDxx/wnUer3dvB5elW969naXGc/aNh2u/035re1zVLPSNGvb6/P8AodtC803yb/kQfPxXlPxY0u88dfDeTVtA8TraeHDYfbX07ykSG9hxv2PN99N6V6X4K1CHWPCOi39rbfYbW4tIZEtSP9UmwYT8Kp/ETxVL4K8K3uvRWf2+Gx2zXEK/f8kH52X325rmtG8Fatc+J7jxRb69a30d/Ik1u89mHeG16+Sj/wANeoUUV598btE03xD8NdXtdU1aHQ7X5GXUZvuQujjYW9t9eQ/Ga78e6x8Nzp/iSHStFSS8s4bZ9NuPOfVJvOTYiJ/An8f/AACvpe0jaO3iV/vqtWKKK88+IHibxJb6jpWgeFbCN9S1Le76jexu1raRJ1Ler/7FZ3g/xf4ps/Hdx4O8VPp99etYf2naahp6OiOnmbNjpUfhe+8Qy+Nra1/tZtYgWGV9Y8uNfs1vNx5aRN/fz2r1iiivHZPFHjnx5r+ux+D5tL0nSdHuZLL7TqMLzPdXKffGB9xBurrPhf46fxxo1011BHaavp1y9hqNrG29EmTAOw/3a7aiiiiiiiiiiiiiiisfxVcS2vhrVp7dN88VpM6f7wQ4rjvhPMvh/wCCPhm5trSW726VDdeRbL88sjoHcAf77mkk+LFzcRsjeAfFDo330ezT/wCLry//AIQnw7ueH/hB/Hn9kPP5/wDYfm/6Fj/c8z7n+xXqEHxVuLeFYovAPidERdqIlmn/AMXXQaZrX/CZeGNQa90e90qN0eF7XUI9jsuysP4A3k138H/CzS/N5dt5KN/0zRyif+OAV0ni7XNX0Oxim0nQJvEE7vseCG5SAov9/L1zmneOPGN1qVtFdfDu8sLWSTZJdNqtq/lJ/f2b66vxLr0nh3S3u4dNvNWdW2/ZbFN7n8K4TWPiEPEWlXOm6h8O/Et3ZXaeTNDJZpsdP++64rw5o+k+G9Tsr5PBfjrUHseLGHVH86Gz/wCuab69E/4W7ef9CJ4n/wDAZP8A4uuy0HVH1rSba8exudOeZcm1u02yJ7MK1KK43xB4807SfF2l+E7v7RbXGsW8r296Pkj3J1Tf/fxzXnXhHRIvBvx4utHtdTuPEP8AamktNeT6hL59zY7JBsTf/cff9z2r0jwr8N9K8Gsg06a/WCPeUgmu3eP5/vfJWL8YP+QbYf8AEy8TaZ++b5vDMO+RuP4/kNcR4Gz/AMJVpv8AxUPxGuf3v+p1W0RLVv8Af+SvoCvEdP029t/HHi8eDPFWn2MX2sT6vpeqWTyfY53QHzk+dPvoBS/sx6PJYaT4r1D7bLqVpqutzXVtezHm5T7hm/4G6PXttFFFFFFFFFFFFFFFRTRJNC6N9x121wHwc0PVvCPh+88N6lC3laVdyQ2F1/DNbP8AOn/fG/Z/wCvRK5Pxt8R/D/w5h099e1FLEX9ylrbIfmaWRugxXWVx/wATpNY/4QfU7fw/btPq11H9mtyP+WJf5PM/4BnNa3hPQYPCXhnS9Ftv9TYW0dqn/AUqDxb4N0zxlYx2eqRzSQo29RBM8X6qa5/Tfgh4U0u+gvLe2vfPhbehkv5n/wDZ69Brk9c+JHhzw94m0vw9e6pDHrOpPstrJDud/wAP4aTxh8RNI8FyWlveNcXF7dH9xZ2MDTzP/t7E/hqbwb480fxxY3FxpVxI8ltL5NzazRmKa3f+46Nyprp6KKw/E3hHR/GViLPWtOg1K2Rt6pOmdreq1X8LeBdB8ERzJoul29j53+tkjT53/wB966SiiiuP8S/Czwp4u1JL/WNEtLu8CeX50kfzun9x/wC8PrXS2Njb6bZxW1rClvawpsSGNdqIv0q3RRRRRRRRRRRRRRRRRWR4k8RWHhPQb7WNUnEGn2cTTTSHslfMHxRubLxJ4Ri8X6tqFidZvtV0/wCw2Mdwjvp1n5wfZ/vuPnevqy0vIb63S4gmSeFxlZIX3q1WqKKKK8Q+LPhfStE8a/D6/srC3t72+8TRvc3SJ8837mT771mXUniLVv2gvGNvoDWcF/babZIuo6hE8yW0J3vsRP77v/6LrpvhPrksnjTxhout6dp9v4tszBJealpibEvoXT9y5z/H1r1yiiiiiiiiiiiiiiiiiiiiiiiiiiiiqWpabbaxZy2d7bxXVrKNrwzJvRvwrzP4i/s/+HfGGhQWGm6dp+lTR3kNz5yWw5RJA7p/wKvTNN0220ezis7K3itbWIbUhhTYi/hV2iiiiuO8deCG8Xal4VulultxouqpqDptyJQI3TZ/4/WH4u+HWst4wTxT4P1a30nVpoFtL+G9h86G7hQ/J/uOpz0q78Ovh1c+FtQ1bWta1L+2fE2rsn2y7RNiIicIiL2SvQKKKKKKKKKKKKKKKKKKKKKKKKKKKKKKKKKKKKKKKKKKK//Z" alt="示例图片"></td></tr></tbody></table><h3 id="功能体验"><a href="#功能体验" class="headerlink" title="功能体验"></a>功能体验</h3><p>先来体验下功能是否满足咱们的要求吧。</p><p><img src="https://cdn.jsdelivr.net/gh/aibittek/ImageHost/img/image-20210124201144855.png" alt="image-20210124201144855"></p><p>以下是用户的”真实”评价🤭：</p><p><img src="https://cdn.jsdelivr.net/gh/aibittek/ImageHost/img/image-20210122112823779.png" alt="image-20210122112823779"></p><h4 id="界面部分"><a href="#界面部分" class="headerlink" title="界面部分"></a><strong>界面部分</strong></h4><p>主页面：负责和用户交互，由相册和相机的功能选择项组成；</p><p>结果界面：负责展示识别的结果的对错信息绘制和展示；</p><h4 id="功能部分"><a href="#功能部分" class="headerlink" title="功能部分"></a><strong>功能部分</strong></h4><p>应用核心：通过调用科大讯飞拍照速算接口快速完成以上的功能；</p><p>算法核心：专题讲座；</p><p>打开微信，下拉在搜索中搜索<strong>比特人生的世界</strong>或者微信扫描以下二维码来体验吧。</p><p><img src="https://cdn.jsdelivr.net/gh/aibittek/ImageHost/img/image-20210122112304076.png" alt="image-20210122112304076"></p><h2 id="开发环境搭建"><a href="#开发环境搭建" class="headerlink" title="开发环境搭建"></a>开发环境搭建</h2><h3 id="软件下载安装"><a href="#软件下载安装" class="headerlink" title="软件下载安装"></a>软件下载安装</h3><p>安装微信开发者工具：tools/wechat_devtools_1.03.2012120_x64.exe</p><p>或者登录官方地址<a href="https://developers.weixin.qq.com/miniprogram/dev/devtools/stable.html" rel="external nofollow noreferrer">下载</a>，点击对应的系统下载即可。</p><p>对安装路径有要求的替换安装的路径，其他的直接下一步，安装完毕后，直接点击完成启动软件，界面如下：</p><p><img src="https://cdn.jsdelivr.net/gh/aibittek/ImageHost/img/image-20210124201226564.png" alt="image-20210124201226564"></p><p>打开手机上的微信软件，扫描以上二维码，验证登录身份。</p><p><img src="https://cdn.jsdelivr.net/gh/aibittek/ImageHost/img/image-20210115122530079.png" alt="image-20210115122530079"></p><p>在手机微信端，点击上图的确认登录后，即可进入桌面的小程序开发软件进行软件开发了，登录成功后的界面如下：</p><p><img src="https://cdn.jsdelivr.net/gh/aibittek/ImageHost/img/image-20210124201255075.png" alt="image-20210124201255075"></p><h3 id="小程序创建及账号注册"><a href="#小程序创建及账号注册" class="headerlink" title="小程序创建及账号注册"></a>小程序创建及账号注册</h3><p>创建项目名称为quickcalc，源代码存放的目录，开发模式选择小程序，不使用云服务的开发模式，AppID通过点击注册按钮注册。</p><p><img src="https://cdn.jsdelivr.net/gh/aibittek/ImageHost/img/image-20210124201318852.png" alt="image-20210124201318852"></p><p>点击注册按钮之后，进入小程序的注册界面，输入完账号信息，从邮箱中激活，便可以进入到小程序的管理页面找到AppID了。</p><p><img src="https://cdn.jsdelivr.net/gh/aibittek/ImageHost/img/image-20210124201342413.png" alt="image-20210124201342413"></p><p>进入小程序管理页面后，点击左侧的设置按钮，找到AppID，拷贝到创建小程序的界面中，点击新建项目即可。</p><p><img src="https://cdn.jsdelivr.net/gh/aibittek/ImageHost/img/image-20210124201406920.png" alt="image-20210124201406920"></p><p>看到以下界面，表示已经创建完成。</p><p><img src="https://cdn.jsdelivr.net/gh/aibittek/ImageHost/img/image-20210115134830410.png" alt="image-20210115134830410"></p><h3 id="小程序运行调试"><a href="#小程序运行调试" class="headerlink" title="小程序运行调试"></a>小程序运行调试</h3><p>通过<strong>微信开发工具</strong>可以看到小程序的运行有模拟器运行和真机运行两种调试模式。前期开发可以使用模拟器更方便，后面可以使用真机调试，验证程序运行在手机上的真实效果。</p><p><img src="https://cdn.jsdelivr.net/gh/aibittek/ImageHost/img/image-20210124201524423.png" alt="image-20210124201524423"></p><h3 id="通过小程序搜索进入小程序"><a href="#通过小程序搜索进入小程序" class="headerlink" title="通过小程序搜索进入小程序"></a>通过小程序搜索进入小程序</h3><p>开发好了功能后，是不是想想让别人也体验你的成果呢？</p><p>先别急，先要了解小程序的三种不同的版本：开发版、体验版、发布版。</p><p><strong>开发版</strong>：本地编写好代码直接运行的就是开发版了，开发版只能开发者看到。</p><p><strong>体验版</strong>：体验版需要有两部操作，第一步是点击右上角的上传，第二步是进入<a href="https://mp.weixin.qq.com/" rel="external nofollow noreferrer">微信开发平台</a>，具体步骤如下。</p><p><img src="https://cdn.jsdelivr.net/gh/aibittek/ImageHost/img/image-20210122114147785.png" alt="img"></p><h3 id="通过小程序二维码进入小程序"><a href="#通过小程序二维码进入小程序" class="headerlink" title="通过小程序二维码进入小程序"></a>通过小程序二维码进入小程序</h3><p>成为体验版本和发布版本的小程序可以通过搜索二维码进入小程序，体验版会需要有一个向开发者验证身份的过程，通过开发者确认了后才能进入小程序。</p><p>小程序的二维码获取路径是通过<a href="https://mp.weixin.qq.com/" rel="external nofollow noreferrer">微信开放平台网址</a>登录后，找到左侧的<strong>设置选项</strong>，点击<strong>下载</strong>即可。这样就可以让别人通过二维码进入你的小程序啦。</p><p><img src="https://cdn.jsdelivr.net/gh/aibittek/ImageHost/img/image-20210122114849459.png" alt="image-20210122114849459"></p><h3 id="小程序发布"><a href="#小程序发布" class="headerlink" title="小程序发布"></a>小程序发布</h3><p>小程序的发布流程基本上是开发、上传、审核（几个小时到几天不等）、发布这几个流程。由于小程序的发布具体流程一直在变化，因此具体的要求，可以参考<a href="https://developers.weixin.qq.com/miniprogram/dev/framework/quickstart/release.html#%E5%8F%91%E5%B8%83%E4%B8%8A%E7%BA%BF" rel="external nofollow noreferrer">官方教程</a>。</p><h2 id="界面设计"><a href="#界面设计" class="headerlink" title="界面设计"></a>界面设计</h2><p>左边是原始界面，右边是我们要做的界面。</p><p>边看边想：界面修改和什么有关？（改改看）</p><p>边看边想：和网页有啥区别？（比比看）</p><p><img src="https://cdn.jsdelivr.net/gh/aibittek/ImageHost/img/image-20210122115846433.png" alt="image-20210122115846433"></p><h3 id="目录结构"><a href="#目录结构" class="headerlink" title="目录结构"></a>目录结构</h3><p>小程序包含一个描述整体程序的 <code>app</code> 和多个描述各自页面的 <code>page</code>。</p><p>一个小程序主体部分由三个文件组成，必须放在项目的根目录，如下：</p><table><thead><tr><th align="left">文件</th><th align="left">必需</th><th align="left">作用</th></tr></thead><tbody><tr><td align="left"><a href="https://developers.weixin.qq.com/miniprogram/dev/framework/app-service/app.html" rel="external nofollow noreferrer">app.js</a></td><td align="left">是</td><td align="left">小程序逻辑</td></tr><tr><td align="left"><a href="https://developers.weixin.qq.com/miniprogram/dev/framework/config.html" rel="external nofollow noreferrer">app.json</a></td><td align="left">是</td><td align="left">小程序公共配置</td></tr><tr><td align="left"><a href="https://developers.weixin.qq.com/miniprogram/dev/framework/view/wxss.html" rel="external nofollow noreferrer">app.wxss</a></td><td align="left">否</td><td align="left">小程序公共样式表</td></tr></tbody></table><p>一个小程序页面由四个文件组成，分别是：</p><table><thead><tr><th align="left">文件类型</th><th align="left">必需</th><th align="left">作用</th></tr></thead><tbody><tr><td align="left"><a href="https://developers.weixin.qq.com/miniprogram/dev/framework/app-service/page.html" rel="external nofollow noreferrer">js</a></td><td align="left">是</td><td align="left">页面逻辑</td></tr><tr><td align="left"><a href="https://developers.weixin.qq.com/miniprogram/dev/framework/view/wxml/" rel="external nofollow noreferrer">wxml</a></td><td align="left">是</td><td align="left">页面结构</td></tr><tr><td align="left"><a href="https://developers.weixin.qq.com/miniprogram/dev/framework/config.html#%E9%A1%B5%E9%9D%A2%E9%85%8D%E7%BD%AE" rel="external nofollow noreferrer">json</a></td><td align="left">否</td><td align="left">页面配置</td></tr><tr><td align="left"><a href="https://developers.weixin.qq.com/miniprogram/dev/framework/view/wxss.html" rel="external nofollow noreferrer">wxss</a></td><td align="left">否</td><td align="left">页面样式表</td></tr></tbody></table><p><strong>注意：为了方便开发者减少配置项，描述页面的四个文件必须具有相同的路径与文件名。</strong></p><p>允许上传的文件</p><p>在项目目录中，以下文件会经过编译，因此上传之后无法直接访问到：*.js、app.json、*.wxml、*.wxss（其中 wxml 和 wxss 文件仅针对在 app.json 中配置了的页面）。除此之外，只有后缀名在白名单内的文件可以被上传，不在白名单列表内文件在开发工具能被访问到，但无法被上传。具体白名单列表如下：</p><ol><li> wxs</li><li> png</li><li> jpg</li><li> jpeg</li><li> gif</li><li> svg</li><li> json</li><li> cer</li><li> mp3</li><li> aac</li><li> m4a</li><li> mp4</li><li> wav</li><li> ogg</li><li> silk</li></ol><h3 id="运行流程"><a href="#运行流程" class="headerlink" title="运行流程"></a>运行流程</h3><p>项目里边生成了不同类型的文件:</p><ol><li> <code>.json</code> 后缀的 <code>JSON</code> 配置文件</li><li> <code>.wxml</code> 后缀的 <code>WXML</code> 模板文件</li><li> <code>.wxss</code> 后缀的 <code>WXSS</code> 样式文件</li><li> <code>.js</code> 后缀的 <code>JS</code> 脚本逻辑文件</li></ol><p>接下来我们分别看看这4种文件的作用。</p><h4 id="配置文件json"><a href="#配置文件json" class="headerlink" title="配置文件json"></a>配置文件json</h4><p><strong>JSON 配置</strong></p><p>JSON 是一种数据格式，并不是编程语言，在小程序中，JSON扮演的静态配置的角色。</p><p>我们可以看到在项目的根目录有一个 <code>app.json</code> 和 <code>project.config.json</code>，此外在 <code>pages/logs</code> 目录下还有一个 <code>logs.json</code>，我们依次来说明一下它们的用途。</p><p><strong>小程序配置 app.json</strong></p><p><code>app.json</code> 是当前小程序的全局配置，包括了小程序的所有页面路径、界面表现、网络超时时间、底部 tab 等。QuickStart 项目里边的 <code>app.json</code> 配置内容如下：</p><pre class="line-numbers language-json" data-language="json"><code class="language-json"><span class="token punctuation">&#123;</span>  <span class="token property">"pages"</span><span class="token operator">:</span><span class="token punctuation">[</span>    <span class="token string">"pages/index/index"</span><span class="token punctuation">,</span>    <span class="token string">"pages/logs/logs"</span>  <span class="token punctuation">]</span><span class="token punctuation">,</span>  <span class="token property">"window"</span><span class="token operator">:</span><span class="token punctuation">&#123;</span>    <span class="token property">"backgroundTextStyle"</span><span class="token operator">:</span><span class="token string">"light"</span><span class="token punctuation">,</span>    <span class="token property">"navigationBarBackgroundColor"</span><span class="token operator">:</span> <span class="token string">"#fff"</span><span class="token punctuation">,</span>    <span class="token property">"navigationBarTitleText"</span><span class="token operator">:</span> <span class="token string">"Weixin"</span><span class="token punctuation">,</span>    <span class="token property">"navigationBarTextStyle"</span><span class="token operator">:</span><span class="token string">"black"</span>  <span class="token punctuation">&#125;</span><span class="token punctuation">&#125;</span><span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre><p>我们简单说一下这个配置各个项的含义:</p><ol><li> <code>pages</code>字段 —— 用于描述当前小程序所有页面路径，这是为了让微信客户端知道当前你的小程序页面定义在哪个目录。</li><li> <code>window</code>字段 —— 定义小程序所有页面的顶部背景颜色，文字颜色定义等。</li></ol><p>其他配置项细节可以参考文档 <a href="https://developers.weixin.qq.com/miniprogram/dev/framework/config.html" rel="external nofollow noreferrer">小程序的配置 app.json</a> 。</p><p><strong>工具配置 project.config.json</strong></p><p>通常大家在使用一个工具的时候，都会针对各自喜好做一些个性化配置，例如界面颜色、编译配置等等，当你换了另外一台电脑重新安装工具的时候，你还要重新配置。</p><p>考虑到这点，小程序开发者工具在每个项目的根目录都会生成一个 <code>project.config.json</code>，你在工具上做的任何配置都会写入到这个文件，当你重新安装工具或者换电脑工作时，你只要载入同一个项目的代码包，开发者工具就自动会帮你恢复到当时你开发项目时的个性化配置，其中会包括编辑器的颜色、代码上传时自动压缩等等一系列选项。</p><p>其他配置项细节可以参考文档 <a href="https://developers.weixin.qq.com/miniprogram/dev/devtools/projectconfig.html" rel="external nofollow noreferrer">开发者工具的配置</a> 。</p><p><strong>页面配置 page.json</strong></p><p>这里的 <code>page.json</code> 其实用来表示 pages/logs 目录下的 <code>logs.json</code> 这类和小程序页面相关的配置。</p><p>如果你整个小程序的风格是蓝色调，那么你可以在 <code>app.json</code> 里边声明顶部颜色是蓝色即可。实际情况可能不是这样，可能你小程序里边的每个页面都有不一样的色调来区分不同功能模块，因此我们提供了 <code>page.json</code>，让开发者可以独立定义每个页面的一些属性，例如刚刚说的顶部颜色、是否允许下拉刷新等等。</p><p>其他配置项细节可以参考文档 <a href="https://developers.weixin.qq.com/miniprogram/dev/framework/config.html#%E9%A1%B5%E9%9D%A2%E9%85%8D%E7%BD%AE" rel="external nofollow noreferrer">页面配置</a> 。</p><p><strong>JSON 语法</strong></p><p>这里说一下小程序里JSON配置的一些注意事项。</p><p>JSON文件都是被包裹在一个大括号中 {}，通过key-value的方式来表达数据。JSON的Key必须包裹在一个双引号中，在实践中，编写 JSON 的时候，忘了给 Key 值加双引号或者是把双引号写成单引号是常见错误。</p><p>JSON的值只能是以下几种数据格式，其他任何格式都会触发报错，例如 JavaScript 中的 undefined。</p><ol><li> 数字，包含浮点数和整数</li><li> 字符串，需要包裹在双引号中</li><li> Bool值，true 或者 false</li><li> 数组，需要包裹在方括号中 []</li><li> 对象，需要包裹在大括号中 {}</li><li> Null</li></ol><p>还需要注意的是 JSON 文件中无法使用注释，试图添加注释将会引发报错。</p><h4 id="布局文件WXML"><a href="#布局文件WXML" class="headerlink" title="布局文件WXML"></a>布局文件WXML</h4><p>从事过网页编程的人知道，网页编程采用的是 HTML + CSS + JS 这样的组合，其中 <code>HTML</code> 是用来描述当前这个页面的结构，<code>CSS</code> 用来描述页面的样子，<code>JS</code> 通常是用来处理这个页面和用户的交互。</p><p>同样道理，在小程序中也有同样的角色，其中 <code>WXML</code> 充当的就是类似 <code>HTML</code> 的角色。打开 <code>pages/index/index.wxml</code>，你会看到以下的内容:</p><pre class="line-numbers language-html" data-language="html"><code class="language-html"><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>view</span> <span class="token attr-name">class</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>container<span class="token punctuation">"</span></span><span class="token punctuation">></span></span>  <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>view</span> <span class="token attr-name">class</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>userinfo<span class="token punctuation">"</span></span><span class="token punctuation">></span></span>    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>button</span> <span class="token attr-name"><span class="token namespace">wx:</span>if</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>&#123;&#123;!hasUserInfo &amp;&amp; canIUse&#125;&#125;<span class="token punctuation">"</span></span><span class="token punctuation">></span></span> 获取头像昵称 <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>button</span><span class="token punctuation">></span></span>    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>block</span> <span class="token attr-name"><span class="token namespace">wx:</span>else</span><span class="token punctuation">></span></span>      <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>image</span> <span class="token attr-name">src</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>&#123;&#123;userInfo.avatarUrl&#125;&#125;<span class="token punctuation">"</span></span> <span class="token attr-name">background-size</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>cover<span class="token punctuation">"</span></span><span class="token punctuation">></span></span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>image</span><span class="token punctuation">></span></span>      <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>text</span> <span class="token attr-name">class</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>userinfo-nickname<span class="token punctuation">"</span></span><span class="token punctuation">></span></span>&#123;&#123;userInfo.nickName&#125;&#125;<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>text</span><span class="token punctuation">></span></span>    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>block</span><span class="token punctuation">></span></span>  <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>view</span><span class="token punctuation">></span></span>  <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>view</span> <span class="token attr-name">class</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>usermotto<span class="token punctuation">"</span></span><span class="token punctuation">></span></span>    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>text</span> <span class="token attr-name">class</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>user-motto<span class="token punctuation">"</span></span><span class="token punctuation">></span></span>&#123;&#123;motto&#125;&#125;<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>text</span><span class="token punctuation">></span></span>  <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>view</span><span class="token punctuation">></span></span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>view</span><span class="token punctuation">></span></span><span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre><p>和 <code>HTML</code> 非常相似，<code>WXML</code> 由标签、属性等等构成。但是也有很多不一样的地方，我们来一一阐述一下：</p><ol><li><p>标签名字有点不一样</p><p> 往往写 HTML 的时候，经常会用到的标签是 <code>div</code>, <code>p</code>, <code>span</code>，开发者在写一个页面的时候可以根据这些基础的标签组合出不一样的组件，例如日历、弹窗等等。换个思路，既然大家都需要这些组件，为什么我们不能把这些常用的组件包装起来，大大提高我们的开发效率。</p><p> 从上边的例子可以看到，小程序的 <code>WXML</code> 用的标签是 <code>view</code>, <code>button</code>, <code>text</code> 等等，这些标签就是小程序给开发者包装好的基本能力，我们还提供了地图、视频、音频等等组件能力。</p><p> 更多详细的组件讲述参考下个章节 <a href="https://developers.weixin.qq.com/miniprogram/dev/framework/quickstart/framework.html" rel="external nofollow noreferrer">小程序的能力</a></p></li><li><p>多了一些wx:if这样的属性以及 <code>&#123;&#123; &#125;&#125;</code> 这样的表达式</p></li></ol><p>在网页的一般开发流程中，我们通常会通过 <code>JS</code> 操作 <code>DOM</code> (对应 <code>HTML</code> 的描述产生的树)，以引起界面的一些变化响应用户的行为。例如，用户点击某个按钮的时候，<code>JS</code> 会记录一些状态到 <code>JS</code> 变量里边，同时通过 DOM API 操控 <code>DOM</code> 的属性或者行为，进而引起界面一些变化。当项目越来越大的时候，你的代码会充斥着非常多的界面交互逻辑和程序的各种状态变量，显然这不是一个很好的开发模式，因此就有了 MVVM 的开发模式（例如 React, Vue），提倡把渲染和逻辑分离。简单来说就是不要再让 <code>JS</code> 直接操控 <code>DOM</code>，<code>JS</code> 只需要管理状态即可，然后再通过一种模板语法来描述状态和界面结构的关系即可。</p><p>小程序的框架也是用到了这个思路，如果你需要把一个 <code>Hello World</code> 的字符串显示在界面上。</p><p>WXML 是这么写 :</p><pre><code><pre class="line-numbers language-html" data-language="html"><code class="language-html"><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>text</span><span class="token punctuation">></span></span>&#123;&#123;msg&#125;&#125;<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>text</span><span class="token punctuation">></span></span><span aria-hidden="true" class="line-numbers-rows"><span></span></span></code></pre></code></pre><p>JS 只需要管理状态即可:</p><pre><code><pre class="line-numbers language-js" data-language="js"><code class="language-js"><span class="token keyword">this</span><span class="token punctuation">.</span><span class="token function">setData</span><span class="token punctuation">(</span><span class="token punctuation">&#123;</span> msg<span class="token operator">:</span> <span class="token string">"Hello World"</span> <span class="token punctuation">&#125;</span><span class="token punctuation">)</span><span aria-hidden="true" class="line-numbers-rows"><span></span></span></code></pre>通过 &#123;&#123; &#125;&#125; 的语法把一个变量绑定到界面上，我们称为数据绑定。仅仅通过数据绑定还不够完整的描述状态和界面的关系，还需要 `if`/`else`, `for`等控制能力，在小程序里边，这些控制能力都用 `wx:` 开头的属性来表达。</code></pre><p>更详细的文档可以参考 <a href="https://developers.weixin.qq.com/miniprogram/dev/framework/view/wxml/" rel="external nofollow noreferrer">WXML</a></p><h4 id="样式文件WXSS"><a href="#样式文件WXSS" class="headerlink" title="样式文件WXSS"></a>样式文件WXSS</h4><p><code>WXSS</code> 具有 <code>CSS</code> 大部分的特性，小程序在 <code>WXSS</code> 也做了一些扩充和修改。</p><ol><li> 新增了尺寸单位。在写 <code>CSS</code> 样式时，开发者需要考虑到手机设备的屏幕会有不同的宽度和设备像素比，采用一些技巧来换算一些像素单位。<code>WXSS</code> 在底层支持新的尺寸单位 <code>rpx</code> ，开发者可以免去换算的烦恼，只要交给小程序底层来换算即可，由于换算采用的浮点数运算，所以运算结果会和预期结果有一点点偏差。</li><li> 提供了全局的样式和局部样式。和前边 <code>app.json</code>, <code>page.json</code> 的概念相同，你可以写一个 <code>app.wxss</code> 作为全局样式，会作用于当前小程序的所有页面，局部页面样式 <code>page.wxss</code> 仅对当前页面生效。</li><li> 此外 <code>WXSS</code> 仅支持部分 <code>CSS</code> 选择器</li></ol><p>更详细的文档可以参考 <a href="https://developers.weixin.qq.com/miniprogram/dev/framework/view/wxss.html" rel="external nofollow noreferrer">WXSS</a> 。</p><h4 id="界面和代码结合"><a href="#界面和代码结合" class="headerlink" title="界面和代码结合"></a>界面和代码结合</h4><p>一个服务仅仅只有界面展示是不够的，还需要和用户做交互：响应用户的点击、获取用户的位置等等。在小程序里边，我们就通过编写 <code>JS</code> 脚本文件来处理用户的操作。</p><pre class="line-numbers language-html" data-language="html"><code class="language-html"><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>view</span><span class="token punctuation">></span></span>&#123;&#123; msg &#125;&#125;<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>view</span><span class="token punctuation">></span></span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>button</span> <span class="token attr-name">bindtap</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>clickMe<span class="token punctuation">"</span></span><span class="token punctuation">></span></span>点击我<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>button</span><span class="token punctuation">></span></span><span aria-hidden="true" class="line-numbers-rows"><span></span><span></span></span></code></pre><p>点击 <code>button</code> 按钮的时候，我们希望把界面上 <code>msg</code> 显示成 <code>&quot;Hello World&quot;</code>，于是我们在 <code>button</code> 上声明一个属性: <code>bindtap</code> ，在 JS 文件里边声明了 <code>clickMe</code> 方法来响应这次点击操作：</p><pre class="line-numbers language-js" data-language="js"><code class="language-js"><span class="token function">Page</span><span class="token punctuation">(</span><span class="token punctuation">&#123;</span>  <span class="token function-variable function">clickMe</span><span class="token operator">:</span> <span class="token keyword">function</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">&#123;</span>    <span class="token keyword">this</span><span class="token punctuation">.</span><span class="token function">setData</span><span class="token punctuation">(</span><span class="token punctuation">&#123;</span> msg<span class="token operator">:</span> <span class="token string">"Hello World"</span> <span class="token punctuation">&#125;</span><span class="token punctuation">)</span>  <span class="token punctuation">&#125;</span><span class="token punctuation">&#125;</span><span class="token punctuation">)</span><span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span></span></code></pre><p>响应用户的操作就是这么简单，更详细的事件可以参考文档 <a href="https://developers.weixin.qq.com/miniprogram/dev/framework/view/wxml/event.html" rel="external nofollow noreferrer">WXML - 事件</a> 。</p><p>此外你还可以在 JS 中调用小程序提供的丰富的 API，利用这些 API 可以很方便的调起微信提供的能力，例如获取用户信息、本地存储、微信支付等。在前边的 QuickStart 例子中，在 <code>pages/index/index.js</code> 就调用了 <a href="https://developers.weixin.qq.com/miniprogram/dev/api/open-api/user-info/wx.getUserInfo.html" rel="external nofollow noreferrer">wx.getUserInfo</a> 获取微信用户的头像和昵称，最后通过 <code>setData</code> 把获取到的信息显示到界面上。更多 API 可以参考文档 <a href="https://developers.weixin.qq.com/miniprogram/dev/framework/app-service/api.html" rel="external nofollow noreferrer">小程序的API</a> 。</p><p>通过这个章节，你了解了小程序涉及到的文件类型以及对应的角色，在<a href="https://developers.weixin.qq.com/miniprogram/dev/framework/quickstart/framework.html" rel="external nofollow noreferrer">下个章节</a>中，我们把这一章所涉及到的文件通过 “小程序的框架” 给 “串” 起来，让他们都工作起来。</p><h3 id="目标布局修改演示"><a href="#目标布局修改演示" class="headerlink" title="目标布局修改演示"></a>目标布局修改演示</h3><h4 id="目标-1"><a href="#目标-1" class="headerlink" title="目标"></a>目标</h4><p>左边是新创建出的小程序，右边是界面设计的参考目标。</p><p>也可以自己发挥设计自己喜欢的风格😄，保留具备相册和相机的两个功能即可。</p><p><img src="https://cdn.jsdelivr.net/gh/aibittek/ImageHost/img/image-20210124131842062.png" alt="image-20210124131842062"></p><h4 id="界面元素分析"><a href="#界面元素分析" class="headerlink" title="界面元素分析"></a>界面元素分析</h4><p>背景图：居中对齐；</p><p>两个按钮：表格对齐，配置图片和文字；位置尽量靠近用户方便点击的位置；</p><p>灰白色背景：放置到两个按钮的后面，当作按钮功能的桌布，注意颜色搭配；</p><h4 id="绘制背景"><a href="#绘制背景" class="headerlink" title="绘制背景"></a>绘制背景</h4><p>找一张和内容搭配的背景图片，放到工程中，路径为images/welcome.png</p><p><img src="https://cdn.jsdelivr.net/gh/aibittek/ImageHost/img/image-20210124133803332.png" alt="image-20210124133803332"></p><p>修改布局文件index.wxml如下（可以把之前index.wxml内容删除）:</p><pre class="line-numbers language-xml" data-language="xml"><code class="language-xml"><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>view</span> <span class="token attr-name">class</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">'</span>bg<span class="token punctuation">'</span></span><span class="token punctuation">></span></span>  <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>image</span> <span class="token attr-name">src</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">'</span>/images/welcome.png<span class="token punctuation">'</span></span><span class="token punctuation">></span></span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>image</span><span class="token punctuation">></span></span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>view</span><span class="token punctuation">></span></span><span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span></span></code></pre><p>显示效果如下，可以看到图片默认被布局到了最上面，并且是填充满的，我们的目标是布局到中间，因此可以通过index.wxss样式文件来修改</p><p><img src="https://cdn.jsdelivr.net/gh/aibittek/ImageHost/img/image-20210124134501857.png" alt="image-20210124134501857"></p><p>修改index.wxss文件，让背景图片居中显示：</p><pre class="line-numbers language-css" data-language="css"><code class="language-css"><span class="token selector">.bg</span> <span class="token punctuation">&#123;</span>  <span class="token property">display</span><span class="token punctuation">:</span> flex<span class="token punctuation">;</span>  <span class="token property">align-items</span><span class="token punctuation">:</span> center<span class="token punctuation">;</span>  <span class="token property">height</span><span class="token punctuation">:</span> 750rpx<span class="token punctuation">;</span>  <span class="token property">margin-left</span><span class="token punctuation">:</span> 20rpx<span class="token punctuation">;</span>  <span class="token property">margin-right</span><span class="token punctuation">:</span> 20rpx<span class="token punctuation">;</span>  <span class="token property">border-radius</span><span class="token punctuation">:</span> 10rpx<span class="token punctuation">;</span>  <span class="token property">border</span><span class="token punctuation">:</span> 1px solid green<span class="token punctuation">;</span><span class="token punctuation">&#125;</span><span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre><p>显示效果如下：</p><p><img src="https://cdn.jsdelivr.net/gh/aibittek/ImageHost/img/image-20210124140803618.png" alt="image-20210124140803618"></p><h4 id="绘制两个按钮"><a href="#绘制两个按钮" class="headerlink" title="绘制两个按钮"></a>绘制两个按钮</h4><p>在index.wxml中增加以下内容</p><pre class="line-numbers language-html" data-language="html"><code class="language-html"><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>image</span> <span class="token attr-name">class</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>photoImg<span class="token punctuation">"</span></span> <span class="token attr-name">src</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>/images/photo.png<span class="token punctuation">"</span></span> <span class="token style-attr"><span class="token attr-name">style</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">'</span><span class="token style language-css"><span class="token property">width</span><span class="token punctuation">:</span>60rpx<span class="token punctuation">;</span> height=60rpx</span><span class="token punctuation">'</span></span></span> <span class="token attr-name">mode</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">'</span>aspectFit<span class="token punctuation">'</span></span><span class="token punctuation">></span></span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>image</span><span class="token punctuation">></span></span>  <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>view</span> <span class="token attr-name">class</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>cst<span class="token punctuation">"</span></span><span class="token punctuation">></span></span>  <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>view</span> <span class="token attr-name">class</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>t1<span class="token punctuation">"</span></span><span class="token punctuation">></span></span>相册<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>view</span><span class="token punctuation">></span></span>  <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>view</span> <span class="token attr-name">class</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>t2<span class="token punctuation">"</span></span><span class="token punctuation">></span></span>从相册选择<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>view</span><span class="token punctuation">></span></span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>view</span><span class="token punctuation">></span></span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>image</span> <span class="token attr-name">class</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>cameraImg<span class="token punctuation">"</span></span>  <span class="token attr-name">src</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>/images/camera.png<span class="token punctuation">"</span></span> <span class="token style-attr"><span class="token attr-name">style</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">'</span><span class="token style language-css"><span class="token property">width</span><span class="token punctuation">:</span>60rpx<span class="token punctuation">;</span> height=60rpx</span><span class="token punctuation">'</span></span></span> <span class="token attr-name">mode</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">'</span>aspectFit<span class="token punctuation">'</span></span><span class="token punctuation">></span></span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>image</span><span class="token punctuation">></span></span>  <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>view</span> <span class="token attr-name">class</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>cst<span class="token punctuation">"</span></span><span class="token punctuation">></span></span>  <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>view</span> <span class="token attr-name">class</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>t1<span class="token punctuation">"</span></span><span class="token punctuation">></span></span>相机<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>view</span><span class="token punctuation">></span></span>  <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>view</span> <span class="token attr-name">class</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>t2<span class="token punctuation">"</span></span><span class="token punctuation">></span></span>拍照扫描<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>view</span><span class="token punctuation">></span></span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>view</span><span class="token punctuation">></span></span><span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre><p>显示效果：</p><p><img src="https://cdn.jsdelivr.net/gh/aibittek/ImageHost/img/image-20210124161023708.png" alt="image-20210124161023708"></p><p>使用CSS排版</p><pre class="line-numbers language-css" data-language="css"><code class="language-css"><span class="token selector">.photo</span> <span class="token punctuation">&#123;</span>  <span class="token property">display</span><span class="token punctuation">:</span> flex<span class="token punctuation">;</span>  <span class="token property">height</span><span class="token punctuation">:</span> 150rpx<span class="token punctuation">;</span>    <span class="token property">align-items</span><span class="token punctuation">:</span> center<span class="token punctuation">;</span>  <span class="token property">border-radius</span><span class="token punctuation">:</span> 5px<span class="token punctuation">;</span>    <span class="token property">background-color</span><span class="token punctuation">:</span> #FFF<span class="token punctuation">;</span>  <span class="token property">box-shadow</span><span class="token punctuation">:</span> 0px 0px 50px #00000018<span class="token punctuation">;</span><span class="token punctuation">&#125;</span><span class="token selector">.camera</span><span class="token punctuation">&#123;</span>  <span class="token property">display</span><span class="token punctuation">:</span> flex<span class="token punctuation">;</span>  <span class="token property">height</span><span class="token punctuation">:</span> 150rpx<span class="token punctuation">;</span>  <span class="token property">align-items</span><span class="token punctuation">:</span> center<span class="token punctuation">;</span>  <span class="token property">border-radius</span><span class="token punctuation">:</span> 5px<span class="token punctuation">;</span>    <span class="token property">background-color</span><span class="token punctuation">:</span> #FFF<span class="token punctuation">;</span>  <span class="token property">box-shadow</span><span class="token punctuation">:</span> 0px 0px 10px #00000018<span class="token punctuation">;</span><span class="token punctuation">&#125;</span><span class="token selector">.photoImg</span> <span class="token punctuation">&#123;</span>  <span class="token property">margin</span><span class="token punctuation">:</span> 0 20rpx 0 40rpx<span class="token punctuation">;</span>  <span class="token property">width</span><span class="token punctuation">:</span> 60rpx<span class="token punctuation">;</span><span class="token punctuation">&#125;</span><span class="token selector">.cameraImg</span> <span class="token punctuation">&#123;</span>  <span class="token property">margin</span><span class="token punctuation">:</span> 0 20rpx 0 40rpx<span class="token punctuation">;</span>  <span class="token property">width</span><span class="token punctuation">:</span> 60rpx<span class="token punctuation">;</span><span class="token punctuation">&#125;</span><span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre><p>效果：</p><p><img src="https://cdn.jsdelivr.net/gh/aibittek/ImageHost/img/image-20210124161611025.png" alt="image-20210124161611025"></p><p>增加Grid布局，让两个按钮按行的方式布局</p><p>index.wxml：</p><pre class="line-numbers language-none"><code class="language-none">&lt;view class&#x3D;&quot;operateButtons&quot;&gt;  &lt;view class&#x3D;&quot;photo&quot; bindtap&#x3D;&quot;photo&quot;&gt;    &lt;image class&#x3D;&quot;photoImg&quot; src&#x3D;&quot;&#x2F;images&#x2F;photo.png&quot; style&#x3D;&#39;width:60rpx; height&#x3D;60rpx&#39; mode&#x3D;&#39;aspectFit&#39;&gt;&lt;&#x2F;image&gt;    &lt;view class&#x3D;&quot;cst&quot;&gt;      &lt;view class&#x3D;&quot;t1&quot;&gt;相册&lt;&#x2F;view&gt;      &lt;view class&#x3D;&quot;t2&quot;&gt;从相册选择&lt;&#x2F;view&gt;    &lt;&#x2F;view&gt;  &lt;&#x2F;view&gt;  &lt;view class&#x3D;&quot;camera&quot; bindtap&#x3D;&quot;camera&quot;&gt;    &lt;image class&#x3D;&quot;cameraImg&quot;  src&#x3D;&quot;&#x2F;images&#x2F;camera.png&quot; style&#x3D;&#39;width:60rpx; height&#x3D;60rpx&#39; mode&#x3D;&#39;aspectFit&#39;&gt;&lt;&#x2F;image&gt;    &lt;view class&#x3D;&quot;cst&quot;&gt;      &lt;view class&#x3D;&quot;t1&quot;&gt;相机&lt;&#x2F;view&gt;      &lt;view class&#x3D;&quot;t2&quot;&gt;拍照扫描&lt;&#x2F;view&gt;    &lt;&#x2F;view&gt;  &lt;&#x2F;view&gt;&lt;&#x2F;view&gt;<span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre><p>index.wxss样式文件：</p><pre class="line-numbers language-css" data-language="css"><code class="language-css"><span class="token selector">.operateButtons</span><span class="token punctuation">&#123;</span>  <span class="token property">display</span><span class="token punctuation">:</span> grid<span class="token punctuation">;</span>  <span class="token property">grid-template-columns</span><span class="token punctuation">:</span> <span class="token function">calc</span><span class="token punctuation">(</span>100% - 50% - 10rpx<span class="token punctuation">)</span> <span class="token function">calc</span><span class="token punctuation">(</span>100% - 50% - 10rpx<span class="token punctuation">)</span><span class="token punctuation">;</span>  <span class="token property">grid-column-gap</span><span class="token punctuation">:</span> 20rpx<span class="token punctuation">;</span><span class="token punctuation">&#125;</span><span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span></span></code></pre><p>效果：</p><p><img src="https://cdn.jsdelivr.net/gh/aibittek/ImageHost/img/image-20210124162127818.png" alt="image-20210124162127818"></p><p>把两个按钮靠手机底部放置，让用户更加容易点击：</p><p>index.wxml布局文件：</p><pre class="line-numbers language-xml" data-language="xml"><code class="language-xml"><span class="token comment">&lt;!--index.wxml--></span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>view</span> <span class="token attr-name">class</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">'</span>bg<span class="token punctuation">'</span></span><span class="token punctuation">></span></span>  <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>image</span> <span class="token attr-name">src</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">'</span>/images/welcome.png<span class="token punctuation">'</span></span><span class="token punctuation">></span></span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>image</span><span class="token punctuation">></span></span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>view</span><span class="token punctuation">></span></span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>view</span> <span class="token attr-name">class</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>operationDIV<span class="token punctuation">"</span></span> <span class="token attr-name">style</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>bottom:50rpx<span class="token punctuation">"</span></span><span class="token punctuation">></span></span>  <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>view</span> <span class="token attr-name">class</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>operateButtons<span class="token punctuation">"</span></span><span class="token punctuation">></span></span>    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>view</span> <span class="token attr-name">class</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>photo<span class="token punctuation">"</span></span> <span class="token attr-name">bindtap</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>photo<span class="token punctuation">"</span></span><span class="token punctuation">></span></span>      <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>image</span> <span class="token attr-name">class</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>photoImg<span class="token punctuation">"</span></span> <span class="token attr-name">src</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>/images/photo.png<span class="token punctuation">"</span></span> <span class="token attr-name">style</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">'</span>width:60rpx; height=60rpx<span class="token punctuation">'</span></span> <span class="token attr-name">mode</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">'</span>aspectFit<span class="token punctuation">'</span></span><span class="token punctuation">></span></span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>image</span><span class="token punctuation">></span></span>      <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>view</span> <span class="token attr-name">class</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>cst<span class="token punctuation">"</span></span><span class="token punctuation">></span></span>        <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>view</span> <span class="token attr-name">class</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>t1<span class="token punctuation">"</span></span><span class="token punctuation">></span></span>相册<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>view</span><span class="token punctuation">></span></span>        <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>view</span> <span class="token attr-name">class</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>t2<span class="token punctuation">"</span></span><span class="token punctuation">></span></span>从相册选择<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>view</span><span class="token punctuation">></span></span>      <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>view</span><span class="token punctuation">></span></span>    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>view</span><span class="token punctuation">></span></span>    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>view</span> <span class="token attr-name">class</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>camera<span class="token punctuation">"</span></span> <span class="token attr-name">bindtap</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>camera<span class="token punctuation">"</span></span><span class="token punctuation">></span></span>      <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>image</span> <span class="token attr-name">class</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>cameraImg<span class="token punctuation">"</span></span>  <span class="token attr-name">src</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>/images/camera.png<span class="token punctuation">"</span></span> <span class="token attr-name">style</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">'</span>width:60rpx; height=60rpx<span class="token punctuation">'</span></span> <span class="token attr-name">mode</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">'</span>aspectFit<span class="token punctuation">'</span></span><span class="token punctuation">></span></span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>image</span><span class="token punctuation">></span></span>      <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>view</span> <span class="token attr-name">class</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>cst<span class="token punctuation">"</span></span><span class="token punctuation">></span></span>        <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>view</span> <span class="token attr-name">class</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>t1<span class="token punctuation">"</span></span><span class="token punctuation">></span></span>相机<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>view</span><span class="token punctuation">></span></span>        <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>view</span> <span class="token attr-name">class</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>t2<span class="token punctuation">"</span></span><span class="token punctuation">></span></span>拍照扫描<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>view</span><span class="token punctuation">></span></span>      <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>view</span><span class="token punctuation">></span></span>    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>view</span><span class="token punctuation">></span></span>  <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>view</span><span class="token punctuation">></span></span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>view</span><span class="token punctuation">></span></span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>view</span> <span class="token attr-name">class</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>bccDIV<span class="token punctuation">"</span></span><span class="token punctuation">></span></span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>view</span><span class="token punctuation">></span></span><span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre><p>index.wxss样式文件：</p><pre class="line-numbers language-css" data-language="css"><code class="language-css"><span class="token comment">/**index.wxss**/</span><span class="token selector">page</span> <span class="token punctuation">&#123;</span>  <span class="token property">background-color</span><span class="token punctuation">:</span> #448AFF<span class="token punctuation">;</span><span class="token punctuation">&#125;</span><span class="token selector">.bg</span> <span class="token punctuation">&#123;</span>  <span class="token property">display</span><span class="token punctuation">:</span> flex<span class="token punctuation">;</span>  <span class="token property">align-items</span><span class="token punctuation">:</span> center<span class="token punctuation">;</span>  <span class="token property">justify-content</span><span class="token punctuation">:</span> center<span class="token punctuation">;</span>  <span class="token property">height</span><span class="token punctuation">:</span> 750rpx<span class="token punctuation">;</span>  <span class="token property">margin-left</span><span class="token punctuation">:</span> 20rpx<span class="token punctuation">;</span>  <span class="token property">margin-right</span><span class="token punctuation">:</span> 20rpx<span class="token punctuation">;</span>  <span class="token property">border-radius</span><span class="token punctuation">:</span> 10rpx<span class="token punctuation">;</span>  <span class="token comment">/* border: 1px solid green; */</span><span class="token punctuation">&#125;</span><span class="token selector">.operationDIV</span> <span class="token punctuation">&#123;</span>  <span class="token property">position</span><span class="token punctuation">:</span> fixed<span class="token punctuation">;</span>  <span class="token property">height</span><span class="token punctuation">:</span> 200rpx<span class="token punctuation">;</span>  <span class="token property">left</span><span class="token punctuation">:</span> 30rpx<span class="token punctuation">;</span>  <span class="token property">right</span><span class="token punctuation">:</span> 30rpx<span class="token punctuation">;</span>  <span class="token property">z-index</span><span class="token punctuation">:</span> 99<span class="token punctuation">;</span>  <span class="token comment">/* border: 1px solid green; */</span><span class="token punctuation">&#125;</span><span class="token selector">.operationDIV .operateButtons</span><span class="token punctuation">&#123;</span>  <span class="token property">display</span><span class="token punctuation">:</span> grid<span class="token punctuation">;</span>  <span class="token property">grid-template-columns</span><span class="token punctuation">:</span> <span class="token function">calc</span><span class="token punctuation">(</span>100% - 50% - 10rpx<span class="token punctuation">)</span> <span class="token function">calc</span><span class="token punctuation">(</span>100% - 50% - 10rpx<span class="token punctuation">)</span><span class="token punctuation">;</span>  <span class="token property">grid-column-gap</span><span class="token punctuation">:</span> 20rpx<span class="token punctuation">;</span><span class="token punctuation">&#125;</span><span class="token selector">.operationDIV .photoImg</span> <span class="token punctuation">&#123;</span>  <span class="token property">margin</span><span class="token punctuation">:</span> 0 20rpx 0 40rpx<span class="token punctuation">;</span>  <span class="token property">width</span><span class="token punctuation">:</span> 60rpx<span class="token punctuation">;</span><span class="token punctuation">&#125;</span><span class="token selector">.operationDIV .cameraImg</span> <span class="token punctuation">&#123;</span>  <span class="token property">margin</span><span class="token punctuation">:</span> 0 20rpx 0 40rpx<span class="token punctuation">;</span>  <span class="token property">width</span><span class="token punctuation">:</span> 60rpx<span class="token punctuation">;</span><span class="token punctuation">&#125;</span><span class="token selector">.operationDIV .photo</span> <span class="token punctuation">&#123;</span>  <span class="token property">display</span><span class="token punctuation">:</span> flex<span class="token punctuation">;</span>  <span class="token property">height</span><span class="token punctuation">:</span> 150rpx<span class="token punctuation">;</span>    <span class="token property">align-items</span><span class="token punctuation">:</span> center<span class="token punctuation">;</span>  <span class="token property">border-radius</span><span class="token punctuation">:</span> 5px<span class="token punctuation">;</span>    <span class="token property">background-color</span><span class="token punctuation">:</span> #FFF<span class="token punctuation">;</span>  <span class="token property">box-shadow</span><span class="token punctuation">:</span> 0px 0px 10px #00000018<span class="token punctuation">;</span><span class="token punctuation">&#125;</span><span class="token selector">.operationDIV .camera</span><span class="token punctuation">&#123;</span>  <span class="token property">display</span><span class="token punctuation">:</span> flex<span class="token punctuation">;</span>  <span class="token property">height</span><span class="token punctuation">:</span> 150rpx<span class="token punctuation">;</span>  <span class="token property">align-items</span><span class="token punctuation">:</span> center<span class="token punctuation">;</span>  <span class="token property">border-radius</span><span class="token punctuation">:</span> 5px<span class="token punctuation">;</span>    <span class="token property">background-color</span><span class="token punctuation">:</span> #FFF<span class="token punctuation">;</span>  <span class="token property">box-shadow</span><span class="token punctuation">:</span> 0px 0px 10px #00000018<span class="token punctuation">;</span><span class="token punctuation">&#125;</span><span class="token selector">.operationDIV .t1</span> <span class="token punctuation">&#123;</span>  <span class="token property">font-weight</span><span class="token punctuation">:</span> bold<span class="token punctuation">;</span>  <span class="token property">font-size</span><span class="token punctuation">:</span> 30rpx<span class="token punctuation">;</span>  <span class="token property">color</span><span class="token punctuation">:</span> #333<span class="token punctuation">;</span><span class="token punctuation">&#125;</span><span class="token selector">.operationDIV .t2</span> <span class="token punctuation">&#123;</span>  <span class="token property">font-size</span><span class="token punctuation">:</span> 28rpx<span class="token punctuation">;</span>  <span class="token property">color</span><span class="token punctuation">:</span> #999999<span class="token punctuation">;</span><span class="token punctuation">&#125;</span><span class="token selector">.bccDIV</span><span class="token punctuation">&#123;</span>  <span class="token property">position</span><span class="token punctuation">:</span> fixed<span class="token punctuation">;</span>    <span class="token property">height</span><span class="token punctuation">:</span> 200rpx<span class="token punctuation">;</span>  <span class="token property">left</span><span class="token punctuation">:</span> 0<span class="token punctuation">;</span>  <span class="token property">right</span><span class="token punctuation">:</span> 0<span class="token punctuation">;</span>  <span class="token property">bottom</span><span class="token punctuation">:</span> 0<span class="token punctuation">;</span>  <span class="token property">background-color</span><span class="token punctuation">:</span> <span class="token function">rgb</span><span class="token punctuation">(</span>240<span class="token punctuation">,</span> 240<span class="token punctuation">,</span> 240<span class="token punctuation">)</span><span class="token punctuation">;</span>  <span class="token property">z-index</span><span class="token punctuation">:</span> 90<span class="token punctuation">;</span><span class="token punctuation">&#125;</span><span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre><p>最后的效果如下：</p><p><img src="https://cdn.jsdelivr.net/gh/aibittek/ImageHost/img/image-20210124162601928.png" alt="image-20210124162601928"></p><h4 id="让按钮可以触发事件"><a href="#让按钮可以触发事件" class="headerlink" title="让按钮可以触发事件"></a>让按钮可以触发事件</h4><p>使用bingtap属性给wxml中的view添加点击事件，语法如下：</p><pre class="line-numbers language-xml" data-language="xml"><code class="language-xml"><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>view</span> <span class="token attr-name">class</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>photo<span class="token punctuation">"</span></span> <span class="token attr-name">bindtap</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>photo<span class="token punctuation">"</span></span><span class="token punctuation">></span></span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>view</span> <span class="token attr-name">class</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>camera<span class="token punctuation">"</span></span> <span class="token attr-name">bindtap</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>camera<span class="token punctuation">"</span></span><span class="token punctuation">></span></span><span aria-hidden="true" class="line-numbers-rows"><span></span><span></span></span></code></pre><p>这样就赋予了class为photo和camera的view具备了点击的能力，当按钮被单击时，会去执行bingtap指定的photo和camera方法。</p><p>在index.js中增加两个函数，当点击相册和相机按钮时，观察console中是否有相关的日志信息。</p><pre class="line-numbers language-js" data-language="js"><code class="language-js"><span class="token function">photo</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">&#123;</span>console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span><span class="token string">'photo'</span><span class="token punctuation">)</span><span class="token punctuation">&#125;</span><span class="token punctuation">,</span><span class="token function">camera</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">&#123;</span>console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span><span class="token string">'camera'</span><span class="token punctuation">)</span><span class="token punctuation">&#125;</span><span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre><p>点击两个按钮，console显示的结果信息：</p><p><img src="https://cdn.jsdelivr.net/gh/aibittek/ImageHost/img/image-20210124163213292.png" alt="image-20210124163213292"></p><h2 id="软件框架与功能"><a href="#软件框架与功能" class="headerlink" title="软件框架与功能"></a>软件框架与功能</h2><h3 id="功能模块"><a href="#功能模块" class="headerlink" title="功能模块"></a>功能模块</h3><p>根据之前体验的内容，大致可以把用户的操作分为四个模块部分：</p><ol><li> 打开相册选择图片</li><li> 把图片上传给讯飞服务器识别</li><li> 服务器返回识别结果</li><li> 绘制识别结果并显示</li></ol><p><img src="https://cdn.jsdelivr.net/gh/aibittek/ImageHost/img/image-20210124190753082.png" alt="image-20210124190753082"></p><p>整体的功能流程如下：</p><p><img src="https://cdn.jsdelivr.net/gh/aibittek/ImageHost/img/image-20210124193117306.png" alt="image-20210124193117306"></p><h3 id="技能图"><a href="#技能图" class="headerlink" title="技能图"></a>技能图</h3><p>要完成整体功能，需要的技能如下，也可以通过以下的链接实时查看。</p><p><a href="https://kdocs.cn/l/sbvLWu1HUzXZ" rel="external nofollow noreferrer">静态技能思维导图-拍拍题小程序</a></p><p><img src="https://cdn.jsdelivr.net/gh/aibittek/ImageHost/img/image-20210122145027362.png" alt="image-20210122145027362"></p><h3 id="Button事件处理技能"><a href="#Button事件处理技能" class="headerlink" title="Button事件处理技能"></a>Button事件处理技能</h3><p>点击界面的按钮一般都需要触发相关的事件，点击按钮和触发相关的事件联系演示如下。</p><p>详细信息可以参考微信<a href="https://developers.weixin.qq.com/miniprogram/dev/component/button.html" rel="external nofollow noreferrer">官方文档</a>。</p><p><strong>创建一个按钮</strong></p><p>打开index.wxml文件，增加以下一行</p><pre class="line-numbers language-html" data-language="html"><code class="language-html"><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>button</span> <span class="token attr-name">class</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">'</span>button<span class="token punctuation">'</span></span> <span class="token attr-name">type</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">'</span>primary<span class="token punctuation">'</span></span> <span class="token attr-name">bindtap</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">'</span>click<span class="token punctuation">'</span></span><span class="token punctuation">></span></span>按钮<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>button</span><span class="token punctuation">></span></span><span aria-hidden="true" class="line-numbers-rows"><span></span></span></code></pre><p>显示结果：</p><p><img src="https://cdn.jsdelivr.net/gh/aibittek/ImageHost/img/image-20210122150503841.png" alt="image-20210122150503841"></p><p>以上说明：</p><pre class="line-numbers language-none"><code class="language-none">&lt;button&gt;&lt;&#x2F;button&gt;：表示一个按钮；&lt;button&gt;按钮&lt;&#x2F;button&gt;：按钮显示的文本；class可以在样式文件中引用，从而改变按钮的样式；type表示按钮显示的颜色；bingtap表示按钮单击时，会触发的行为动作为click<span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span></span></code></pre><p><strong>创建按钮的样式</strong></p><p>如果对按钮在画面中的位置样式等有调整，可以在<a href="https://developers.weixin.qq.com/miniprogram/dev/framework/view/wxss.html" rel="external nofollow noreferrer">wxss</a>中修改，并查看所有支持的内容。</p><p>由于微信的wxss文件参考css文件格式，可以通过<a href="https://www.runoob.com/css/css-tutorial.html" rel="external nofollow noreferrer">css教程</a>查看对应的内容。</p><p>打开index.wxss文件，增加以下内容并Ctrl+s保存，观察界面的变化：</p><pre class="line-numbers language-css" data-language="css"><code class="language-css"><span class="token selector">button</span><span class="token punctuation">&#123;</span>    <span class="token property">position</span><span class="token punctuation">:</span>absolute<span class="token punctuation">;</span>    <span class="token property">left</span><span class="token punctuation">:</span>100px<span class="token punctuation">;</span>    <span class="token property">top</span><span class="token punctuation">:</span>150px<span class="token punctuation">;</span><span class="token punctuation">&#125;</span><span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span></span></code></pre><p><strong>给按钮绑定处理事件</strong></p><p>打开index.js文件，增加click()方法</p><pre class="line-numbers language-javascript" data-language="javascript"><code class="language-javascript"><span class="token function">click</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">&#123;</span>    console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span><span class="token string">'The button is clicked'</span><span class="token punctuation">)</span><span class="token punctuation">&#125;</span><span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span></span></code></pre><p><img src="https://cdn.jsdelivr.net/gh/aibittek/ImageHost/img/image-20210122155507761.png" alt="image-20210122155507761"></p><h3 id="图片处理技能"><a href="#图片处理技能" class="headerlink" title="图片处理技能"></a>图片处理技能</h3><h4 id="chooseImage"><a href="#chooseImage" class="headerlink" title="chooseImage"></a>chooseImage</h4><p><a href="https://developers.weixin.qq.com/miniprogram/dev/api/media/image/wx.chooseImage.html" rel="external nofollow noreferrer">原型</a>：从本地相册选择图片或使用相机拍照。</p><pre class="line-numbers language-none"><code class="language-none">wx.chooseImage(Object object)<span aria-hidden="true" class="line-numbers-rows"><span></span></span></code></pre><p>示例：count是最多可以选择的图片张数，最多9张，sizeType是所选的图片的尺寸，sourceType选择图片的来源。返回值res.tempFilePaths是图片的本地临时文件路径列表 (本地路径)</p><pre class="line-numbers language-js" data-language="js"><code class="language-js">wx<span class="token punctuation">.</span><span class="token function">chooseImage</span><span class="token punctuation">(</span><span class="token punctuation">&#123;</span>  count<span class="token operator">:</span> <span class="token number">1</span><span class="token punctuation">,</span>  sizeType<span class="token operator">:</span> <span class="token punctuation">[</span><span class="token string">'original'</span><span class="token punctuation">,</span> <span class="token string">'compressed'</span><span class="token punctuation">]</span><span class="token punctuation">,</span>  sourceType<span class="token operator">:</span> <span class="token punctuation">[</span><span class="token string">'album'</span><span class="token punctuation">,</span> <span class="token string">'camera'</span><span class="token punctuation">]</span><span class="token punctuation">,</span>  <span class="token function">success</span> <span class="token punctuation">(</span><span class="token parameter">res</span><span class="token punctuation">)</span> <span class="token punctuation">&#123;</span>    <span class="token comment">// tempFilePath可以作为img标签的src属性显示图片</span>    <span class="token keyword">const</span> tempFilePaths <span class="token operator">=</span> res<span class="token punctuation">.</span>tempFilePaths  <span class="token punctuation">&#125;</span><span class="token punctuation">&#125;</span><span class="token punctuation">)</span><span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre><h4 id="getImageInfo"><a href="#getImageInfo" class="headerlink" title="getImageInfo"></a>getImageInfo</h4><p><a href="https://developers.weixin.qq.com/miniprogram/dev/api/media/image/wx.getImageInfo.html" rel="external nofollow noreferrer">原型</a>：获取图片信息。网络图片需先配置download域名才能生效。</p><pre class="line-numbers language-none"><code class="language-none">wx.getImageInfo(Object object)<span aria-hidden="true" class="line-numbers-rows"><span></span></span></code></pre><p>示例：src是图片的路径，支持网络路径、本地路径、代码包路径，返回值res.width是图片原始宽度，单位px，res.height是图片原始高度，单位px。</p><pre class="line-numbers language-js" data-language="js"><code class="language-js">wx<span class="token punctuation">.</span><span class="token function">getImageInfo</span><span class="token punctuation">(</span><span class="token punctuation">&#123;</span>  src<span class="token operator">:</span> <span class="token string">'images/a.jpg'</span><span class="token punctuation">,</span>  <span class="token function">success</span> <span class="token punctuation">(</span><span class="token parameter">res</span><span class="token punctuation">)</span> <span class="token punctuation">&#123;</span>    console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span>res<span class="token punctuation">.</span>width<span class="token punctuation">)</span>    console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span>res<span class="token punctuation">.</span>height<span class="token punctuation">)</span>  <span class="token punctuation">&#125;</span><span class="token punctuation">&#125;</span><span class="token punctuation">)</span>wx<span class="token punctuation">.</span><span class="token function">chooseImage</span><span class="token punctuation">(</span><span class="token punctuation">&#123;</span>  <span class="token function">success</span> <span class="token punctuation">(</span><span class="token parameter">res</span><span class="token punctuation">)</span> <span class="token punctuation">&#123;</span>    wx<span class="token punctuation">.</span><span class="token function">getImageInfo</span><span class="token punctuation">(</span><span class="token punctuation">&#123;</span>      src<span class="token operator">:</span> res<span class="token punctuation">.</span>tempFilePaths<span class="token punctuation">[</span><span class="token number">0</span><span class="token punctuation">]</span><span class="token punctuation">,</span>      <span class="token function">success</span> <span class="token punctuation">(</span><span class="token parameter">res</span><span class="token punctuation">)</span> <span class="token punctuation">&#123;</span>        console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span>res<span class="token punctuation">.</span>width<span class="token punctuation">)</span>        console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span>res<span class="token punctuation">.</span>height<span class="token punctuation">)</span>      <span class="token punctuation">&#125;</span>    <span class="token punctuation">&#125;</span><span class="token punctuation">)</span>  <span class="token punctuation">&#125;</span><span class="token punctuation">&#125;</span><span class="token punctuation">)</span><span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre><p><a href="https://developers.weixin.qq.com/s/Kd47Sbmr6yYu" rel="external nofollow noreferrer">在开发者工具中预览效果</a></p><h4 id="readFile"><a href="#readFile" class="headerlink" title="readFile"></a>readFile</h4><p><a href="https://developers.weixin.qq.com/miniprogram/dev/api/file/FileSystemManager.readFile.html" rel="external nofollow noreferrer">原型</a>：读取本地文件内容</p><pre class="line-numbers language-none"><code class="language-none">FileSystemManager.readFile(Object object)<span aria-hidden="true" class="line-numbers-rows"><span></span></span></code></pre><p>示例：其中filePath是要读取的文件的路径 (本地路径)，encoding指定读取文件的字符编码，如果不传 encoding，则以 ArrayBuffer 格式读取文件的二进制内容</p><pre class="line-numbers language-js" data-language="js"><code class="language-js">wx<span class="token punctuation">.</span><span class="token function">getFileSystemManager</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">readFile</span><span class="token punctuation">(</span><span class="token punctuation">&#123;</span>    filePath<span class="token operator">:</span> photo<span class="token punctuation">,</span>    encoding<span class="token operator">:</span> <span class="token string">'base64'</span><span class="token punctuation">,</span>    <span class="token function">success</span><span class="token punctuation">(</span><span class="token parameter">res</span><span class="token punctuation">)</span> <span class="token punctuation">&#123;</span>    <span class="token punctuation">&#125;</span><span class="token punctuation">,</span>    <span class="token function">fail</span><span class="token punctuation">(</span><span class="token parameter">res</span><span class="token punctuation">)</span> <span class="token punctuation">&#123;</span>    <span class="token punctuation">&#125;</span><span class="token punctuation">&#125;</span><span class="token punctuation">)</span><span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre><h4 id="saveImageToPhotosAlbum"><a href="#saveImageToPhotosAlbum" class="headerlink" title="saveImageToPhotosAlbum"></a>saveImageToPhotosAlbum</h4><p><a href="https://developers.weixin.qq.com/miniprogram/dev/api/media/image/wx.saveImageToPhotosAlbum.html" rel="external nofollow noreferrer">原型</a>：保存图片到系统相册</p><p>示例：其中url必须是图片文件路径，可以是临时文件路径或永久文件路径 (本地路径) ，不支持网络路径</p><pre class="line-numbers language-js" data-language="js"><code class="language-js">wx<span class="token punctuation">.</span><span class="token function">saveImageToPhotosAlbum</span><span class="token punctuation">(</span><span class="token punctuation">&#123;</span>    filePath<span class="token operator">:</span> <span class="token string">'url'</span><span class="token punctuation">,</span>    <span class="token function">success</span><span class="token punctuation">(</span><span class="token parameter">res</span><span class="token punctuation">)</span> <span class="token punctuation">&#123;</span>        wx<span class="token punctuation">.</span><span class="token function">showModal</span><span class="token punctuation">(</span><span class="token punctuation">&#123;</span>            content<span class="token operator">:</span> <span class="token string">'图片已保存到相册，去晒一下吧~'</span><span class="token punctuation">,</span>            showCancel<span class="token operator">:</span> <span class="token boolean">false</span><span class="token punctuation">,</span>            confirmText<span class="token operator">:</span> <span class="token string">'好哒'</span><span class="token punctuation">,</span>            confirmColor<span class="token operator">:</span> <span class="token string">'#72B9C3'</span><span class="token punctuation">,</span>            <span class="token function-variable function">success</span><span class="token operator">:</span> <span class="token keyword">function</span> <span class="token punctuation">(</span><span class="token parameter">res</span><span class="token punctuation">)</span> <span class="token punctuation">&#123;</span>                <span class="token keyword">if</span> <span class="token punctuation">(</span>res<span class="token punctuation">.</span>confirm<span class="token punctuation">)</span> <span class="token punctuation">&#123;</span>                    console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span><span class="token string">'用户点击确定'</span><span class="token punctuation">)</span><span class="token punctuation">;</span>                <span class="token punctuation">&#125;</span>            <span class="token punctuation">&#125;</span>        <span class="token punctuation">&#125;</span><span class="token punctuation">)</span>    <span class="token punctuation">&#125;</span><span class="token punctuation">&#125;</span><span class="token punctuation">)</span><span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre><h3 id="小程序同步处理Promise和then"><a href="#小程序同步处理Promise和then" class="headerlink" title="小程序同步处理Promise和then"></a>小程序同步处理Promise和then</h3><p>Promise是JavaScript的内置对象，then属于Promise的方法，then：Promise.prototype.then()</p><p>Promise如同它的本身含义，保证Promise内的代码执行完毕，才会执行then内的代码。也可以简单理解为then是Promise的回调函数，resolve表示成功的回调，reject表示失败的回调。</p><p>示例代码：</p><pre class="line-numbers language-js" data-language="js"><code class="language-js"><span class="token keyword">new</span> <span class="token class-name">Promise</span><span class="token punctuation">(</span><span class="token punctuation">(</span><span class="token parameter">resolve<span class="token punctuation">,</span> reject</span><span class="token punctuation">)</span> <span class="token operator">=></span> <span class="token punctuation">&#123;</span><span class="token function">resolve</span><span class="token punctuation">(</span><span class="token string">"Promise"</span><span class="token punctuation">)</span><span class="token punctuation">&#125;</span><span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">then</span><span class="token punctuation">(</span><span class="token punctuation">(</span><span class="token parameter">result</span><span class="token punctuation">)</span> <span class="token operator">=></span> <span class="token punctuation">&#123;</span>console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span><span class="token string">"then result:"</span> <span class="token operator">+</span> result<span class="token punctuation">)</span><span class="token punctuation">&#125;</span><span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">catch</span><span class="token punctuation">(</span><span class="token punctuation">(</span><span class="token parameter">err</span><span class="token punctuation">)</span> <span class="token operator">=></span> <span class="token punctuation">&#123;</span>console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span><span class="token string">"then err:"</span> <span class="token operator">+</span> err<span class="token punctuation">)</span><span class="token punctuation">&#125;</span><span class="token punctuation">)</span><span class="token punctuation">;</span><span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre><p>结果，调用reject会得到另一个结果：</p><pre class="line-numbers language-js" data-language="js"><code class="language-js">then result<span class="token operator">:</span>Promise<span aria-hidden="true" class="line-numbers-rows"><span></span></span></code></pre><h3 id="加解密模块"><a href="#加解密模块" class="headerlink" title="加解密模块"></a>加解密模块</h3><p>加解密模块使用谷歌开源的CryptoJs模块，功能强大，包含很多的前端解密算法。</p><p><a href="https://github.com/brix/crypto-js/releases" rel="external nofollow noreferrer">Github下载地址</a>或者使用提供的lib目录下的crypto-js-4.0.0.zip</p><p>解压之后放到utils目录下，如下：</p><p><img src="https://cdn.jsdelivr.net/gh/aibittek/ImageHost/img/image-20210118102547915.png" alt="image-20210118102547915"></p><p><strong>注意</strong>，使用前需要导入这个包：</p><pre class="line-numbers language-js" data-language="js"><code class="language-js"><span class="token keyword">const</span> CryptoJS <span class="token operator">=</span> <span class="token function">require</span><span class="token punctuation">(</span><span class="token string">'utils/crypto-js/crypto-js.js'</span><span class="token punctuation">)</span><span class="token punctuation">;</span><span aria-hidden="true" class="line-numbers-rows"><span></span></span></code></pre><p>以下所有的加解密的结果，都可以在<a href="http://www.bejson.com/%E8%BF%9B%E8%A1%8C%E7%BB%93%E6%9E%9C%E7%9A%84%E9%AA%8C%E8%AF%81%E3%80%82" rel="external nofollow noreferrer">http://www.bejson.com/进行结果的验证。</a></p><h4 id="base64加解密"><a href="#base64加解密" class="headerlink" title="base64加解密"></a>base64加解密</h4><p>加密示例：</p><pre class="line-numbers language-js" data-language="js"><code class="language-js"><span class="token keyword">let</span> base64encode <span class="token operator">=</span> CryptoJS<span class="token punctuation">.</span>enc<span class="token punctuation">.</span>Base64<span class="token punctuation">.</span><span class="token function">stringify</span><span class="token punctuation">(</span>CryptoJS<span class="token punctuation">.</span>enc<span class="token punctuation">.</span>Utf8<span class="token punctuation">.</span><span class="token function">parse</span><span class="token punctuation">(</span><span class="token string">'待加密字符串'</span><span class="token punctuation">)</span><span class="token punctuation">)</span>console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span>base64encode<span class="token punctuation">)</span><span aria-hidden="true" class="line-numbers-rows"><span></span><span></span></span></code></pre><p>解密示例：</p><pre class="line-numbers language-js" data-language="js"><code class="language-js"><span class="token keyword">let</span> base64decode <span class="token operator">=</span> CryptoJS<span class="token punctuation">.</span>enc<span class="token punctuation">.</span>Base64<span class="token punctuation">.</span><span class="token function">parse</span><span class="token punctuation">(</span><span class="token string">"5b6F5Yqg5a+G5a2X56ym5Liy"</span><span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">toString</span><span class="token punctuation">(</span>CryptoJS<span class="token punctuation">.</span>enc<span class="token punctuation">.</span>Utf8<span class="token punctuation">)</span>console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span>base64decode<span class="token punctuation">)</span><span aria-hidden="true" class="line-numbers-rows"><span></span><span></span></span></code></pre><h4 id="sha256加密"><a href="#sha256加密" class="headerlink" title="sha256加密"></a>sha256加密</h4><p>加密示例：</p><pre class="line-numbers language-js" data-language="js"><code class="language-js"><span class="token keyword">let</span> sha256 <span class="token operator">=</span> CryptoJS<span class="token punctuation">.</span><span class="token constant">SHA256</span><span class="token punctuation">(</span><span class="token string">'待加密字符串'</span><span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">toString</span><span class="token punctuation">(</span><span class="token punctuation">)</span>console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span>sha256<span class="token punctuation">)</span><span aria-hidden="true" class="line-numbers-rows"><span></span><span></span></span></code></pre><h4 id="hmac256加密"><a href="#hmac256加密" class="headerlink" title="hmac256加密"></a>hmac256加密</h4><p>调用方法，CryptoJS.HmacSHA256需要两个参数，第一个参数是需要加密的数据，第二个参数是加密的key。</p><pre class="line-numbers language-js" data-language="js"><code class="language-js"><span class="token keyword">let</span> hmacsha256 <span class="token operator">=</span> CryptoJS<span class="token punctuation">.</span><span class="token function">HmacSHA256</span><span class="token punctuation">(</span><span class="token string">"123456"</span><span class="token punctuation">,</span> <span class="token string">"123456"</span><span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">toString</span><span class="token punctuation">(</span><span class="token punctuation">)</span>console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span>hmacsha256<span class="token punctuation">)</span><span aria-hidden="true" class="line-numbers-rows"><span></span><span></span></span></code></pre><h3 id="Json数据模块"><a href="#Json数据模块" class="headerlink" title="Json数据模块"></a>Json数据模块</h3><p>JSON: <strong>J</strong>ava<strong>S</strong>cript <strong>O</strong>bject <strong>N</strong>otation(JavaScript 对象表示法)</p><p>JSON 是存储和交换文本信息的语法，类似 XML。</p><p>JSON 比 XML 更小、更快，更易解析。</p><p>JSON 语法是 JavaScript 对象表示语法的子集。</p><ul><li>  数据在名称/值对中</li><li>  数据由逗号分隔</li><li>  大括号 <strong>{}</strong> 保存对象</li><li>  中括号 <strong>[]</strong> 保存数组，数组可以包含多个对象</li></ul><p>一个简单的Json字符串例子：</p><pre class="line-numbers language-json" data-language="json"><code class="language-json"><span class="token punctuation">&#123;</span><span class="token property">"name"</span><span class="token operator">:</span> <span class="token string">"tupaipai"</span><span class="token punctuation">&#125;</span><span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span></span></code></pre><p><strong>Json序列化和反序列化</strong></p><p>序列化是把代码中的数据key : value转化为Json字符串的过程，反序列化相反，下面看一个例子：</p><pre class="line-numbers language-json" data-language="json"><code class="language-json">var jsonData = '<span class="token punctuation">&#123;</span> <span class="token property">"name"</span><span class="token operator">:</span> <span class="token string">"tupaipai"</span> <span class="token punctuation">&#125;</span>'var jsonParse = JSON.parse(jsonData)console.log(jsonParse.name)var jsonString = JSON.stringify(jsonParse)console.log(jsonString)<span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre><p>打印结果：</p><pre class="line-numbers language-json" data-language="json"><code class="language-json">tupaipai<span class="token punctuation">&#123;</span><span class="token property">"name"</span><span class="token operator">:</span><span class="token string">"tupaipai"</span><span class="token punctuation">&#125;</span><span aria-hidden="true" class="line-numbers-rows"><span></span><span></span></span></code></pre><h3 id="网络模块"><a href="#网络模块" class="headerlink" title="网络模块"></a>网络模块</h3><p>原型：发起 HTTPS 网络请求。</p><pre class="line-numbers language-none"><code class="language-none">wx.request(Object object)<span aria-hidden="true" class="line-numbers-rows"><span></span></span></code></pre><p>示例：</p><pre class="line-numbers language-js" data-language="js"><code class="language-js">wx<span class="token punctuation">.</span><span class="token function">request</span><span class="token punctuation">(</span><span class="token punctuation">&#123;</span>  url<span class="token operator">:</span> <span class="token string">'https://www.baidu.com'</span><span class="token punctuation">,</span>  <span class="token function">success</span> <span class="token punctuation">(</span><span class="token parameter">res</span><span class="token punctuation">)</span> <span class="token punctuation">&#123;</span>    console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span>res<span class="token punctuation">.</span>data<span class="token punctuation">)</span>  <span class="token punctuation">&#125;</span><span class="token punctuation">&#125;</span><span class="token punctuation">)</span><span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre><p>demo：访问百度网页，并得到网内容并展示</p><pre class="line-numbers language-js" data-language="js"><code class="language-js">wx<span class="token punctuation">.</span><span class="token function">request</span><span class="token punctuation">(</span><span class="token punctuation">&#123;</span>    url<span class="token operator">:</span> <span class="token string">'http://www.baidu.com'</span><span class="token punctuation">,</span>    <span class="token function">success</span><span class="token punctuation">(</span><span class="token parameter">res</span><span class="token punctuation">)</span> <span class="token punctuation">&#123;</span>        wx<span class="token punctuation">.</span><span class="token function">getFileSystemManager</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">writeFile</span><span class="token punctuation">(</span><span class="token punctuation">&#123;</span>            filePath<span class="token operator">:</span> <span class="token template-string"><span class="token template-punctuation string">`</span><span class="token interpolation"><span class="token interpolation-punctuation punctuation">$&#123;</span>wx<span class="token punctuation">.</span>env<span class="token punctuation">.</span><span class="token constant">USER_DATA_PATH</span><span class="token interpolation-punctuation punctuation">&#125;</span></span><span class="token string">/index.html</span><span class="token template-punctuation string">`</span></span><span class="token punctuation">,</span>            data<span class="token operator">:</span> res<span class="token punctuation">.</span>data<span class="token punctuation">,</span>            <span class="token function">success</span><span class="token punctuation">(</span><span class="token parameter">result</span><span class="token punctuation">)</span> <span class="token punctuation">&#123;</span>                console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span><span class="token template-string"><span class="token template-punctuation string">`</span><span class="token interpolation"><span class="token interpolation-punctuation punctuation">$&#123;</span>wx<span class="token punctuation">.</span>env<span class="token punctuation">.</span><span class="token constant">USER_DATA_PATH</span><span class="token interpolation-punctuation punctuation">&#125;</span></span><span class="token string">/index.html</span><span class="token template-punctuation string">`</span></span><span class="token punctuation">)</span>            <span class="token punctuation">&#125;</span>        <span class="token punctuation">&#125;</span><span class="token punctuation">)</span>    <span class="token punctuation">&#125;</span><span class="token punctuation">&#125;</span><span class="token punctuation">)</span><span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre><p>通过console打印的信息栏里，点击打开<a href="http://usr/index.html%EF%BC%8C%E6%98%BE%E7%A4%BA%E5%A6%82%E4%B8%8B%EF%BC%9A" rel="external nofollow noreferrer">http://usr/index.html，显示如下：</a></p><p><img src="https://cdn.jsdelivr.net/gh/aibittek/ImageHost/img/image-20210122175426778.png" alt="image-20210122175426778"></p><h3 id="其他模块"><a href="#其他模块" class="headerlink" title="其他模块"></a>其他模块</h3><h4 id="时间"><a href="#时间" class="headerlink" title="时间"></a>时间</h4><p>获取GMT时间</p><pre class="line-numbers language-js" data-language="js"><code class="language-js"><span class="token keyword">let</span> date <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">Date</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">toUTCString</span><span class="token punctuation">(</span><span class="token punctuation">)</span>console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span>date<span class="token punctuation">)</span><span aria-hidden="true" class="line-numbers-rows"><span></span><span></span></span></code></pre><h3 id="canvas绘制"><a href="#canvas绘制" class="headerlink" title="canvas绘制"></a>canvas绘制</h3><p>wxml中需要增加一个canvas，以下定义一个canvas，宽度和高度由代码data数据中的width和height决定。</p><pre class="line-numbers language-html" data-language="html"><code class="language-html"><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>canvas</span> <span class="token attr-name">class</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">'</span>canv<span class="token punctuation">'</span></span> <span class="token attr-name">canvas-id</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">'</span>shareImg<span class="token punctuation">'</span></span> <span class="token style-attr"><span class="token attr-name">style</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">'</span><span class="token style language-css"><span class="token selector">width:</span><span class="token punctuation">&#123;</span><span class="token punctuation">&#123;</span>width<span class="token punctuation">&#125;</span><span class="token punctuation">&#125;</span>px<span class="token selector">; height:</span><span class="token punctuation">&#123;</span><span class="token punctuation">&#123;</span>height<span class="token punctuation">&#125;</span><span class="token punctuation">&#125;</span>px</span><span class="token punctuation">'</span></span></span><span class="token punctuation">></span></span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>canvas</span><span class="token punctuation">></span></span><span aria-hidden="true" class="line-numbers-rows"><span></span></span></code></pre><p>绘制图片。以下绘制的图片源时imagePath，从x=0,y=0像素开始绘制，绘制的宽和高时res.width和res.height</p><pre class="line-numbers language-js" data-language="js"><code class="language-js"><span class="token keyword">let</span> ctx <span class="token operator">=</span> wx<span class="token punctuation">.</span><span class="token function">createCanvasContext</span><span class="token punctuation">(</span><span class="token string">'shareImg'</span><span class="token punctuation">)</span>ctx<span class="token punctuation">.</span><span class="token function">drawImage</span><span class="token punctuation">(</span>imagePath<span class="token punctuation">,</span> <span class="token number">0</span><span class="token punctuation">,</span> <span class="token number">0</span><span class="token punctuation">,</span> res<span class="token punctuation">.</span>width<span class="token punctuation">,</span> res<span class="token punctuation">.</span>height<span class="token punctuation">)</span><span aria-hidden="true" class="line-numbers-rows"><span></span><span></span></span></code></pre><p>绘制空心矩形。以下绘制一个红色的空心矩形。</p><p>setStrokeStyle表示绘制的颜色是red</p><p>strokeRect表示绘制的是空心的矩形，0，0，100，100分别代表绘制的x,y,width,height</p><p>draw表示开始绘制以上提交的绘制请求</p><pre class="line-numbers language-js" data-language="js"><code class="language-js"><span class="token keyword">let</span> ctx <span class="token operator">=</span> wx<span class="token punctuation">.</span><span class="token function">createCanvasContext</span><span class="token punctuation">(</span><span class="token string">'shareImg'</span><span class="token punctuation">)</span>ctx<span class="token punctuation">.</span><span class="token function">setStrokeStyle</span><span class="token punctuation">(</span><span class="token string">'red'</span><span class="token punctuation">)</span>ctx<span class="token punctuation">.</span><span class="token function">strokeRect</span><span class="token punctuation">(</span><span class="token number">0</span><span class="token punctuation">,</span><span class="token number">0</span><span class="token punctuation">,</span><span class="token number">100</span><span class="token punctuation">,</span><span class="token number">100</span><span class="token punctuation">)</span>ctx<span class="token punctuation">.</span><span class="token function">draw</span><span class="token punctuation">(</span><span class="token boolean">true</span><span class="token punctuation">)</span><span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span></span></code></pre><h2 id="图片速算核心功能"><a href="#图片速算核心功能" class="headerlink" title="图片速算核心功能"></a>图片速算核心功能</h2><p>这个阶段完成的主要功能是<strong>输入图片</strong>，输出图片识别出来的<strong>输出文字结果</strong>即可。</p><p><strong>输入图片</strong>：</p><p><img src="https://cdn.jsdelivr.net/gh/aibittek/ImageHost/img/image-20210123123444326.png" alt="image-20210123123444326"></p><p><strong>算术识别结果</strong>：</p><pre class="line-numbers language-none"><code class="language-none">对:2 + 3 &#x3D; 5错:2 元 3 ( m ) &#x3D; ( 2 . 3 ) 元对:7 \times 9 &#x3D; 6 3对:9 0 + &#x3D; ( 5 4 0 ) 分错:1 5 + 1 5 &#x3D; 2 0对:3 ^ &#123; 2 &#125; &#x3D; 9对:5 - 2 &lt; 4错:\frac &#123; 7 &#125; &#123; 9 &#125; &lt; \frac &#123; 5 &#125; &#123; 9 &#125;错:3 8 分 米 &#x3D; ( 3 8 0 0 ) 厘 米<span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre><h3 id="用例图"><a href="#用例图" class="headerlink" title="用例图"></a>用例图</h3><p>通过题拍拍的功能体验，可以把用户的操作过程分为：点击相册、获取照片、获取对错结果、结果显示这几个部分。我们从技术的角度把这个过程使用用例图描述下：</p><p><img src="https://cdn.jsdelivr.net/gh/aibittek/ImageHost/img/image-20201222143316997.png"></p><p>以上的用例图中所描述的是用户的操作对应的技术内容。拿上一章节的技能填充如下：</p><p><img src="https://cdn.jsdelivr.net/gh/aibittek/ImageHost/img/image-20210123125057731.png" alt="image-20210123125057731"></p><h3 id="程序开发流程图"><a href="#程序开发流程图" class="headerlink" title="程序开发流程图"></a>程序开发流程图</h3><p>根据用例图和<a href="https://www.xfyun.cn/doc/words/photo-calculate-recg/API.html" rel="external nofollow noreferrer">讯飞的开发文档</a>分析得到以下的开发流程图：</p><p><img src="https://cdn.jsdelivr.net/gh/aibittek/ImageHost/img/image-20210123125412550.png" alt="image-20210123125412550"></p><h3 id="分步骤编码"><a href="#分步骤编码" class="headerlink" title="分步骤编码"></a>分步骤编码</h3><h4 id="获取图片"><a href="#获取图片" class="headerlink" title="获取图片"></a>获取图片</h4><pre class="line-numbers language-js" data-language="js"><code class="language-js">wx<span class="token punctuation">.</span><span class="token function">chooseImage</span><span class="token punctuation">(</span><span class="token punctuation">&#123;</span>    count<span class="token operator">:</span> <span class="token number">1</span><span class="token punctuation">,</span>    sizeType<span class="token operator">:</span> <span class="token punctuation">[</span><span class="token string">'compressed'</span><span class="token punctuation">]</span><span class="token punctuation">,</span>    sourceType<span class="token operator">:</span> <span class="token punctuation">[</span><span class="token string">'album'</span><span class="token punctuation">]</span><span class="token punctuation">,</span>    <span class="token function">success</span><span class="token punctuation">(</span><span class="token parameter">res</span><span class="token punctuation">)</span> <span class="token punctuation">&#123;</span>        console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span>res<span class="token punctuation">.</span>tempFilePaths<span class="token punctuation">[</span><span class="token number">0</span><span class="token punctuation">]</span><span class="token punctuation">)</span>    <span class="token punctuation">&#125;</span><span class="token punctuation">,</span>    <span class="token function">fail</span><span class="token punctuation">(</span><span class="token parameter">err</span><span class="token punctuation">)</span> <span class="token punctuation">&#123;</span>        console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span>err<span class="token punctuation">.</span>errMsg<span class="token punctuation">)</span>    <span class="token punctuation">&#125;</span><span class="token punctuation">&#125;</span><span class="token punctuation">)</span><span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre><p>通过打印信息查看文件是否能够正常打开，然后继续下一步；</p><h4 id="构造发送请求"><a href="#构造发送请求" class="headerlink" title="构造发送请求"></a>构造发送请求</h4><p>接下来是把图片发送给服务器，请求服务器要求如下：</p><p><strong>请求head要求</strong></p><pre class="line-numbers language-none"><code class="language-none">Content-Type:application&#x2F;jsonAccept:application&#x2F;json,version&#x3D;1.0Host:rest-api.xfyun.cnDate:Mon, 18 Mar 2019 08:32:07 GMTDigest:SHA-256&#x3D;Base64(SHA256(请求body))Authorization:api_key&#x3D;&quot;your_key&quot;, algorithm&#x3D;&quot;hmac-sha256&quot;, headers&#x3D;&quot;host date request-line digest&quot;, signature&#x3D;&quot;$signature&quot;<span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre><p>其中signature的要求</p><pre class="line-numbers language-none"><code class="language-none">signature&#x3D;base64(signature_sha)signature_sha&#x3D;hmac-sha256(signature_origin,$apiSecret)<span aria-hidden="true" class="line-numbers-rows"><span></span><span></span></span></code></pre><p>signature_origin内容：</p><pre class="line-numbers language-none"><code class="language-none">host: rest-api.xfyun.cndate: Tue, 30 Jul 2019 07:51:27 GMTPOST &#x2F;v2&#x2F;itr HTTP&#x2F;1.1digest: SHA-256&#x3D;Base64(SHA256(请求body))<span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span></span></code></pre><p><strong>请求body</strong></p><p>image是咱们要上传识别的图片，需要通过base64加密上传</p><pre class="line-numbers language-none"><code class="language-none">&#123;&quot;common&quot;: &#123;&quot;app_id&quot;: &quot;xxXXXXXX&quot;&#125;,&quot;business&quot;: &#123;&quot;ent&quot;: &quot;math-arith&quot;,&quot;aue&quot;: &quot;raw&quot;&#125;,&quot;data&quot;: &#123;&quot;image&quot;: base64(图片)&#125;&#125;<span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre><p>构造head和body的请求代码如下，<strong>注意替换以下的app_id和api_key为自己在讯飞开放平台注册的相关值。</strong></p><pre class="line-numbers language-js" data-language="js"><code class="language-js">wx<span class="token punctuation">.</span><span class="token function">getFileSystemManager</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">readFile</span><span class="token punctuation">(</span><span class="token punctuation">&#123;</span>    filePath<span class="token operator">:</span> res<span class="token punctuation">.</span>tempFilePaths<span class="token punctuation">[</span><span class="token number">0</span><span class="token punctuation">]</span><span class="token punctuation">,</span>    encoding<span class="token operator">:</span> <span class="token string">'base64'</span><span class="token punctuation">,</span>    <span class="token function">success</span><span class="token punctuation">(</span><span class="token parameter">res</span><span class="token punctuation">)</span> <span class="token punctuation">&#123;</span>        <span class="token keyword">var</span> body <span class="token operator">=</span> <span class="token punctuation">&#123;</span>            <span class="token string">"common"</span><span class="token operator">:</span> <span class="token punctuation">&#123;</span>                <span class="token string">"app_id"</span><span class="token operator">:</span> <span class="token string">"你的讯飞appid"</span>            <span class="token punctuation">&#125;</span><span class="token punctuation">,</span>            <span class="token string">"business"</span><span class="token operator">:</span> <span class="token punctuation">&#123;</span>                <span class="token string">"ent"</span><span class="token operator">:</span> <span class="token string">"math-arith"</span><span class="token punctuation">,</span>                <span class="token string">"aue"</span><span class="token operator">:</span> <span class="token string">"raw"</span>            <span class="token punctuation">&#125;</span><span class="token punctuation">,</span>            <span class="token string">"data"</span><span class="token operator">:</span> <span class="token punctuation">&#123;</span>                <span class="token string">"image"</span><span class="token operator">:</span> res<span class="token punctuation">.</span>data            <span class="token punctuation">&#125;</span>        <span class="token punctuation">&#125;</span>        <span class="token comment">// 获取当前GMT时间</span>        <span class="token keyword">let</span> date <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">Date</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">toUTCString</span><span class="token punctuation">(</span><span class="token punctuation">)</span>        console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span><span class="token string">"Date:"</span> <span class="token operator">+</span> date<span class="token punctuation">)</span>        <span class="token comment">// 获取Digest</span>        <span class="token keyword">let</span> base64body <span class="token operator">=</span> CryptoJS<span class="token punctuation">.</span>enc<span class="token punctuation">.</span>Base64<span class="token punctuation">.</span><span class="token function">stringify</span><span class="token punctuation">(</span>CryptoJS<span class="token punctuation">.</span>enc<span class="token punctuation">.</span>Utf8<span class="token punctuation">.</span><span class="token function">parse</span><span class="token punctuation">(</span>body<span class="token punctuation">)</span><span class="token punctuation">)</span>        <span class="token keyword">let</span> digest <span class="token operator">=</span> <span class="token string">'SHA-256='</span> <span class="token operator">+</span> CryptoJS<span class="token punctuation">.</span>enc<span class="token punctuation">.</span>Base64<span class="token punctuation">.</span><span class="token function">stringify</span><span class="token punctuation">(</span>CryptoJS<span class="token punctuation">.</span><span class="token constant">SHA256</span><span class="token punctuation">(</span><span class="token constant">JSON</span><span class="token punctuation">.</span><span class="token function">stringify</span><span class="token punctuation">(</span>base64body<span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">)</span>        console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span><span class="token string">"Digest:"</span> <span class="token operator">+</span> digest<span class="token punctuation">)</span>        <span class="token comment">// 获取Authorization</span>        <span class="token keyword">let</span> signatureOrigin <span class="token operator">=</span> <span class="token template-string"><span class="token template-punctuation string">`</span><span class="token string">host: rest-api.xfyun.cn\ndate: </span><span class="token interpolation"><span class="token interpolation-punctuation punctuation">$&#123;</span>date<span class="token interpolation-punctuation punctuation">&#125;</span></span><span class="token string">\nPOST /v2/itr HTTP/1.1\ndigest: </span><span class="token interpolation"><span class="token interpolation-punctuation punctuation">$&#123;</span>digest<span class="token interpolation-punctuation punctuation">&#125;</span></span><span class="token template-punctuation string">`</span></span>        <span class="token keyword">let</span> signatureSha <span class="token operator">=</span> CryptoJS<span class="token punctuation">.</span><span class="token function">HmacSHA256</span><span class="token punctuation">(</span>signatureOrigin<span class="token punctuation">,</span> <span class="token string">'4f49ab1f8b4c430f3536e54d111eb705'</span><span class="token punctuation">)</span>        <span class="token keyword">let</span> signature <span class="token operator">=</span> CryptoJS<span class="token punctuation">.</span>enc<span class="token punctuation">.</span>Base64<span class="token punctuation">.</span><span class="token function">stringify</span><span class="token punctuation">(</span>signatureSha<span class="token punctuation">)</span>        <span class="token keyword">let</span> authorizationOrigin <span class="token operator">=</span> <span class="token template-string"><span class="token template-punctuation string">`</span><span class="token string">api_key="你的讯飞应用apikey", algorithm="hmac-sha256", headers="host date request-line digest", signature="</span><span class="token interpolation"><span class="token interpolation-punctuation punctuation">$&#123;</span>signature<span class="token interpolation-punctuation punctuation">&#125;</span></span><span class="token string">"</span><span class="token template-punctuation string">`</span></span>        console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span><span class="token string">"authorizationOrigin:"</span> <span class="token operator">+</span> authorizationOrigin<span class="token punctuation">)</span>    <span class="token punctuation">&#125;</span><span class="token punctuation">,</span>    <span class="token function">fail</span><span class="token punctuation">(</span><span class="token parameter">err</span><span class="token punctuation">)</span> <span class="token punctuation">&#123;</span>        console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span>err<span class="token punctuation">)</span>    <span class="token punctuation">&#125;</span><span class="token punctuation">&#125;</span><span class="token punctuation">)</span><span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre><h4 id="发送服务器"><a href="#发送服务器" class="headerlink" title="发送服务器"></a>发送服务器</h4><pre class="line-numbers language-js" data-language="js"><code class="language-js">wx<span class="token punctuation">.</span><span class="token function">request</span><span class="token punctuation">(</span><span class="token punctuation">&#123;</span>    url<span class="token operator">:</span> <span class="token string">'https://rest-api.xfyun.cn/v2/itr'</span><span class="token punctuation">,</span>    method<span class="token operator">:</span> <span class="token string">'POST'</span><span class="token punctuation">,</span>    data<span class="token operator">:</span> body<span class="token punctuation">,</span>    header<span class="token operator">:</span> <span class="token punctuation">&#123;</span>        <span class="token string">"Date"</span><span class="token operator">:</span> date<span class="token punctuation">,</span>        <span class="token string">"Digest"</span><span class="token operator">:</span> digest<span class="token punctuation">,</span>        <span class="token string">"Authorization"</span><span class="token operator">:</span> authorizationOrigin<span class="token punctuation">,</span>        <span class="token string">"Content-Type"</span><span class="token operator">:</span> <span class="token string">"application/json"</span><span class="token punctuation">,</span>        <span class="token string">"Accept"</span><span class="token operator">:</span> <span class="token string">"application/json,version=1.0"</span>    <span class="token punctuation">&#125;</span><span class="token punctuation">,</span>    <span class="token function">success</span><span class="token punctuation">(</span><span class="token parameter">res</span><span class="token punctuation">)</span> <span class="token punctuation">&#123;</span>        <span class="token keyword">var</span> jsonString <span class="token operator">=</span> <span class="token constant">JSON</span><span class="token punctuation">.</span><span class="token function">stringify</span><span class="token punctuation">(</span>res<span class="token punctuation">.</span>data<span class="token punctuation">)</span>        console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span>jsonString<span class="token punctuation">)</span>    <span class="token punctuation">&#125;</span><span class="token punctuation">,</span>    <span class="token function">fail</span><span class="token punctuation">(</span><span class="token parameter">err</span><span class="token punctuation">)</span> <span class="token punctuation">&#123;</span>        console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span>err<span class="token punctuation">.</span>errMsg<span class="token punctuation">)</span>    <span class="token punctuation">&#125;</span><span class="token punctuation">&#125;</span><span class="token punctuation">)</span><span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre><h3 id="图片速算完整代码"><a href="#图片速算完整代码" class="headerlink" title="图片速算完整代码"></a>图片速算完整代码</h3><p>注意替换以下的app_id和api_key为自己在讯飞开放平台注册的相关值。</p><pre class="line-numbers language-js" data-language="js"><code class="language-js"><span class="token keyword">let</span> than <span class="token operator">=</span> <span class="token keyword">this</span>wx<span class="token punctuation">.</span><span class="token function">chooseImage</span><span class="token punctuation">(</span><span class="token punctuation">&#123;</span>    count<span class="token operator">:</span> <span class="token number">1</span><span class="token punctuation">,</span>    sizeType<span class="token operator">:</span> <span class="token punctuation">[</span><span class="token string">'compressed'</span><span class="token punctuation">]</span><span class="token punctuation">,</span>    sourceType<span class="token operator">:</span> <span class="token punctuation">[</span><span class="token string">'album'</span><span class="token punctuation">]</span><span class="token punctuation">,</span>    <span class="token function">success</span><span class="token punctuation">(</span><span class="token parameter">res</span><span class="token punctuation">)</span> <span class="token punctuation">&#123;</span>        console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span>res<span class="token punctuation">.</span>tempFilePaths<span class="token punctuation">[</span><span class="token number">0</span><span class="token punctuation">]</span><span class="token punctuation">)</span>        wx<span class="token punctuation">.</span><span class="token function">getFileSystemManager</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">readFile</span><span class="token punctuation">(</span><span class="token punctuation">&#123;</span>            filePath<span class="token operator">:</span> res<span class="token punctuation">.</span>tempFilePaths<span class="token punctuation">[</span><span class="token number">0</span><span class="token punctuation">]</span><span class="token punctuation">,</span>            encoding<span class="token operator">:</span> <span class="token string">'base64'</span><span class="token punctuation">,</span>            <span class="token function">success</span><span class="token punctuation">(</span><span class="token parameter">res</span><span class="token punctuation">)</span> <span class="token punctuation">&#123;</span>                <span class="token keyword">var</span> body <span class="token operator">=</span> <span class="token punctuation">&#123;</span>                    <span class="token string">"common"</span><span class="token operator">:</span> <span class="token punctuation">&#123;</span>                        <span class="token string">"app_id"</span><span class="token operator">:</span> <span class="token string">"xxxxxxxx"</span>                    <span class="token punctuation">&#125;</span><span class="token punctuation">,</span>                    <span class="token string">"business"</span><span class="token operator">:</span> <span class="token punctuation">&#123;</span>                        <span class="token string">"ent"</span><span class="token operator">:</span> <span class="token string">"math-arith"</span><span class="token punctuation">,</span>                        <span class="token string">"aue"</span><span class="token operator">:</span> <span class="token string">"raw"</span>                    <span class="token punctuation">&#125;</span><span class="token punctuation">,</span>                    <span class="token string">"data"</span><span class="token operator">:</span> <span class="token punctuation">&#123;</span>                        <span class="token string">"image"</span><span class="token operator">:</span> res<span class="token punctuation">.</span>data                    <span class="token punctuation">&#125;</span>                <span class="token punctuation">&#125;</span>                <span class="token comment">// 获取当前GMT时间</span>                <span class="token keyword">let</span> date <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">Date</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">toUTCString</span><span class="token punctuation">(</span><span class="token punctuation">)</span>                console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span><span class="token string">"Date:"</span> <span class="token operator">+</span> date<span class="token punctuation">)</span>                <span class="token comment">// 获取Digest</span>                <span class="token keyword">let</span> base64body <span class="token operator">=</span> CryptoJS<span class="token punctuation">.</span>enc<span class="token punctuation">.</span>Base64<span class="token punctuation">.</span><span class="token function">stringify</span><span class="token punctuation">(</span>CryptoJS<span class="token punctuation">.</span>enc<span class="token punctuation">.</span>Utf8<span class="token punctuation">.</span><span class="token function">parse</span><span class="token punctuation">(</span>body<span class="token punctuation">)</span><span class="token punctuation">)</span>                <span class="token keyword">let</span> digest <span class="token operator">=</span> <span class="token string">'SHA-256='</span> <span class="token operator">+</span> CryptoJS<span class="token punctuation">.</span>enc<span class="token punctuation">.</span>Base64<span class="token punctuation">.</span><span class="token function">stringify</span><span class="token punctuation">(</span>CryptoJS<span class="token punctuation">.</span><span class="token constant">SHA256</span><span class="token punctuation">(</span><span class="token constant">JSON</span><span class="token punctuation">.</span><span class="token function">stringify</span><span class="token punctuation">(</span>base64body<span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">)</span>                console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span><span class="token string">"Digest:"</span> <span class="token operator">+</span> digest<span class="token punctuation">)</span>                <span class="token comment">// 获取Authorization</span>                <span class="token keyword">let</span> signatureOrigin <span class="token operator">=</span> <span class="token template-string"><span class="token template-punctuation string">`</span><span class="token string">host: rest-api.xfyun.cn\ndate: </span><span class="token interpolation"><span class="token interpolation-punctuation punctuation">$&#123;</span>date<span class="token interpolation-punctuation punctuation">&#125;</span></span><span class="token string">\nPOST /v2/itr HTTP/1.1\ndigest: </span><span class="token interpolation"><span class="token interpolation-punctuation punctuation">$&#123;</span>digest<span class="token interpolation-punctuation punctuation">&#125;</span></span><span class="token template-punctuation string">`</span></span>                <span class="token keyword">let</span> signatureSha <span class="token operator">=</span> CryptoJS<span class="token punctuation">.</span><span class="token function">HmacSHA256</span><span class="token punctuation">(</span>signatureOrigin<span class="token punctuation">,</span> <span class="token string">'4f49ab1f8b4c430f3536e54d111eb705'</span><span class="token punctuation">)</span>                <span class="token keyword">let</span> signature <span class="token operator">=</span> CryptoJS<span class="token punctuation">.</span>enc<span class="token punctuation">.</span>Base64<span class="token punctuation">.</span><span class="token function">stringify</span><span class="token punctuation">(</span>signatureSha<span class="token punctuation">)</span>                <span class="token keyword">let</span> authorizationOrigin <span class="token operator">=</span> <span class="token template-string"><span class="token template-punctuation string">`</span><span class="token string">api_key="xxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxx", algorithm="hmac-sha256", headers="host date request-line digest", signature="</span><span class="token interpolation"><span class="token interpolation-punctuation punctuation">$&#123;</span>signature<span class="token interpolation-punctuation punctuation">&#125;</span></span><span class="token string">"</span><span class="token template-punctuation string">`</span></span>                console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span><span class="token string">"authorizationOrigin:"</span> <span class="token operator">+</span> authorizationOrigin<span class="token punctuation">)</span>                wx<span class="token punctuation">.</span><span class="token function">request</span><span class="token punctuation">(</span><span class="token punctuation">&#123;</span>                    url<span class="token operator">:</span> <span class="token string">'https://rest-api.xfyun.cn/v2/itr'</span><span class="token punctuation">,</span>                    method<span class="token operator">:</span> <span class="token string">'POST'</span><span class="token punctuation">,</span>                    data<span class="token operator">:</span> body<span class="token punctuation">,</span>                    header<span class="token operator">:</span> <span class="token punctuation">&#123;</span>                        <span class="token string">"Date"</span><span class="token operator">:</span> date<span class="token punctuation">,</span>                        <span class="token string">"Digest"</span><span class="token operator">:</span> digest<span class="token punctuation">,</span>                        <span class="token string">"Authorization"</span><span class="token operator">:</span> authorizationOrigin<span class="token punctuation">,</span>                        <span class="token string">"Content-Type"</span><span class="token operator">:</span> <span class="token string">"application/json"</span><span class="token punctuation">,</span>                        <span class="token string">"Accept"</span><span class="token operator">:</span> <span class="token string">"application/json,version=1.0"</span>                    <span class="token punctuation">&#125;</span><span class="token punctuation">,</span>                    <span class="token function">success</span><span class="token punctuation">(</span><span class="token parameter">res</span><span class="token punctuation">)</span> <span class="token punctuation">&#123;</span>                        <span class="token keyword">var</span> jsonString <span class="token operator">=</span> <span class="token constant">JSON</span><span class="token punctuation">.</span><span class="token function">stringify</span><span class="token punctuation">(</span>res<span class="token punctuation">.</span>data<span class="token punctuation">)</span>                        console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span>jsonString<span class="token punctuation">)</span>                    <span class="token punctuation">&#125;</span><span class="token punctuation">,</span>                    <span class="token function">fail</span><span class="token punctuation">(</span><span class="token parameter">err</span><span class="token punctuation">)</span> <span class="token punctuation">&#123;</span>                        console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span>err<span class="token punctuation">.</span>errMsg<span class="token punctuation">)</span>                    <span class="token punctuation">&#125;</span>                <span class="token punctuation">&#125;</span><span class="token punctuation">)</span>            <span class="token punctuation">&#125;</span><span class="token punctuation">,</span>            <span class="token function">fail</span><span class="token punctuation">(</span><span class="token parameter">err</span><span class="token punctuation">)</span> <span class="token punctuation">&#123;</span>                console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span>err<span class="token punctuation">)</span>            <span class="token punctuation">&#125;</span>        <span class="token punctuation">&#125;</span><span class="token punctuation">)</span>    <span class="token punctuation">&#125;</span><span class="token punctuation">,</span>    <span class="token function">fail</span><span class="token punctuation">(</span><span class="token parameter">err</span><span class="token punctuation">)</span> <span class="token punctuation">&#123;</span>        console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span>err<span class="token punctuation">.</span>errMsg<span class="token punctuation">)</span>    <span class="token punctuation">&#125;</span><span class="token punctuation">&#125;</span><span class="token punctuation">)</span><span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre><h4 id="返回结果"><a href="#返回结果" class="headerlink" title="返回结果"></a>返回结果</h4><p>返回的内容是识别出的算术信息，以json格式给出，内容如下</p><pre class="line-numbers language-json" data-language="json"><code class="language-json"><span class="token punctuation">&#123;</span><span class="token property">"code"</span><span class="token operator">:</span> <span class="token number">0</span><span class="token punctuation">,</span><span class="token property">"data"</span><span class="token operator">:</span> <span class="token punctuation">&#123;</span><span class="token property">"ITRResult"</span><span class="token operator">:</span> <span class="token punctuation">&#123;</span><span class="token property">"attr_exception"</span><span class="token operator">:</span> <span class="token number">0</span><span class="token punctuation">,</span><span class="token property">"category"</span><span class="token operator">:</span> <span class="token string">"math_phfw_arith"</span><span class="token punctuation">,</span><span class="token property">"multi_line_info"</span><span class="token operator">:</span> <span class="token punctuation">&#123;</span><span class="token property">"imp_line_info"</span><span class="token operator">:</span> <span class="token punctuation">[</span><span class="token punctuation">&#123;</span><span class="token property">"imp_line_rect"</span><span class="token operator">:</span> <span class="token punctuation">&#123;</span><span class="token property">"left_up_point_x"</span><span class="token operator">:</span> <span class="token number">87</span><span class="token punctuation">,</span><span class="token property">"left_up_point_y"</span><span class="token operator">:</span> <span class="token number">303</span><span class="token punctuation">,</span><span class="token property">"right_down_point_x"</span><span class="token operator">:</span> <span class="token number">361</span><span class="token punctuation">,</span><span class="token property">"right_down_point_y"</span><span class="token operator">:</span> <span class="token number">410</span><span class="token punctuation">&#125;</span><span class="token punctuation">,</span><span class="token property">"rec_rejection"</span><span class="token operator">:</span> <span class="token number">0</span><span class="token punctuation">,</span><span class="token property">"strict_score"</span><span class="token operator">:</span> <span class="token number">0</span><span class="token punctuation">,</span><span class="token property">"total_score"</span><span class="token operator">:</span> <span class="token number">1</span><span class="token punctuation">&#125;</span><span class="token punctuation">,</span> <span class="token punctuation">&#123;</span><span class="token property">"imp_line_rect"</span><span class="token operator">:</span> <span class="token punctuation">&#123;</span><span class="token property">"left_up_point_x"</span><span class="token operator">:</span> <span class="token number">533</span><span class="token punctuation">,</span><span class="token property">"left_up_point_y"</span><span class="token operator">:</span> <span class="token number">340</span><span class="token punctuation">,</span><span class="token property">"right_down_point_x"</span><span class="token operator">:</span> <span class="token number">950</span><span class="token punctuation">,</span><span class="token property">"right_down_point_y"</span><span class="token operator">:</span> <span class="token number">434</span><span class="token punctuation">&#125;</span><span class="token punctuation">,</span><span class="token property">"rec_rejection"</span><span class="token operator">:</span> <span class="token number">0</span><span class="token punctuation">,</span><span class="token property">"strict_score"</span><span class="token operator">:</span> <span class="token number">0</span><span class="token punctuation">,</span><span class="token property">"total_score"</span><span class="token operator">:</span> <span class="token number">0</span><span class="token punctuation">&#125;</span><span class="token punctuation">,</span> <span class="token punctuation">&#123;</span><span class="token property">"imp_line_rect"</span><span class="token operator">:</span> <span class="token punctuation">&#123;</span><span class="token property">"left_up_point_x"</span><span class="token operator">:</span> <span class="token number">96</span><span class="token punctuation">,</span><span class="token property">"left_up_point_y"</span><span class="token operator">:</span> <span class="token number">457</span><span class="token punctuation">,</span><span class="token property">"right_down_point_x"</span><span class="token operator">:</span> <span class="token number">367</span><span class="token punctuation">,</span><span class="token property">"right_down_point_y"</span><span class="token operator">:</span> <span class="token number">575</span><span class="token punctuation">&#125;</span><span class="token punctuation">,</span><span class="token property">"rec_rejection"</span><span class="token operator">:</span> <span class="token number">0</span><span class="token punctuation">,</span><span class="token property">"strict_score"</span><span class="token operator">:</span> <span class="token number">0</span><span class="token punctuation">,</span><span class="token property">"total_score"</span><span class="token operator">:</span> <span class="token number">1</span><span class="token punctuation">&#125;</span><span class="token punctuation">,</span> <span class="token punctuation">&#123;</span><span class="token property">"imp_line_rect"</span><span class="token operator">:</span> <span class="token punctuation">&#123;</span><span class="token property">"left_up_point_x"</span><span class="token operator">:</span> <span class="token number">579</span><span class="token punctuation">,</span><span class="token property">"left_up_point_y"</span><span class="token operator">:</span> <span class="token number">464</span><span class="token punctuation">,</span><span class="token property">"right_down_point_x"</span><span class="token operator">:</span> <span class="token number">956</span><span class="token punctuation">,</span><span class="token property">"right_down_point_y"</span><span class="token operator">:</span> <span class="token number">550</span><span class="token punctuation">&#125;</span><span class="token punctuation">,</span><span class="token property">"rec_rejection"</span><span class="token operator">:</span> <span class="token number">0</span><span class="token punctuation">,</span><span class="token property">"strict_score"</span><span class="token operator">:</span> <span class="token number">0</span><span class="token punctuation">,</span><span class="token property">"total_score"</span><span class="token operator">:</span> <span class="token number">1</span><span class="token punctuation">&#125;</span><span class="token punctuation">,</span> <span class="token punctuation">&#123;</span><span class="token property">"imp_line_rect"</span><span class="token operator">:</span> <span class="token punctuation">&#123;</span><span class="token property">"left_up_point_x"</span><span class="token operator">:</span> <span class="token number">80</span><span class="token punctuation">,</span><span class="token property">"left_up_point_y"</span><span class="token operator">:</span> <span class="token number">631</span><span class="token punctuation">,</span><span class="token property">"right_down_point_x"</span><span class="token operator">:</span> <span class="token number">410</span><span class="token punctuation">,</span><span class="token property">"right_down_point_y"</span><span class="token operator">:</span> <span class="token number">741</span><span class="token punctuation">&#125;</span><span class="token punctuation">,</span><span class="token property">"rec_rejection"</span><span class="token operator">:</span> <span class="token number">0</span><span class="token punctuation">,</span><span class="token property">"strict_score"</span><span class="token operator">:</span> <span class="token number">0</span><span class="token punctuation">,</span><span class="token property">"total_score"</span><span class="token operator">:</span> <span class="token number">0</span><span class="token punctuation">&#125;</span><span class="token punctuation">,</span> <span class="token punctuation">&#123;</span><span class="token property">"imp_line_rect"</span><span class="token operator">:</span> <span class="token punctuation">&#123;</span><span class="token property">"left_up_point_x"</span><span class="token operator">:</span> <span class="token number">123</span><span class="token punctuation">,</span><span class="token property">"left_up_point_y"</span><span class="token operator">:</span> <span class="token number">772</span><span class="token punctuation">,</span><span class="token property">"right_down_point_x"</span><span class="token operator">:</span> <span class="token number">318</span><span class="token punctuation">,</span><span class="token property">"right_down_point_y"</span><span class="token operator">:</span> <span class="token number">890</span><span class="token punctuation">&#125;</span><span class="token punctuation">,</span><span class="token property">"rec_rejection"</span><span class="token operator">:</span> <span class="token number">0</span><span class="token punctuation">,</span><span class="token property">"strict_score"</span><span class="token operator">:</span> <span class="token number">0</span><span class="token punctuation">,</span><span class="token property">"total_score"</span><span class="token operator">:</span> <span class="token number">1</span><span class="token punctuation">&#125;</span><span class="token punctuation">,</span> <span class="token punctuation">&#123;</span><span class="token property">"imp_line_rect"</span><span class="token operator">:</span> <span class="token punctuation">&#123;</span><span class="token property">"left_up_point_x"</span><span class="token operator">:</span> <span class="token number">547</span><span class="token punctuation">,</span><span class="token property">"left_up_point_y"</span><span class="token operator">:</span> <span class="token number">810</span><span class="token punctuation">,</span><span class="token property">"right_down_point_x"</span><span class="token operator">:</span> <span class="token number">856</span><span class="token punctuation">,</span><span class="token property">"right_down_point_y"</span><span class="token operator">:</span> <span class="token number">903</span><span class="token punctuation">&#125;</span><span class="token punctuation">,</span><span class="token property">"rec_rejection"</span><span class="token operator">:</span> <span class="token number">0</span><span class="token punctuation">,</span><span class="token property">"strict_score"</span><span class="token operator">:</span> <span class="token number">0</span><span class="token punctuation">,</span><span class="token property">"total_score"</span><span class="token operator">:</span> <span class="token number">1</span><span class="token punctuation">&#125;</span><span class="token punctuation">,</span> <span class="token punctuation">&#123;</span><span class="token property">"imp_line_rect"</span><span class="token operator">:</span> <span class="token punctuation">&#123;</span><span class="token property">"left_up_point_x"</span><span class="token operator">:</span> <span class="token number">101</span><span class="token punctuation">,</span><span class="token property">"left_up_point_y"</span><span class="token operator">:</span> <span class="token number">934</span><span class="token punctuation">,</span><span class="token property">"right_down_point_x"</span><span class="token operator">:</span> <span class="token number">333</span><span class="token punctuation">,</span><span class="token property">"right_down_point_y"</span><span class="token operator">:</span> <span class="token number">1096</span><span class="token punctuation">&#125;</span><span class="token punctuation">,</span><span class="token property">"rec_rejection"</span><span class="token operator">:</span> <span class="token number">0</span><span class="token punctuation">,</span><span class="token property">"strict_score"</span><span class="token operator">:</span> <span class="token number">0</span><span class="token punctuation">,</span><span class="token property">"total_score"</span><span class="token operator">:</span> <span class="token number">0</span><span class="token punctuation">&#125;</span><span class="token punctuation">,</span> <span class="token punctuation">&#123;</span><span class="token property">"imp_line_rect"</span><span class="token operator">:</span> <span class="token punctuation">&#123;</span><span class="token property">"left_up_point_x"</span><span class="token operator">:</span> <span class="token number">497</span><span class="token punctuation">,</span><span class="token property">"left_up_point_y"</span><span class="token operator">:</span> <span class="token number">937</span><span class="token punctuation">,</span><span class="token property">"right_down_point_x"</span><span class="token operator">:</span> <span class="token number">1000</span><span class="token punctuation">,</span><span class="token property">"right_down_point_y"</span><span class="token operator">:</span> <span class="token number">1041</span><span class="token punctuation">&#125;</span><span class="token punctuation">,</span><span class="token property">"rec_rejection"</span><span class="token operator">:</span> <span class="token number">0</span><span class="token punctuation">,</span><span class="token property">"strict_score"</span><span class="token operator">:</span> <span class="token number">0</span><span class="token punctuation">,</span><span class="token property">"total_score"</span><span class="token operator">:</span> <span class="token number">0</span><span class="token punctuation">&#125;</span><span class="token punctuation">]</span><span class="token punctuation">&#125;</span><span class="token punctuation">,</span><span class="token property">"recog_result"</span><span class="token operator">:</span> <span class="token punctuation">[</span><span class="token punctuation">&#123;</span><span class="token property">"line_char_result"</span><span class="token operator">:</span> <span class="token null keyword">null</span><span class="token punctuation">,</span><span class="token property">"line_word_result"</span><span class="token operator">:</span> <span class="token punctuation">[</span><span class="token punctuation">&#123;</span><span class="token property">"beg_pos"</span><span class="token operator">:</span> <span class="token punctuation">[</span><span class="token number">0</span><span class="token punctuation">]</span><span class="token punctuation">,</span><span class="token property">"beg_pos_x"</span><span class="token operator">:</span> <span class="token punctuation">[</span><span class="token number">0</span><span class="token punctuation">]</span><span class="token punctuation">,</span><span class="token property">"beg_pos_y"</span><span class="token operator">:</span> <span class="token punctuation">[</span><span class="token number">0</span><span class="token punctuation">]</span><span class="token punctuation">,</span><span class="token property">"end_pos"</span><span class="token operator">:</span> <span class="token punctuation">[</span><span class="token number">271</span><span class="token punctuation">]</span><span class="token punctuation">,</span><span class="token property">"end_pos_x"</span><span class="token operator">:</span> <span class="token punctuation">[</span><span class="token number">271</span><span class="token punctuation">]</span><span class="token punctuation">,</span><span class="token property">"end_pos_y"</span><span class="token operator">:</span> <span class="token punctuation">[</span><span class="token number">105</span><span class="token punctuation">]</span><span class="token punctuation">,</span><span class="token property">"word_content"</span><span class="token operator">:</span> <span class="token punctuation">[</span><span class="token string">"2 + 3 = 5"</span><span class="token punctuation">]</span><span class="token punctuation">,</span><span class="token property">"word_gwpp"</span><span class="token operator">:</span> <span class="token punctuation">[</span><span class="token number">0.9977216124534607</span><span class="token punctuation">]</span><span class="token punctuation">&#125;</span><span class="token punctuation">,</span> <span class="token punctuation">&#123;</span><span class="token property">"beg_pos"</span><span class="token operator">:</span> <span class="token punctuation">[</span><span class="token number">0</span><span class="token punctuation">]</span><span class="token punctuation">,</span><span class="token property">"beg_pos_x"</span><span class="token operator">:</span> <span class="token punctuation">[</span><span class="token number">0</span><span class="token punctuation">]</span><span class="token punctuation">,</span><span class="token property">"beg_pos_y"</span><span class="token operator">:</span> <span class="token punctuation">[</span><span class="token number">0</span><span class="token punctuation">]</span><span class="token punctuation">,</span><span class="token property">"end_pos"</span><span class="token operator">:</span> <span class="token punctuation">[</span><span class="token number">415</span><span class="token punctuation">]</span><span class="token punctuation">,</span><span class="token property">"end_pos_x"</span><span class="token operator">:</span> <span class="token punctuation">[</span><span class="token number">415</span><span class="token punctuation">]</span><span class="token punctuation">,</span><span class="token property">"end_pos_y"</span><span class="token operator">:</span> <span class="token punctuation">[</span><span class="token number">92</span><span class="token punctuation">]</span><span class="token punctuation">,</span><span class="token property">"word_content"</span><span class="token operator">:</span> <span class="token punctuation">[</span><span class="token string">"2 元 3 ( m ) = ( 2 . 3 ) 元"</span><span class="token punctuation">]</span><span class="token punctuation">,</span><span class="token property">"word_gwpp"</span><span class="token operator">:</span> <span class="token punctuation">[</span><span class="token number">0.684288740158081</span><span class="token punctuation">]</span><span class="token punctuation">&#125;</span><span class="token punctuation">,</span> <span class="token punctuation">&#123;</span><span class="token property">"beg_pos"</span><span class="token operator">:</span> <span class="token punctuation">[</span><span class="token number">0</span><span class="token punctuation">]</span><span class="token punctuation">,</span><span class="token property">"beg_pos_x"</span><span class="token operator">:</span> <span class="token punctuation">[</span><span class="token number">0</span><span class="token punctuation">]</span><span class="token punctuation">,</span><span class="token property">"beg_pos_y"</span><span class="token operator">:</span> <span class="token punctuation">[</span><span class="token number">0</span><span class="token punctuation">]</span><span class="token punctuation">,</span><span class="token property">"end_pos"</span><span class="token operator">:</span> <span class="token punctuation">[</span><span class="token number">269</span><span class="token punctuation">]</span><span class="token punctuation">,</span><span class="token property">"end_pos_x"</span><span class="token operator">:</span> <span class="token punctuation">[</span><span class="token number">269</span><span class="token punctuation">]</span><span class="token punctuation">,</span><span class="token property">"end_pos_y"</span><span class="token operator">:</span> <span class="token punctuation">[</span><span class="token number">115</span><span class="token punctuation">]</span><span class="token punctuation">,</span><span class="token property">"word_content"</span><span class="token operator">:</span> <span class="token punctuation">[</span><span class="token string">"7 \\times 9 = 6 3"</span><span class="token punctuation">]</span><span class="token punctuation">,</span><span class="token property">"word_gwpp"</span><span class="token operator">:</span> <span class="token punctuation">[</span><span class="token number">0.9932141900062561</span><span class="token punctuation">]</span><span class="token punctuation">&#125;</span><span class="token punctuation">,</span> <span class="token punctuation">&#123;</span><span class="token property">"beg_pos"</span><span class="token operator">:</span> <span class="token punctuation">[</span><span class="token number">0</span><span class="token punctuation">]</span><span class="token punctuation">,</span><span class="token property">"beg_pos_x"</span><span class="token operator">:</span> <span class="token punctuation">[</span><span class="token number">0</span><span class="token punctuation">]</span><span class="token punctuation">,</span><span class="token property">"beg_pos_y"</span><span class="token operator">:</span> <span class="token punctuation">[</span><span class="token number">0</span><span class="token punctuation">]</span><span class="token punctuation">,</span><span class="token property">"end_pos"</span><span class="token operator">:</span> <span class="token punctuation">[</span><span class="token number">375</span><span class="token punctuation">]</span><span class="token punctuation">,</span><span class="token property">"end_pos_x"</span><span class="token operator">:</span> <span class="token punctuation">[</span><span class="token number">375</span><span class="token punctuation">]</span><span class="token punctuation">,</span><span class="token property">"end_pos_y"</span><span class="token operator">:</span> <span class="token punctuation">[</span><span class="token number">84</span><span class="token punctuation">]</span><span class="token punctuation">,</span><span class="token property">"word_content"</span><span class="token operator">:</span> <span class="token punctuation">[</span><span class="token string">"9 0 + = ( 5 4 0 ) 分"</span><span class="token punctuation">]</span><span class="token punctuation">,</span><span class="token property">"word_gwpp"</span><span class="token operator">:</span> <span class="token punctuation">[</span><span class="token number">0.8401721715927124</span><span class="token punctuation">]</span><span class="token punctuation">&#125;</span><span class="token punctuation">,</span> <span class="token punctuation">&#123;</span><span class="token property">"beg_pos"</span><span class="token operator">:</span> <span class="token punctuation">[</span><span class="token number">0</span><span class="token punctuation">]</span><span class="token punctuation">,</span><span class="token property">"beg_pos_x"</span><span class="token operator">:</span> <span class="token punctuation">[</span><span class="token number">0</span><span class="token punctuation">]</span><span class="token punctuation">,</span><span class="token property">"beg_pos_y"</span><span class="token operator">:</span> <span class="token punctuation">[</span><span class="token number">0</span><span class="token punctuation">]</span><span class="token punctuation">,</span><span class="token property">"end_pos"</span><span class="token operator">:</span> <span class="token punctuation">[</span><span class="token number">328</span><span class="token punctuation">]</span><span class="token punctuation">,</span><span class="token property">"end_pos_x"</span><span class="token operator">:</span> <span class="token punctuation">[</span><span class="token number">328</span><span class="token punctuation">]</span><span class="token punctuation">,</span><span class="token property">"end_pos_y"</span><span class="token operator">:</span> <span class="token punctuation">[</span><span class="token number">108</span><span class="token punctuation">]</span><span class="token punctuation">,</span><span class="token property">"word_content"</span><span class="token operator">:</span> <span class="token punctuation">[</span><span class="token string">"1 5 + 1 5 = 2 0"</span><span class="token punctuation">]</span><span class="token punctuation">,</span><span class="token property">"word_gwpp"</span><span class="token operator">:</span> <span class="token punctuation">[</span><span class="token number">0.9966763257980347</span><span class="token punctuation">]</span><span class="token punctuation">&#125;</span><span class="token punctuation">,</span> <span class="token punctuation">&#123;</span><span class="token property">"beg_pos"</span><span class="token operator">:</span> <span class="token punctuation">[</span><span class="token number">0</span><span class="token punctuation">]</span><span class="token punctuation">,</span><span class="token property">"beg_pos_x"</span><span class="token operator">:</span> <span class="token punctuation">[</span><span class="token number">0</span><span class="token punctuation">]</span><span class="token punctuation">,</span><span class="token property">"beg_pos_y"</span><span class="token operator">:</span> <span class="token punctuation">[</span><span class="token number">0</span><span class="token punctuation">]</span><span class="token punctuation">,</span><span class="token property">"end_pos"</span><span class="token operator">:</span> <span class="token punctuation">[</span><span class="token number">192</span><span class="token punctuation">]</span><span class="token punctuation">,</span><span class="token property">"end_pos_x"</span><span class="token operator">:</span> <span class="token punctuation">[</span><span class="token number">192</span><span class="token punctuation">]</span><span class="token punctuation">,</span><span class="token property">"end_pos_y"</span><span class="token operator">:</span> <span class="token punctuation">[</span><span class="token number">115</span><span class="token punctuation">]</span><span class="token punctuation">,</span><span class="token property">"word_content"</span><span class="token operator">:</span> <span class="token punctuation">[</span><span class="token string">"3 ^ &#123; 2 &#125; = 9"</span><span class="token punctuation">]</span><span class="token punctuation">,</span><span class="token property">"word_gwpp"</span><span class="token operator">:</span> <span class="token punctuation">[</span><span class="token number">0.9976226687431335</span><span class="token punctuation">]</span><span class="token punctuation">&#125;</span><span class="token punctuation">,</span> <span class="token punctuation">&#123;</span><span class="token property">"beg_pos"</span><span class="token operator">:</span> <span class="token punctuation">[</span><span class="token number">0</span><span class="token punctuation">]</span><span class="token punctuation">,</span><span class="token property">"beg_pos_x"</span><span class="token operator">:</span> <span class="token punctuation">[</span><span class="token number">0</span><span class="token punctuation">]</span><span class="token punctuation">,</span><span class="token property">"beg_pos_y"</span><span class="token operator">:</span> <span class="token punctuation">[</span><span class="token number">0</span><span class="token punctuation">]</span><span class="token punctuation">,</span><span class="token property">"end_pos"</span><span class="token operator">:</span> <span class="token punctuation">[</span><span class="token number">306</span><span class="token punctuation">]</span><span class="token punctuation">,</span><span class="token property">"end_pos_x"</span><span class="token operator">:</span> <span class="token punctuation">[</span><span class="token number">306</span><span class="token punctuation">]</span><span class="token punctuation">,</span><span class="token property">"end_pos_y"</span><span class="token operator">:</span> <span class="token punctuation">[</span><span class="token number">90</span><span class="token punctuation">]</span><span class="token punctuation">,</span><span class="token property">"word_content"</span><span class="token operator">:</span> <span class="token punctuation">[</span><span class="token string">"5 - 2 &lt; 4"</span><span class="token punctuation">]</span><span class="token punctuation">,</span><span class="token property">"word_gwpp"</span><span class="token operator">:</span> <span class="token punctuation">[</span><span class="token number">0.9145566821098328</span><span class="token punctuation">]</span><span class="token punctuation">&#125;</span><span class="token punctuation">,</span> <span class="token punctuation">&#123;</span><span class="token property">"beg_pos"</span><span class="token operator">:</span> <span class="token punctuation">[</span><span class="token number">0</span><span class="token punctuation">]</span><span class="token punctuation">,</span><span class="token property">"beg_pos_x"</span><span class="token operator">:</span> <span class="token punctuation">[</span><span class="token number">0</span><span class="token punctuation">]</span><span class="token punctuation">,</span><span class="token property">"beg_pos_y"</span><span class="token operator">:</span> <span class="token punctuation">[</span><span class="token number">0</span><span class="token punctuation">]</span><span class="token punctuation">,</span><span class="token property">"end_pos"</span><span class="token operator">:</span> <span class="token punctuation">[</span><span class="token number">230</span><span class="token punctuation">]</span><span class="token punctuation">,</span><span class="token property">"end_pos_x"</span><span class="token operator">:</span> <span class="token punctuation">[</span><span class="token number">230</span><span class="token punctuation">]</span><span class="token punctuation">,</span><span class="token property">"end_pos_y"</span><span class="token operator">:</span> <span class="token punctuation">[</span><span class="token number">159</span><span class="token punctuation">]</span><span class="token punctuation">,</span><span class="token property">"word_content"</span><span class="token operator">:</span> <span class="token punctuation">[</span><span class="token string">"\\frac &#123; 7 &#125; &#123; 9 &#125; &lt; \\frac &#123; 5 &#125; &#123; 9 &#125;"</span><span class="token punctuation">]</span><span class="token punctuation">,</span><span class="token property">"word_gwpp"</span><span class="token operator">:</span> <span class="token punctuation">[</span><span class="token number">0.9983761310577393</span><span class="token punctuation">]</span><span class="token punctuation">&#125;</span><span class="token punctuation">,</span> <span class="token punctuation">&#123;</span><span class="token property">"beg_pos"</span><span class="token operator">:</span> <span class="token punctuation">[</span><span class="token number">0</span><span class="token punctuation">]</span><span class="token punctuation">,</span><span class="token property">"beg_pos_x"</span><span class="token operator">:</span> <span class="token punctuation">[</span><span class="token number">0</span><span class="token punctuation">]</span><span class="token punctuation">,</span><span class="token property">"beg_pos_y"</span><span class="token operator">:</span> <span class="token punctuation">[</span><span class="token number">0</span><span class="token punctuation">]</span><span class="token punctuation">,</span><span class="token property">"end_pos"</span><span class="token operator">:</span> <span class="token punctuation">[</span><span class="token number">500</span><span class="token punctuation">]</span><span class="token punctuation">,</span><span class="token property">"end_pos_x"</span><span class="token operator">:</span> <span class="token punctuation">[</span><span class="token number">500</span><span class="token punctuation">]</span><span class="token punctuation">,</span><span class="token property">"end_pos_y"</span><span class="token operator">:</span> <span class="token punctuation">[</span><span class="token number">102</span><span class="token punctuation">]</span><span class="token punctuation">,</span><span class="token property">"word_content"</span><span class="token operator">:</span> <span class="token punctuation">[</span><span class="token string">"3 8 分 米 = ( 3 8 0 0 ) 厘 米"</span><span class="token punctuation">]</span><span class="token punctuation">,</span><span class="token property">"word_gwpp"</span><span class="token operator">:</span> <span class="token punctuation">[</span><span class="token number">0.9828618764877319</span><span class="token punctuation">]</span><span class="token punctuation">&#125;</span><span class="token punctuation">]</span><span class="token punctuation">&#125;</span><span class="token punctuation">]</span><span class="token punctuation">,</span><span class="token property">"version"</span><span class="token operator">:</span> <span class="token string">"3.7.0.1032"</span><span class="token punctuation">&#125;</span><span class="token punctuation">&#125;</span><span class="token punctuation">,</span><span class="token property">"message"</span><span class="token operator">:</span> <span class="token string">"success"</span><span class="token punctuation">,</span><span class="token property">"sid"</span><span class="token operator">:</span> <span class="token string">"itr00084e6a@gz1772ddd0576460a902"</span><span class="token punctuation">&#125;</span><span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre><h2 id="拍照速算完整功能"><a href="#拍照速算完整功能" class="headerlink" title="拍照速算完整功能"></a>拍照速算完整功能</h2><p>此阶段完成的功能相当于是把界面设计和图片速算的结合，用户流程如下：</p><p><img src="https://cdn.jsdelivr.net/gh/aibittek/ImageHost/img/image-20210123142023133.png" alt="image-20210123142023133"></p><p>即用户选择照片后，调用上一章节的代码完成速算，得到文字结果（上一章节的内容），</p><p>本章节只要把文字结果绘制到图片上即可。</p><h3 id="识别结果"><a href="#识别结果" class="headerlink" title="识别结果"></a>识别结果</h3><p><img src="https://cdn.jsdelivr.net/gh/aibittek/ImageHost/img/image-20210123142301412.png" alt="image-20210123142301412"></p><p>通过上图可知，服务端返回的结果是json格式，需要的关键信息如下：</p><table><thead><tr><th>参数名</th><th>类型</th><th>描述</th><th>备注</th></tr></thead><tbody><tr><td>imp_line_rect.<strong>left_up_point_x</strong></td><td>int</td><td>该行公式所在矩形区域左上角顶点的像素横坐标</td><td>数字，大于等于0</td></tr><tr><td>imp_line_rect.<strong>left_up_point_y</strong></td><td>int</td><td>该行公式所在矩形区域左上角顶点的像素纵坐标</td><td>数字，大于等于0</td></tr><tr><td>imp_line_rect.<strong>right_down_point_x</strong></td><td>int</td><td>该行公式所在矩形区域右下角顶点的像素横坐标</td><td>数字，大于等于0</td></tr><tr><td>imp_line_rect.<strong>right_down_point_y</strong></td><td>int</td><td>该行公式所在矩形区域右下角顶点的像素纵坐标</td><td>数字，大于等于0</td></tr><tr><td>imp_line_info.<strong>total_score</strong></td><td>int</td><td>该速算题判决正误信息</td><td>1（正确）/0（错误）</td></tr><tr><td>line_word_result.<strong>word_content</strong></td><td>string</td><td>该行公式识别结果</td><td>Latex公式</td></tr></tbody></table><h3 id="图片绘制"><a href="#图片绘制" class="headerlink" title="图片绘制"></a>图片绘制</h3><p>根据以上得到的结果，imp_line_rect表示识别结果在图片中对应的文职。使用imp_line_rect对图片进行绘制，total_score为1表示结果正确，绘制绿色框，否则认为结果错误，绘制红色框。</p><p>实现代码：</p><pre class="line-numbers language-js" data-language="js"><code class="language-js"><span class="token keyword">var</span> obj <span class="token operator">=</span> res<span class="token punctuation">.</span>data<span class="token punctuation">.</span>data<span class="token punctuation">.</span>ITRResult<span class="token punctuation">.</span>multi_line_info<span class="token punctuation">.</span>imp_line_info<span class="token keyword">var</span> jsonString <span class="token operator">=</span> <span class="token constant">JSON</span><span class="token punctuation">.</span><span class="token function">stringify</span><span class="token punctuation">(</span>res<span class="token punctuation">.</span>data<span class="token punctuation">)</span>console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span>jsonString<span class="token punctuation">)</span>wx<span class="token punctuation">.</span><span class="token function">getImageInfo</span><span class="token punctuation">(</span><span class="token punctuation">&#123;</span><span class="token comment">//获取图片信息</span>    src<span class="token operator">:</span> imagePath<span class="token punctuation">,</span>    <span class="token function">success</span><span class="token punctuation">(</span><span class="token parameter">res</span><span class="token punctuation">)</span> <span class="token punctuation">&#123;</span>        than<span class="token punctuation">.</span>width <span class="token operator">=</span> res<span class="token punctuation">.</span>width        than<span class="token punctuation">.</span>height <span class="token operator">=</span> res<span class="token punctuation">.</span>height        <span class="token keyword">let</span> ctx <span class="token operator">=</span> wx<span class="token punctuation">.</span><span class="token function">createCanvasContext</span><span class="token punctuation">(</span><span class="token string">'shareImg'</span><span class="token punctuation">)</span>        than<span class="token punctuation">.</span><span class="token function">setData</span><span class="token punctuation">(</span><span class="token punctuation">&#123;</span>            width<span class="token operator">:</span> res<span class="token punctuation">.</span>width<span class="token punctuation">,</span>            height<span class="token operator">:</span> res<span class="token punctuation">.</span>height<span class="token punctuation">,</span>        <span class="token punctuation">&#125;</span><span class="token punctuation">)</span>        ctx<span class="token punctuation">.</span><span class="token function">drawImage</span><span class="token punctuation">(</span>imagePath<span class="token punctuation">,</span> <span class="token number">0</span><span class="token punctuation">,</span> <span class="token number">0</span><span class="token punctuation">,</span> res<span class="token punctuation">.</span>width<span class="token punctuation">,</span> res<span class="token punctuation">.</span>height<span class="token punctuation">)</span>        <span class="token keyword">for</span> <span class="token punctuation">(</span><span class="token keyword">let</span> i <span class="token operator">=</span> <span class="token number">0</span><span class="token punctuation">;</span> i <span class="token operator">&lt;</span> obj<span class="token punctuation">.</span>length<span class="token punctuation">;</span> i<span class="token operator">++</span><span class="token punctuation">)</span> <span class="token punctuation">&#123;</span>            <span class="token keyword">if</span> <span class="token punctuation">(</span><span class="token number">0</span> <span class="token operator">==</span> obj<span class="token punctuation">[</span>i<span class="token punctuation">]</span><span class="token punctuation">.</span>total_score<span class="token punctuation">)</span> <span class="token punctuation">&#123;</span>                ctx<span class="token punctuation">.</span><span class="token function">setStrokeStyle</span><span class="token punctuation">(</span><span class="token string">'red'</span><span class="token punctuation">)</span>            <span class="token punctuation">&#125;</span> <span class="token keyword">else</span> <span class="token punctuation">&#123;</span>                ctx<span class="token punctuation">.</span><span class="token function">setStrokeStyle</span><span class="token punctuation">(</span><span class="token string">'green'</span><span class="token punctuation">)</span>            <span class="token punctuation">&#125;</span>            ctx<span class="token punctuation">.</span><span class="token function">strokeRect</span><span class="token punctuation">(</span>obj<span class="token punctuation">[</span>i<span class="token punctuation">]</span><span class="token punctuation">.</span>imp_line_rect<span class="token punctuation">.</span>left_up_point_x<span class="token punctuation">,</span>                           obj<span class="token punctuation">[</span>i<span class="token punctuation">]</span><span class="token punctuation">.</span>imp_line_rect<span class="token punctuation">.</span>left_up_point_y<span class="token punctuation">,</span>                           obj<span class="token punctuation">[</span>i<span class="token punctuation">]</span><span class="token punctuation">.</span>imp_line_rect<span class="token punctuation">.</span>right_down_point_x <span class="token operator">-</span> obj<span class="token punctuation">[</span>i<span class="token punctuation">]</span><span class="token punctuation">.</span>imp_line_rect<span class="token punctuation">.</span>left_up_point_x<span class="token punctuation">,</span>                           obj<span class="token punctuation">[</span>i<span class="token punctuation">]</span><span class="token punctuation">.</span>imp_line_rect<span class="token punctuation">.</span>right_down_point_y <span class="token operator">-</span> obj<span class="token punctuation">[</span>i<span class="token punctuation">]</span><span class="token punctuation">.</span>imp_line_rect<span class="token punctuation">.</span>left_up_point_y<span class="token punctuation">)</span>        <span class="token punctuation">&#125;</span>        ctx<span class="token punctuation">.</span><span class="token function">draw</span><span class="token punctuation">(</span><span class="token boolean">false</span><span class="token punctuation">,</span> <span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token operator">=></span> <span class="token punctuation">&#123;</span>            wx<span class="token punctuation">.</span><span class="token function">canvasToTempFilePath</span><span class="token punctuation">(</span><span class="token punctuation">&#123;</span>                x<span class="token operator">:</span> <span class="token number">0</span><span class="token punctuation">,</span>                y<span class="token operator">:</span> <span class="token number">0</span><span class="token punctuation">,</span>                width<span class="token operator">:</span> res<span class="token punctuation">.</span>width<span class="token punctuation">,</span>                height<span class="token operator">:</span> res<span class="token punctuation">.</span>height<span class="token punctuation">,</span>                destWidth<span class="token operator">:</span> app<span class="token punctuation">.</span>globalData<span class="token punctuation">.</span>width<span class="token punctuation">,</span>                destHeight<span class="token operator">:</span> app<span class="token punctuation">.</span>globalData<span class="token punctuation">.</span>height<span class="token punctuation">,</span>                fileType<span class="token operator">:</span> <span class="token string">'jpg'</span><span class="token punctuation">,</span>                canvasId<span class="token operator">:</span> <span class="token string">'shareImg'</span><span class="token punctuation">,</span>                <span class="token function">success</span><span class="token punctuation">(</span><span class="token parameter">res</span><span class="token punctuation">)</span> <span class="token punctuation">&#123;</span>                    console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span>res<span class="token punctuation">.</span>tempFilePath<span class="token punctuation">)</span>                    than<span class="token punctuation">.</span><span class="token function">setData</span><span class="token punctuation">(</span><span class="token punctuation">&#123;</span>                        imageUrl<span class="token operator">:</span> res<span class="token punctuation">.</span>tempFilePath                    <span class="token punctuation">&#125;</span><span class="token punctuation">)</span>                <span class="token punctuation">&#125;</span><span class="token punctuation">,</span>                <span class="token function">fail</span><span class="token punctuation">(</span><span class="token parameter">err</span><span class="token punctuation">)</span> <span class="token punctuation">&#123;</span>                    console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span><span class="token string">"图片绘制失败:"</span> <span class="token operator">+</span> err<span class="token punctuation">)</span><span class="token punctuation">;</span>                <span class="token punctuation">&#125;</span>            <span class="token punctuation">&#125;</span><span class="token punctuation">)</span>        <span class="token punctuation">&#125;</span><span class="token punctuation">)</span>    <span class="token punctuation">&#125;</span><span class="token punctuation">,</span>    <span class="token function-variable function">fail</span><span class="token operator">:</span> <span class="token parameter">err</span> <span class="token operator">=></span> <span class="token punctuation">&#123;</span>        console<span class="token punctuation">.</span><span class="token function">error</span><span class="token punctuation">(</span><span class="token string">"获取图片信息失败:"</span> <span class="token operator">+</span> err<span class="token punctuation">)</span><span class="token punctuation">;</span>    <span class="token punctuation">&#125;</span><span class="token punctuation">&#125;</span><span class="token punctuation">)</span><span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre>]]></content>
      
      
      <categories>
          
          <category> MarsRescue </category>
          
      </categories>
      
      
        <tags>
            
            <tag> 题拍拍 </tag>
            
            <tag> 人工智能小程序 </tag>
            
            <tag> 改试卷小程序 </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>只会C能做哪些人工智能的有趣小案例</title>
      <link href="2021/01/zhi-hui-c-neng-zuo-na-xie-ren-gong-zhi-neng-de-you-qu-xiao-an-li/"/>
      <url>2021/01/zhi-hui-c-neng-zuo-na-xie-ren-gong-zhi-neng-de-you-qu-xiao-an-li/</url>
      
        <content type="html"><![CDATA[<h1 id="基于讯飞AI开放平台的WebAPI应用项目实践"><a href="#基于讯飞AI开放平台的WebAPI应用项目实践" class="headerlink" title="基于讯飞AI开放平台的WebAPI应用项目实践"></a><a href="">基于讯飞AI开放平台的WebAPI应用项目实践</a></h1><h1 id="一、项目概述"><a href="#一、项目概述" class="headerlink" title="一、项目概述"></a>一、项目概述</h1><h2 id="1-1-项目背景"><a href="#1-1-项目背景" class="headerlink" title="1.1 项目背景"></a>1.1 项目背景</h2><p>人工智能时代来临，人们陷入焦虑的周期将越来越短。AI正以迅猛的发展速度不断替代人类既有的工作岗位。那么人工智能就是万能的吗？拥有所有的技能吗？答案并不是，跨领域推理能力、抽象能力、自我学习的能力、独立地搜索问题、解决问题和团队配合能力、知其然也知其所以然的能力、常识、自我意识、审美、情感等等，这些方面都是机器人所不能拥有的技能。所以企业对我们的这些能力要求很高，尤其是独立地搜索问题、解决问题和团队配合尤为重要。所以，我们希望通过这门实践课程的学习，锻炼学生开发项目的实践能力，同时又能对AI能力的应用开发有比较全面的了解和掌握。</p><h2 id="1-2-项目目标"><a href="#1-2-项目目标" class="headerlink" title="1.2 项目目标"></a>1.2 项目目标</h2><p>easyAIoT的目标是平台化、简单化讯飞AI能力平台的使用。因此采用了分层化的设计思路和更加轻量化的WebAPI接口，使得应用层的开发者可以很容易的接入，并且更加容易的实现AI能力的调用。</p><h2 id="1-3-项目范围"><a href="#1-3-项目范围" class="headerlink" title="1.3 项目范围"></a>1.3 项目范围</h2><p>本门课程基于讯飞开放平台提供的WebAPI接口，并进行二次封装，提供APP层的API接口，也提供了基础能力层的接口。APP层接口可以非常容易的开发基于讯飞的AI能力，基础能力层可以不受讯飞平台的限制，通过基础能力提供的接口，可以开发其他平台的AI能力应用，或者使用在其他需要的应用场景。</p><p>目前1.0版本提供的C语言的功能如下：</p><ol><li> AIUI<strong>应用层API接口</strong>；</li><li> 语音合成<strong>应用层API接口</strong>；</li><li> 语音实时转写<strong>应用层API接口</strong>；</li><li> 人脸比对<strong>应用层API接口</strong>；</li><li> <strong>跨平台</strong>TCP/UDP/HTTP/Websocket<strong>基础能力及应用接口</strong>；</li><li> <strong>跨平台</strong>PCM录音接口；</li><li> <strong>跨平台</strong>多线程应用接口；</li><li> MD5/Base64/Sha256等加解密基础能力接口；</li><li> Json序列化和反序列化的基础能力接口；</li><li> string/map/ring buffer等数据结构基础能力接口；</li></ol><h2 id="1-4-技术路线"><a href="#1-4-技术路线" class="headerlink" title="1.4 技术路线"></a>1.4 技术路线</h2><p>源代码中包含有C语言基础、数据结构与数据处理、网络编程、多线程编程、分层框架设计、技术路线偏向于做基于C语言的应用层开发方向。</p><p>使用的硬件平台：vscode（跨平台/protable版本免安装，不仅可以直接放在电脑中运行，也可以把软件和代码插在U盘中直接运行，免除一些机房限制导致的问题）</p><p>使用的编译环境：Windows：mingw/cmake；Linux/Mac：gcc/cmake；</p><p>使用的语言：C语言</p><h2 id="1-5-定义、首字母缩写词和缩略图"><a href="#1-5-定义、首字母缩写词和缩略图" class="headerlink" title="1.5 定义、首字母缩写词和缩略图"></a>1.5 定义、首字母缩写词和缩略图</h2><table><thead><tr><th><strong>序号</strong></th><th><strong>名称</strong></th><th><strong>描述</strong></th></tr></thead><tbody><tr><td><strong>1</strong></td><td>easyAIoT</td><td>项目名称，让设备能更容易的获得人工智能的能力</td></tr><tr><td><strong>2</strong></td><td>AIUI</td><td>讯飞提供的一套用于机器交互的接口引擎，使得机器能听的懂</td></tr><tr><td><strong>3</strong></td><td>IAT</td><td>语音识别，把人的声音识别为文字的技术</td></tr><tr><td><strong>4</strong></td><td>TTS</td><td>语音合成（Text-To-Speech），通过机械的、电子的方法产生人造语音的技术</td></tr><tr><td><strong>5</strong></td><td></td><td></td></tr></tbody></table><h1 id="二、功能总览"><a href="#二、功能总览" class="headerlink" title="二、功能总览"></a>二、功能总览</h1><h2 id="2-1-项目角色"><a href="#2-1-项目角色" class="headerlink" title="2.1 项目角色"></a>2.1 项目角色</h2><p>本项目主要分为：AIUI机器交互应用、人脸比对应用、实时转写应用、语音合成应用；</p><p>也可以通过提供的基础能力层完成讯飞平台和其他AI开放平台（例如百度大脑）的AI能力集成；</p><h2 id="2-2-项目功能分解"><a href="#2-2-项目功能分解" class="headerlink" title="2.2 项目功能分解"></a>2.2 项目功能分解</h2><table><thead><tr><th><strong>序号</strong></th><th><strong>功能</strong></th><th>应用层用户</th><th>基础能力层用户</th></tr></thead><tbody><tr><td><strong>1</strong></td><td>AIUI能力接口</td><td>提供录音、简单的HTTP接入、数据封装与处理；</td><td>提供自定义回调接口，方便用户自定义处理；</td></tr><tr><td><strong>2</strong></td><td>TTS语音合成接口</td><td>提供简单的TTS合成接口；</td><td>提供开放的回调接口，方便用户自定义处理；</td></tr><tr><td><strong>3</strong></td><td>IAT语音实时转写接口</td><td>提供简单的IAT实时转写功能；</td><td>提供开放的接口，供用户自定义语音输入和业务处理；</td></tr><tr><td><strong>4</strong></td><td>人脸比对接口</td><td>提供简单的人脸比对能力，只需要提供appid等验证信息和两张人脸照片即可；</td><td>提供基础的接口，可以扩展人脸相关的处理方式；</td></tr><tr><td><strong>5</strong></td><td>网络接口</td><td>提供TCP/UDP/Http/Websocket的C语言应用层接口，可以非常方便的接入对应协议的服务平台；</td><td>提供基础的网络接口，可以更加方面的自定义对网络的连接处理；</td></tr><tr><td><strong>6</strong></td><td>录音接口</td><td></td><td>■</td></tr><tr><td><strong>7</strong></td><td>多线程接口</td><td>提供跨平台的多线程接口，Windows/Linux平台已验证，Mac暂未测试</td><td>■</td></tr><tr><td><strong>8</strong></td><td>MD5/Base64/Sha256等加解密接口</td><td>提供加解密接口，方便通信过程中的加解密处理</td><td>■</td></tr><tr><td><strong>9</strong></td><td>Json接口封装</td><td>提供了基于C语言宏的Json序列化和反序列化，比原本的cJson阅读起来更加方便理解；</td><td>■</td></tr><tr><td><strong>10</strong></td><td>string/map/ring buffer接口</td><td>提供了基础的数据处理接口，解决了C语言处理数据不方便的问题；</td><td>■</td></tr></tbody></table><h1 id="三、功能说明"><a href="#三、功能说明" class="headerlink" title="三、功能说明"></a>三、功能说明</h1><h2 id="3-1-功能框图"><a href="#3-1-功能框图" class="headerlink" title="3.1 功能框图"></a>3.1 功能框图</h2><p>下图是easyAIoT项目的分层框架图。</p><p>AI展示层：用于展示各种AI能力，通过能力层提供的模块完成；</p><p>能力层：由AI应用模块提供的能力接口和其他辅助模块构成；</p><p>平台层：目前easyAIoT使用C语言适配了讯飞平台层提供的WebAPI能力；</p><p>开发平台层：由easyAIoT开发使用的主要开发环境、编译器和调试工具组成；</p><p><img src="https://cdn.jsdelivr.net/gh/aibittek/ImageHost/img/easyAIoT%E7%B3%BB%E7%BB%9F%E5%88%86%E5%B1%82%E6%A1%86%E6%9E%B6%E5%9B%BE.png" alt="easyAIoT系统分层框架图"></p><h2 id="3-2-AIUI模块功能说明"><a href="#3-2-AIUI模块功能说明" class="headerlink" title="3.2 AIUI模块功能说明"></a>3.2 AIUI模块功能说明</h2><p>此模块提供语音识别的能力，通过提供的语音识别成文字的过程。</p><p><strong>接口说明：</strong></p><pre class="line-numbers language-c" data-language="c"><code class="language-c"><span class="token comment">/** * @brief 获取自然语言处理的结果（使用讯飞AIUIWebAPI引擎） * @param  pszAppid         应用APPID * @param  pszKey           应用APPKey * @param  pszParam         请求参数 * @param  pAudioData       请求语音数据 * @param  iAudioLen        请求语音数据长度 * @return cstring_t*       返回字符串结构体对象指针，错误返回NULL */</span><span class="token class-name">cstring_t</span> <span class="token operator">*</span><span class="token function">getNlpResult</span><span class="token punctuation">(</span><span class="token keyword">const</span> <span class="token keyword">char</span> <span class="token operator">*</span>pszAppid<span class="token punctuation">,</span> <span class="token keyword">const</span> <span class="token keyword">char</span> <span class="token operator">*</span>pszKey<span class="token punctuation">,</span> <span class="token keyword">const</span> <span class="token keyword">char</span> <span class="token operator">*</span>pszParam<span class="token punctuation">,</span>                        <span class="token keyword">void</span> <span class="token operator">*</span>pAudioData<span class="token punctuation">,</span> <span class="token keyword">int</span> iAudioLen<span class="token punctuation">)</span><span class="token punctuation">;</span><span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre><p><strong>实例代码：</strong></p><pre class="line-numbers language-c" data-language="c"><code class="language-c"><span class="token keyword">int</span> <span class="token function">main</span><span class="token punctuation">(</span><span class="token keyword">int</span> argc<span class="token punctuation">,</span> <span class="token keyword">char</span> <span class="token operator">*</span>argv<span class="token punctuation">[</span><span class="token punctuation">]</span><span class="token punctuation">)</span><span class="token punctuation">&#123;</span>    <span class="token comment">// 修改为自己的appid，key、secret和auth_id,网址https://aiui.xfyun.cn/app/&lt;替换自己的appid>/info</span>    <span class="token keyword">const</span> <span class="token keyword">char</span> <span class="token operator">*</span>pszAppid <span class="token operator">=</span> <span class="token string">"xxxxxxxx"</span><span class="token punctuation">;</span>    <span class="token keyword">const</span> <span class="token keyword">char</span> <span class="token operator">*</span>pszKey <span class="token operator">=</span> <span class="token string">"xxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxx"</span><span class="token punctuation">;</span>    <span class="token keyword">const</span> <span class="token keyword">char</span> <span class="token operator">*</span>pszParam <span class="token operator">=</span> <span class="token string">"&#123;\"result_level\":\"plain\",\"auth_id\":\"xxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxx\",\"data_type\":\"audio\",\"sample_rate\":\"16000\",\"scene\":\"main_box\"&#125;"</span><span class="token punctuation">;</span>    <span class="token comment">// 1.读取语音文件</span>    <span class="token class-name">cstring_t</span> <span class="token operator">*</span>pAudioData <span class="token operator">=</span> <span class="token function">readFile</span><span class="token punctuation">(</span><span class="token string">"../Res/test.pcm"</span><span class="token punctuation">)</span><span class="token punctuation">;</span>    <span class="token keyword">if</span> <span class="token punctuation">(</span><span class="token operator">!</span>pAudioData<span class="token punctuation">)</span>    <span class="token punctuation">&#123;</span>        <span class="token function">LOG</span><span class="token punctuation">(</span>EERROR<span class="token punctuation">,</span> <span class="token string">"read audio file error"</span><span class="token punctuation">)</span><span class="token punctuation">;</span>        <span class="token keyword">return</span><span class="token punctuation">;</span>    <span class="token punctuation">&#125;</span>    <span class="token function">LOG</span><span class="token punctuation">(</span>EDEBUG<span class="token punctuation">,</span> <span class="token string">"pcm len:%d"</span><span class="token punctuation">,</span> pAudioData<span class="token operator">-></span><span class="token function">length</span><span class="token punctuation">(</span>pAudioData<span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span>    <span class="token comment">// 2.提供信息进行语音识别成文本</span>    <span class="token class-name">cstring_t</span> <span class="token operator">*</span>pResult <span class="token operator">=</span> <span class="token function">getNlpResult</span><span class="token punctuation">(</span>pszAppid<span class="token punctuation">,</span> pszKey<span class="token punctuation">,</span> pszParam<span class="token punctuation">,</span> pAudioData<span class="token operator">-></span>str<span class="token punctuation">,</span> pAudioData<span class="token operator">-></span>len<span class="token punctuation">)</span><span class="token punctuation">;</span>    <span class="token keyword">if</span> <span class="token punctuation">(</span>pResult<span class="token punctuation">)</span>    <span class="token punctuation">&#123;</span>        <span class="token function">LOG</span><span class="token punctuation">(</span>EDEBUG<span class="token punctuation">,</span> <span class="token string">"识别结果：%s"</span><span class="token punctuation">,</span> pResult<span class="token operator">-></span>str<span class="token punctuation">)</span><span class="token punctuation">;</span>        <span class="token function">cstring_del</span><span class="token punctuation">(</span>pResult<span class="token punctuation">)</span><span class="token punctuation">;</span>    <span class="token punctuation">&#125;</span>    <span class="token function">cstring_del</span><span class="token punctuation">(</span>pAudioData<span class="token punctuation">)</span><span class="token punctuation">;</span>    <span class="token keyword">return</span> <span class="token number">0</span><span class="token punctuation">;</span><span class="token punctuation">&#125;</span><span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre><p>上述代码中的param参数是json格式，说明如下：</p><pre class="line-numbers language-json" data-language="json"><code class="language-json"><span class="token punctuation">&#123;</span><span class="token property">"result_level"</span><span class="token operator">:</span> <span class="token string">"plain"</span><span class="token punctuation">,</span> <span class="token comment">//提供结果格式：简单文本格式</span><span class="token property">"auth_id"</span><span class="token operator">:</span> <span class="token string">"xxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxx"</span><span class="token punctuation">,</span> <span class="token comment">//请求的auth_id，平台配置界面中查询</span><span class="token property">"data_type"</span><span class="token operator">:</span> <span class="token string">"audio"</span><span class="token punctuation">,</span> <span class="token comment">// 请求的数据类型，这里是语音，也可以为文本</span><span class="token property">"sample_rate"</span><span class="token operator">:</span> <span class="token string">"16000"</span><span class="token punctuation">,</span> <span class="token comment">// 如果请求的是audio，sample_rate表示音频采样率</span><span class="token property">"scene"</span><span class="token operator">:</span> <span class="token string">"main_box"</span> <span class="token comment">// 请求场景，未发布版本，需要增加"_box"后缀</span><span class="token punctuation">&#125;</span><span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre><p><strong>程序运行结果：</strong></p><p><img src="https://cdn.jsdelivr.net/gh/aibittek/ImageHost/img/image-20201208122536071.png" alt="image-20201208122536071"></p><p>可以看到，返回的结果也是一个json格式，识别出了请求的语音文本为”今天全国新增确诊病例”，服务端返回的结果为：”今天全国新冠肺炎新增确诊病例15例”。</p><p><strong>注意</strong>，获得正确的返回结果，需要在应用中增加相关的技能，按照上例需要在应用中增加相关技能，并点击右上角的保存即可生效。</p><p><img src="https://cdn.jsdelivr.net/gh/aibittek/ImageHost/img/image-20201208123453373.png" alt="image-20201208123453373"></p><h2 id="3-3-TTS语音合成模块功能说明"><a href="#3-3-TTS语音合成模块功能说明" class="headerlink" title="3.3 TTS语音合成模块功能说明"></a>3.3 TTS语音合成模块功能说明</h2><p><strong>接口说明</strong></p><pre class="line-numbers language-c" data-language="c"><code class="language-c"><span class="token comment">/** * @brief 文字转语音 * @param  appid            讯飞appid * @param  key              讯飞api key * @param  param            讯飞合成参数 * @param  text             合成的文本内容 * @param  pathname         合成的结果音频文件路径名称 * @return true             合成成功 * @return false            合成失败 */</span>bool <span class="token function">getTTS</span><span class="token punctuation">(</span><span class="token keyword">const</span> <span class="token keyword">char</span> <span class="token operator">*</span>appid<span class="token punctuation">,</span> <span class="token keyword">const</span> <span class="token keyword">char</span> <span class="token operator">*</span>key<span class="token punctuation">,</span> <span class="token keyword">const</span> <span class="token keyword">char</span> <span class="token operator">*</span>param<span class="token punctuation">,</span>     <span class="token keyword">const</span> <span class="token keyword">char</span> <span class="token operator">*</span>text<span class="token punctuation">,</span> <span class="token keyword">const</span> <span class="token keyword">char</span> <span class="token operator">*</span>pathname<span class="token punctuation">)</span><span class="token punctuation">;</span><span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre><p><strong>示例代码</strong></p><pre class="line-numbers language-c" data-language="c"><code class="language-c"><span class="token keyword">int</span> <span class="token function">main</span><span class="token punctuation">(</span><span class="token keyword">int</span> argc<span class="token punctuation">,</span> <span class="token keyword">char</span> <span class="token operator">*</span>argv<span class="token punctuation">[</span><span class="token punctuation">]</span><span class="token punctuation">)</span><span class="token punctuation">&#123;</span>    <span class="token comment">// 修改为自己应用的appid，key和secret</span>    <span class="token keyword">const</span> <span class="token keyword">char</span> <span class="token operator">*</span>appid <span class="token operator">=</span> <span class="token string">"xxxxxxxx"</span><span class="token punctuation">;</span>    <span class="token keyword">const</span> <span class="token keyword">char</span> <span class="token operator">*</span>key <span class="token operator">=</span> <span class="token string">"xxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxx"</span><span class="token punctuation">;</span>    <span class="token keyword">const</span> <span class="token keyword">char</span> <span class="token operator">*</span>secret <span class="token operator">=</span> <span class="token string">"xxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxx"</span><span class="token punctuation">;</span>    <span class="token function">getTTS</span><span class="token punctuation">(</span>appid<span class="token punctuation">,</span> key<span class="token punctuation">,</span> secret<span class="token punctuation">,</span> <span class="token string">"欢迎来到比特人生的世界"</span><span class="token punctuation">,</span> <span class="token string">"../Res/tts.pcm"</span><span class="token punctuation">)</span><span class="token punctuation">;</span>    <span class="token keyword">return</span> <span class="token number">0</span><span class="token punctuation">;</span><span class="token punctuation">&#125;</span><span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre><p><strong>程序运行结果</strong></p><p>生成的语音文件放在了Res/tts.pcm中，可以打开音频软件AU，设置16000采样，16bit深的音频信息来听取声音内容和要转写的文字内容是否一致。</p><p><img src="https://cdn.jsdelivr.net/gh/aibittek/ImageHost/img/image-20201209165052710.png" alt="image-20201209165052710"></p><h2 id="3-4-IAT语音转写功能说明"><a href="#3-4-IAT语音转写功能说明" class="headerlink" title="3.4 IAT语音转写功能说明"></a>3.4 IAT语音转写功能说明</h2><p><strong>接口说明</strong></p><pre class="line-numbers language-c" data-language="c"><code class="language-c"><span class="token comment">/** * @brief 语音转写 * @param  appid            应用appid * @param  key              应用apikey * @param  secret           应用secret */</span><span class="token keyword">void</span> <span class="token function">iat</span><span class="token punctuation">(</span><span class="token keyword">const</span> <span class="token keyword">char</span> <span class="token operator">*</span>appid<span class="token punctuation">,</span> <span class="token keyword">const</span> <span class="token keyword">char</span> <span class="token operator">*</span>key<span class="token punctuation">,</span> <span class="token keyword">const</span> <span class="token keyword">char</span> <span class="token operator">*</span>secret<span class="token punctuation">)</span><span class="token punctuation">;</span><span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre><p><strong>示例代码</strong></p><pre class="line-numbers language-c" data-language="c"><code class="language-c"><span class="token keyword">int</span> <span class="token function">main</span><span class="token punctuation">(</span><span class="token keyword">int</span> argc<span class="token punctuation">,</span> <span class="token keyword">char</span> <span class="token operator">*</span>argv<span class="token punctuation">[</span><span class="token punctuation">]</span><span class="token punctuation">)</span><span class="token punctuation">&#123;</span>    <span class="token comment">// 修改为自己应用的appid，key和secret</span>    <span class="token keyword">const</span> <span class="token keyword">char</span> <span class="token operator">*</span>appid <span class="token operator">=</span> <span class="token string">"xxxxxxxx"</span><span class="token punctuation">;</span>    <span class="token keyword">const</span> <span class="token keyword">char</span> <span class="token operator">*</span>key <span class="token operator">=</span> <span class="token string">"xxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxx"</span><span class="token punctuation">;</span>    <span class="token keyword">const</span> <span class="token keyword">char</span> <span class="token operator">*</span>secret <span class="token operator">=</span> <span class="token string">"xxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxx"</span><span class="token punctuation">;</span>    <span class="token function">LOG</span><span class="token punctuation">(</span>EDEBUG<span class="token punctuation">,</span> <span class="token string">"尝试说一些话，看看有什么有趣的事情会发生(●'◡'●)"</span><span class="token punctuation">)</span><span class="token punctuation">;</span>    <span class="token function">iat</span><span class="token punctuation">(</span>appid<span class="token punctuation">,</span> key<span class="token punctuation">,</span> secret<span class="token punctuation">)</span><span class="token punctuation">;</span>    <span class="token keyword">return</span> <span class="token number">0</span><span class="token punctuation">;</span><span class="token punctuation">&#125;</span><span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre><p><strong>程序运行结果</strong></p><p>程序运行后，可以一边说话，一边看返回结果。</p><p><img src="https://cdn.jsdelivr.net/gh/aibittek/ImageHost/img/image-20201208213345015.png" alt="image-20201208213345015"></p><h2 id="3-5人脸比对接口功能说明"><a href="#3-5人脸比对接口功能说明" class="headerlink" title="3.5人脸比对接口功能说明"></a>3.5人脸比对接口功能说明</h2><p><strong>接口说明</strong></p><pre class="line-numbers language-c" data-language="c"><code class="language-c"><span class="token comment">/** * @brief 讯飞人脸对比功能 * @param  pszAPPID         讯飞appid * @param  pszAPPSecret     讯飞api secret * @param  pszAPPKey        讯飞app key * @param  pszImagePath1    比较的图片1 * @param  pszImagePath2    比较的图片2 * @return float            比较的相似度，取值0-1，0.67以上阈值是同一个人的可行性很大 */</span><span class="token keyword">double</span> <span class="token function">fFaceCompare</span><span class="token punctuation">(</span><span class="token keyword">const</span> <span class="token keyword">char</span> <span class="token operator">*</span>pszAPPID<span class="token punctuation">,</span>         <span class="token keyword">const</span> <span class="token keyword">char</span> <span class="token operator">*</span>pszAPPSecret<span class="token punctuation">,</span> <span class="token keyword">const</span> <span class="token keyword">char</span> <span class="token operator">*</span>pszAPPKey<span class="token punctuation">,</span>        <span class="token keyword">const</span> <span class="token keyword">char</span> <span class="token operator">*</span>pszImagePath1<span class="token punctuation">,</span> <span class="token keyword">const</span> <span class="token keyword">char</span> <span class="token operator">*</span>pszImagePath2<span class="token punctuation">)</span><span class="token punctuation">;</span><span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre><p><strong>示例代码</strong></p><pre class="line-numbers language-c" data-language="c"><code class="language-c"><span class="token keyword">int</span> <span class="token function">main</span><span class="token punctuation">(</span><span class="token keyword">int</span> argc<span class="token punctuation">,</span> <span class="token keyword">char</span> <span class="token operator">*</span>argv<span class="token punctuation">[</span><span class="token punctuation">]</span><span class="token punctuation">)</span><span class="token punctuation">&#123;</span>    <span class="token comment">// 修改为自己应用的appid，key和secret</span>    <span class="token keyword">const</span> <span class="token keyword">char</span> <span class="token operator">*</span>appid <span class="token operator">=</span> <span class="token string">"xxxxxxxx"</span><span class="token punctuation">;</span>    <span class="token keyword">const</span> <span class="token keyword">char</span> <span class="token operator">*</span>key <span class="token operator">=</span> <span class="token string">"xxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxx"</span><span class="token punctuation">;</span>    <span class="token keyword">const</span> <span class="token keyword">char</span> <span class="token operator">*</span>secret <span class="token operator">=</span> <span class="token string">"xxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxx"</span><span class="token punctuation">;</span>    <span class="token keyword">double</span> fScore <span class="token operator">=</span> <span class="token function">fFaceCompare</span><span class="token punctuation">(</span>appid<span class="token punctuation">,</span> secret<span class="token punctuation">,</span> key<span class="token punctuation">,</span> <span class="token string">"../Res/1.jpg"</span><span class="token punctuation">,</span> <span class="token string">"../Res/2.jpg"</span><span class="token punctuation">)</span><span class="token punctuation">;</span><span class="token function">printf</span><span class="token punctuation">(</span><span class="token string">"face compare score:%.2f\n"</span><span class="token punctuation">,</span> fScore<span class="token punctuation">)</span><span class="token punctuation">;</span>    <span class="token keyword">return</span> <span class="token number">0</span><span class="token punctuation">;</span><span class="token punctuation">&#125;</span><span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre><p>使用的两张图片如下</p><p><img src="https://cdn.jsdelivr.net/gh/aibittek/ImageHost/img/1.jpg" alt="1"></p><p><img src="https://cdn.jsdelivr.net/gh/aibittek/ImageHost/img/2-1607434767599.jpg" alt="2"></p><p><strong>程序运行结果</strong></p><pre class="line-numbers language-none"><code class="language-none">[EDEBUG][E:\Source\C\easyAIoT\APP\FaceCompare.c fFaceCompare line:144]body:&#123;&quot;header&quot;:&#123;&quot;code&quot;:0,&quot;message&quot;:&quot;success&quot;,&quot;sid&quot;:&quot;ase000d52ea@hu17642958dc90212882&quot;&#125;,&quot;payload&quot;:&#123;&quot;face_compare_result&quot;:&#123;&quot;compress&quot;:&quot;raw&quot;,&quot;encoding&quot;:&quot;utf8&quot;,&quot;format&quot;:&quot;json&quot;,&quot;text&quot;:&quot;ewoJInJldCIgOiAwLAoJInNjb3JlIiA6IDAuOTc1NTI1Nzk2NDEzNDIxNjMKfQo&#x3D;&quot;&#125;&#125;&#125;[EDEBUG][E:\Source\C\easyAIoT\APP\FaceCompare.c fGetScoreResult line:74]szResponse:&#123;&quot;header&quot;:&#123;&quot;code&quot;:0,&quot;message&quot;:&quot;success&quot;,&quot;sid&quot;:&quot;ase000d52ea@hu17642958dc90212882&quot;&#125;,&quot;payload&quot;:&#123;&quot;face_compare_result&quot;:&#123;&quot;compress&quot;:&quot;raw&quot;,&quot;encoding&quot;:&quot;utf8&quot;,&quot;format&quot;:&quot;json&quot;,&quot;text&quot;:&quot;ewoJInJldCIgOiAwLAoJInNjb3JlIiA6IDAuOTc1NTI1Nzk2NDEzNDIxNjMKfQo&#x3D;&quot;&#125;&#125;&#125;       [EDEBUG][E:\Source\C\easyAIoT\APP\FaceCompare.c fGetScoreResult line:90]score json:&#123;        &quot;ret&quot; : 0,        &quot;score&quot; : 0.97552579641342163&#125;[EDEBUG][E:\Source\C\easyAIoT\APP\FaceCompare.c fGetScoreResult line:101]ret:0, score:0.98face compare score:0.98<span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre><p>以上两张图片的得分0.98，代表识别的两张图片非常像。</p><h2 id="3-6-网络接口功能说明"><a href="#3-6-网络接口功能说明" class="headerlink" title="3.6 网络接口功能说明"></a>3.6 网络接口功能说明</h2><h3 id="3-6-1-tcp功能"><a href="#3-6-1-tcp功能" class="headerlink" title="3.6.1 tcp功能"></a>3.6.1 tcp功能</h3><p><strong>接口说明</strong></p><pre class="line-numbers language-c" data-language="c"><code class="language-c"><span class="token comment">/** * @brief 网络接收回调 */</span><span class="token keyword">typedef</span> <span class="token function">bool</span> <span class="token punctuation">(</span><span class="token operator">*</span>fnSockCallback<span class="token punctuation">)</span><span class="token punctuation">(</span><span class="token keyword">struct</span> <span class="token class-name">SSockClient</span> <span class="token operator">*</span>pstClient<span class="token punctuation">,</span> <span class="token keyword">void</span> <span class="token operator">*</span>pvUserData<span class="token punctuation">,</span> <span class="token keyword">void</span> <span class="token operator">*</span>pvData<span class="token punctuation">,</span> <span class="token keyword">int</span> iLen<span class="token punctuation">)</span><span class="token punctuation">;</span><span class="token comment">/** * @brief 网络通信结构体，包含创建网络、连接网络、关闭网络，发送数据和网络通信事件循环 */</span><span class="token keyword">typedef</span> <span class="token keyword">struct</span> <span class="token class-name">SSockClient</span> <span class="token punctuation">&#123;</span>    <span class="token class-name">sock_t</span>          iSocket<span class="token punctuation">;</span>    <span class="token keyword">int</span>             iRecvBufferSize<span class="token punctuation">;</span>    <span class="token keyword">int</span>             iSendBufferSize<span class="token punctuation">;</span>    <span class="token keyword">int</span>             iProtocol<span class="token punctuation">;</span>    <span class="token keyword">struct</span> <span class="token class-name">in_addr</span>  iServerIp<span class="token punctuation">;</span>    <span class="token keyword">short</span>           nServerPort<span class="token punctuation">;</span>    <span class="token function">bool</span> <span class="token punctuation">(</span><span class="token operator">*</span>bCreate<span class="token punctuation">)</span><span class="token punctuation">(</span><span class="token keyword">struct</span> <span class="token class-name">SSockClient</span> <span class="token operator">*</span>pstClient<span class="token punctuation">,</span> <span class="token keyword">const</span> <span class="token keyword">char</span> <span class="token operator">*</span>ip<span class="token punctuation">,</span> <span class="token keyword">short</span> nPort<span class="token punctuation">)</span><span class="token punctuation">;</span>    <span class="token function">bool</span> <span class="token punctuation">(</span><span class="token operator">*</span>bConnect<span class="token punctuation">)</span><span class="token punctuation">(</span><span class="token keyword">struct</span> <span class="token class-name">SSockClient</span> <span class="token operator">*</span>pstClient<span class="token punctuation">)</span><span class="token punctuation">;</span>    <span class="token keyword">void</span> <span class="token punctuation">(</span><span class="token operator">*</span>vClose<span class="token punctuation">)</span><span class="token punctuation">(</span><span class="token keyword">struct</span> <span class="token class-name">SSockClient</span> <span class="token operator">*</span>pstClient<span class="token punctuation">)</span><span class="token punctuation">;</span>    <span class="token keyword">int</span> <span class="token punctuation">(</span><span class="token operator">*</span>iSend<span class="token punctuation">)</span><span class="token punctuation">(</span><span class="token keyword">struct</span> <span class="token class-name">SSockClient</span> <span class="token operator">*</span>pstClient<span class="token punctuation">,</span> <span class="token keyword">void</span> <span class="token operator">*</span>pvData<span class="token punctuation">,</span> <span class="token keyword">int</span> iLen<span class="token punctuation">)</span><span class="token punctuation">;</span>    <span class="token function">bool</span> <span class="token punctuation">(</span><span class="token operator">*</span>bEventLoop<span class="token punctuation">)</span><span class="token punctuation">(</span><span class="token keyword">struct</span> <span class="token class-name">SSockClient</span> <span class="token operator">*</span>pstClient<span class="token punctuation">,</span> fnSockCallback cb<span class="token punctuation">,</span> <span class="token keyword">void</span> <span class="token operator">*</span>pvUserData<span class="token punctuation">,</span> <span class="token keyword">int</span> <span class="token operator">*</span>piLoop<span class="token punctuation">,</span> <span class="token keyword">int</span> iTimeOut<span class="token punctuation">)</span><span class="token punctuation">;</span><span class="token punctuation">&#125;</span>SSockClient_t<span class="token punctuation">;</span><span class="token comment">/** * @brief 网络功能初始化 * @param  pstClient        网络功能对象 * @return true             网络初始化成功 * @return false            网络初始化失败 */</span>bool <span class="token function">bSockInit</span><span class="token punctuation">(</span>SSockClient_t <span class="token operator">*</span>pstClient<span class="token punctuation">)</span><span class="token punctuation">;</span><span class="token comment">/** * @brief 网络功能反初始化 * @param  pstClient        网络功能对象 * @return true             网络反初始化成功 * @return false            网络反初始化成功 */</span>bool <span class="token function">bSockUninit</span><span class="token punctuation">(</span>SSockClient_t <span class="token operator">*</span>pstClient<span class="token punctuation">)</span><span class="token punctuation">;</span><span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre><p><strong>示例代码</strong></p><pre class="line-numbers language-c" data-language="c"><code class="language-c"><span class="token comment">// 回调函数，当服务端有数据发送回来时执行这个回调</span>bool <span class="token function">bSockCallback</span><span class="token punctuation">(</span><span class="token keyword">struct</span> <span class="token class-name">SSockClient</span> <span class="token operator">*</span>pstClient<span class="token punctuation">,</span> <span class="token keyword">void</span> <span class="token operator">*</span>pvUserData<span class="token punctuation">,</span> <span class="token keyword">void</span> <span class="token operator">*</span>pvData<span class="token punctuation">,</span> <span class="token keyword">int</span> iLen<span class="token punctuation">)</span><span class="token punctuation">&#123;</span>    <span class="token function">printf</span><span class="token punctuation">(</span><span class="token string">"bSockCallback called:%s\r\n"</span><span class="token punctuation">,</span> pvData<span class="token punctuation">)</span><span class="token punctuation">;</span>    <span class="token keyword">return</span> true<span class="token punctuation">;</span><span class="token punctuation">&#125;</span><span class="token keyword">int</span> <span class="token function">main</span><span class="token punctuation">(</span><span class="token keyword">int</span> argc<span class="token punctuation">,</span> <span class="token keyword">char</span> <span class="token operator">*</span>argv<span class="token punctuation">[</span><span class="token punctuation">]</span><span class="token punctuation">)</span><span class="token punctuation">&#123;</span>    <span class="token keyword">int</span> iLoop <span class="token operator">=</span> <span class="token number">1</span><span class="token punctuation">;</span>    <span class="token comment">// 请求头信息</span>    <span class="token keyword">const</span> <span class="token keyword">char</span> header<span class="token punctuation">[</span><span class="token punctuation">]</span> <span class="token operator">=</span>        <span class="token punctuation">&#123;</span>            <span class="token string">"GET / HTTP/1.1\r\n"</span>            <span class="token string">"Host: www.baidu.com\r\n"</span>            <span class="token string">"Connection: keep-alive\r\n"</span>            <span class="token string">"Accept: */*\r\n\r\n"</span><span class="token punctuation">&#125;</span><span class="token punctuation">;</span>    <span class="token comment">// 声明网络结构体变量</span>    SSockClient_t stSockClient<span class="token punctuation">;</span>    <span class="token comment">// 初始化网络结构体</span>    <span class="token function">bSockInit</span><span class="token punctuation">(</span><span class="token operator">&amp;</span>stSockClient<span class="token punctuation">)</span><span class="token punctuation">;</span>    <span class="token comment">// 创建socket连接对象</span>    stSockClient<span class="token punctuation">.</span><span class="token function">bCreate</span><span class="token punctuation">(</span><span class="token operator">&amp;</span>stSockClient<span class="token punctuation">,</span> <span class="token string">"14.215.177.39"</span><span class="token punctuation">,</span> <span class="token number">80</span><span class="token punctuation">)</span><span class="token punctuation">;</span>    <span class="token comment">// 连接服务端</span>    stSockClient<span class="token punctuation">.</span><span class="token function">bConnect</span><span class="token punctuation">(</span><span class="token operator">&amp;</span>stSockClient<span class="token punctuation">)</span><span class="token punctuation">;</span>    <span class="token comment">// 发送数据给服务端</span>    stSockClient<span class="token punctuation">.</span><span class="token function">iSend</span><span class="token punctuation">(</span><span class="token operator">&amp;</span>stSockClient<span class="token punctuation">,</span> <span class="token punctuation">(</span><span class="token keyword">void</span> <span class="token operator">*</span><span class="token punctuation">)</span>header<span class="token punctuation">,</span> <span class="token function">strlen</span><span class="token punctuation">(</span>header<span class="token punctuation">)</span> <span class="token operator">+</span> <span class="token number">1</span><span class="token punctuation">)</span><span class="token punctuation">;</span>    <span class="token comment">// 等待网络事件，通过bSockCallback处理网络事件</span>    stSockClient<span class="token punctuation">.</span><span class="token function">bEventLoop</span><span class="token punctuation">(</span><span class="token operator">&amp;</span>stSockClient<span class="token punctuation">,</span> bSockCallback<span class="token punctuation">,</span> <span class="token constant">NULL</span><span class="token punctuation">,</span> <span class="token operator">&amp;</span>iLoop<span class="token punctuation">,</span> <span class="token number">1000</span><span class="token punctuation">)</span><span class="token punctuation">;</span>    <span class="token keyword">return</span> <span class="token number">0</span><span class="token punctuation">;</span><span class="token punctuation">&#125;</span><span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre><p><strong>程序运行结果</strong></p><p><img src="https://cdn.jsdelivr.net/gh/aibittek/ImageHost/img/image-20201209105106375.png" alt="image-20201209105106375"></p><h3 id="3-6-2-HTTP功能"><a href="#3-6-2-HTTP功能" class="headerlink" title="3.6.2 HTTP功能"></a>3.6.2 HTTP功能</h3><p><strong>接口说明</strong></p><pre class="line-numbers language-c" data-language="c"><code class="language-c"><span class="token comment">/** * @brief 连接http服务端 *  * @param pstHttpInfo httpclient的结构体，包含了请求、响应、网络连接、http解析四个功能 * @param pszUrl 访问的http url * @param pszExtraHeader 额外的头文件 * @param pvBody 如果是post消息，需要提供这一项，将会填充到http请求的body中 * @param iSize body的长度 *  * @return 调用成功返回true，否则返回false *  * @note 注意返回结果在pstHttpInfo的stResponse成员中，并且调用完成后 *       要通过bHttpClose来释放pstHttpInfo中的资源 */</span>bool <span class="token function">bConnectHttpServer</span><span class="token punctuation">(</span>SEIHttpInfo_t <span class="token operator">*</span>pstHttpInfo<span class="token punctuation">,</span> <span class="token keyword">const</span> <span class="token keyword">char</span> <span class="token operator">*</span>pszUrl<span class="token punctuation">,</span> <span class="token keyword">const</span> <span class="token keyword">char</span> <span class="token operator">*</span>pszExtraHeader<span class="token punctuation">,</span> <span class="token keyword">void</span><span class="token operator">*</span> pvBody<span class="token punctuation">,</span> <span class="token keyword">int</span> iSize<span class="token punctuation">)</span><span class="token punctuation">;</span><span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre><p><strong>示例代码</strong></p><pre class="line-numbers language-c" data-language="c"><code class="language-c"><span class="token keyword">int</span> <span class="token function">main</span><span class="token punctuation">(</span><span class="token keyword">int</span> argc<span class="token punctuation">,</span> <span class="token keyword">char</span> <span class="token operator">*</span>argv<span class="token punctuation">[</span><span class="token punctuation">]</span><span class="token punctuation">)</span><span class="token punctuation">&#123;</span>    SEIHttpInfo_t stHttpInfo<span class="token punctuation">;</span>    <span class="token keyword">const</span> <span class="token keyword">char</span> <span class="token operator">*</span>pszUrl <span class="token operator">=</span> <span class="token string">"http://www.baidu.com"</span><span class="token punctuation">;</span>    <span class="token comment">// 连接HTTP服务器</span>    <span class="token function">bConnectHttpServer</span><span class="token punctuation">(</span><span class="token operator">&amp;</span>stHttpInfo<span class="token punctuation">,</span> pszUrl<span class="token punctuation">,</span> <span class="token constant">NULL</span><span class="token punctuation">,</span> <span class="token constant">NULL</span><span class="token punctuation">,</span> <span class="token number">0</span><span class="token punctuation">)</span><span class="token punctuation">;</span>    <span class="token function">LOG</span><span class="token punctuation">(</span>EDEBUG<span class="token punctuation">,</span> <span class="token string">"status:%d"</span><span class="token punctuation">,</span> stHttpInfo<span class="token punctuation">.</span>stResponse<span class="token punctuation">.</span>iStatus<span class="token punctuation">)</span><span class="token punctuation">;</span>    <span class="token function">LOG</span><span class="token punctuation">(</span>EDEBUG<span class="token punctuation">,</span> <span class="token string">"body:%d"</span><span class="token punctuation">,</span> stHttpInfo<span class="token punctuation">.</span>stResponse<span class="token punctuation">.</span>pstBody<span class="token operator">-></span>sBuffer<span class="token punctuation">)</span><span class="token punctuation">;</span>    <span class="token function">bHttpClose</span><span class="token punctuation">(</span><span class="token operator">&amp;</span>stHttpInfo<span class="token punctuation">)</span><span class="token punctuation">;</span>    <span class="token keyword">return</span> <span class="token number">0</span><span class="token punctuation">;</span><span class="token punctuation">&#125;</span><span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre><p><strong>程序运行结果</strong></p><p>status的返回值为http的状态码，200代表正常返回，body是服务端返回的内容，以上代码会返回网址的首页信息，因此会看到终端输出的是网页的内容信息。</p><p><img src="https://cdn.jsdelivr.net/gh/aibittek/ImageHost/img/image-20201209112031575.png" alt="image-20201209112031575"></p><h3 id="3-6-3-Websocket功能"><a href="#3-6-3-Websocket功能" class="headerlink" title="3.6.3 Websocket功能"></a>3.6.3 Websocket功能</h3><p><strong>接口说明</strong></p><pre class="line-numbers language-c" data-language="c"><code class="language-c"><span class="token comment">/** * @brief 连接到websocket服务端 * @param  c_pszUrl         websocket服务器的URL * @param  cb               websocket服务器的响应信息 * @return true             连接成功 * @return false            连接失败 */</span>bool <span class="token function">bWebsocketConnect</span><span class="token punctuation">(</span><span class="token keyword">const</span> <span class="token keyword">char</span> <span class="token operator">*</span>c_pszUrl<span class="token punctuation">,</span> fnWebsocketCallback cb<span class="token punctuation">)</span><span class="token punctuation">;</span><span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre><p><strong>示例代码</strong></p><pre class="line-numbers language-c" data-language="c"><code class="language-c"><span class="token keyword">int</span> <span class="token function">main</span><span class="token punctuation">(</span><span class="token keyword">int</span> argc<span class="token punctuation">,</span> <span class="token keyword">char</span> <span class="token operator">*</span>argv<span class="token punctuation">[</span><span class="token punctuation">]</span><span class="token punctuation">)</span><span class="token punctuation">&#123;</span>    <span class="token keyword">const</span> <span class="token keyword">char</span> <span class="token operator">*</span>appid <span class="token operator">=</span> <span class="token string">"xxxxxxxx"</span><span class="token punctuation">;</span>    <span class="token keyword">const</span> <span class="token keyword">char</span> <span class="token operator">*</span>app_secret <span class="token operator">=</span> <span class="token string">"xxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxx"</span><span class="token punctuation">;</span>    <span class="token keyword">const</span> <span class="token keyword">char</span> <span class="token operator">*</span>app_key <span class="token operator">=</span> <span class="token string">"xxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxx"</span><span class="token punctuation">;</span>    <span class="token function">getTTS</span><span class="token punctuation">(</span>appid<span class="token punctuation">,</span> app_key<span class="token punctuation">,</span> app_secret<span class="token punctuation">,</span> <span class="token string">"欢迎来到比特人生的世界"</span><span class="token punctuation">,</span> <span class="token string">"./tts.pcm"</span><span class="token punctuation">)</span><span class="token punctuation">;</span>    <span class="token keyword">return</span> <span class="token number">0</span><span class="token punctuation">;</span><span class="token punctuation">&#125;</span><span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre><p><strong>程序运行结果</strong></p><p>合成的结果保存到了tts.pcm中，可以打开adobe auditiom软件，设置为16000K 16bit听声音是否和文本内容一致。</p><p><img src="https://cdn.jsdelivr.net/gh/aibittek/ImageHost/img/image-20201209145844006.png" alt="image-20201209145844006"></p><h2 id="3-7-录音接口功能说明"><a href="#3-7-录音接口功能说明" class="headerlink" title="3.7 录音接口功能说明"></a>3.7 录音接口功能说明</h2><p><strong>接口说明</strong></p><pre class="line-numbers language-c" data-language="c"><code class="language-c"><span class="token keyword">typedef</span> <span class="token keyword">void</span><span class="token operator">*</span>   AudioHandle<span class="token punctuation">;</span><span class="token comment">/** * @brief 录音回调 * @param pvHandle      录音对象，AudioRecorder_t类型的指针 * @param iType         录音状态，AUDIO_OPEN表示录音设备打开成功，AUDIO_DATA表示录音数据 * @param pvUserData    用户传递到回调的私有数据 * @param pvData        录音数据，当iType=AUDIO_DATA时有效 * @param iLen          录音数据长度，当iType=AUDIO_DATA时有效 */</span><span class="token keyword">typedef</span> <span class="token keyword">void</span>    <span class="token punctuation">(</span><span class="token operator">*</span>RecordCallback<span class="token punctuation">)</span><span class="token punctuation">(</span><span class="token keyword">void</span><span class="token operator">*</span> pvHandle<span class="token punctuation">,</span> <span class="token class-name">int32_t</span> iType<span class="token punctuation">,</span> <span class="token keyword">void</span><span class="token operator">*</span> pvUserData<span class="token punctuation">,</span> <span class="token keyword">void</span><span class="token operator">*</span> pvData<span class="token punctuation">,</span> <span class="token class-name">int32_t</span> iLen<span class="token punctuation">)</span><span class="token punctuation">;</span><span class="token comment">/** * @brief 录音配置结构体 */</span><span class="token keyword">typedef</span> <span class="token keyword">struct</span> <span class="token class-name">AudioConfig</span> <span class="token punctuation">&#123;</span>    <span class="token class-name">uint32_t</span>                iSampleRate<span class="token punctuation">;</span>        <span class="token comment">/* 每秒采样次数 */</span>    <span class="token class-name">uint8_t</span>                 byBitsPerSample<span class="token punctuation">;</span>    <span class="token comment">/* 每次采样深度 */</span>    <span class="token class-name">uint8_t</span>                 byChannels<span class="token punctuation">;</span>         <span class="token comment">/* 采样通道 */</span>    RecordCallback          pfCallback<span class="token punctuation">;</span>         <span class="token comment">/* 获取音频数据的回调 */</span>    <span class="token keyword">void</span><span class="token operator">*</span>                   pvUserData<span class="token punctuation">;</span>         <span class="token comment">/* 传递给回调的参数 */</span><span class="token punctuation">&#125;</span>AudioConfig_t<span class="token punctuation">;</span><span class="token comment">/** * @brief 录音功能结构体 */</span><span class="token keyword">typedef</span> <span class="token keyword">struct</span> <span class="token class-name">AudioRecorder</span> <span class="token punctuation">&#123;</span>    <span class="token comment">/**     * @brief 打开录音设备     * @param   pAudioConfig    录音配置信息          * @return  bool            false打开失败，true打开成功      */</span>    <span class="token function">bool</span> <span class="token punctuation">(</span><span class="token operator">*</span>open<span class="token punctuation">)</span><span class="token punctuation">(</span>AudioConfig_t<span class="token operator">*</span> pAudioConfig<span class="token punctuation">)</span><span class="token punctuation">;</span>    <span class="token comment">/**     * @brief 开始流式录音，录音信息通过open时注册的回调函数返回给用户     */</span>    <span class="token function">bool</span> <span class="token punctuation">(</span><span class="token operator">*</span>start<span class="token punctuation">)</span><span class="token punctuation">(</span><span class="token keyword">void</span><span class="token punctuation">)</span><span class="token punctuation">;</span>    <span class="token comment">/**     * @brief 停止录音，异步     */</span>    <span class="token keyword">void</span> <span class="token punctuation">(</span><span class="token operator">*</span>stop<span class="token punctuation">)</span><span class="token punctuation">(</span><span class="token keyword">void</span><span class="token punctuation">)</span><span class="token punctuation">;</span>    <span class="token comment">/**     * @brief 关闭录音设备     */</span>    <span class="token keyword">void</span> <span class="token punctuation">(</span><span class="token operator">*</span>close<span class="token punctuation">)</span><span class="token punctuation">(</span><span class="token keyword">void</span><span class="token punctuation">)</span><span class="token punctuation">;</span>    AudioHandle             pvAudioHandle<span class="token punctuation">;</span>      <span class="token comment">/* 音频设备的句柄 */</span>    AudioConfig_t           stAudioConfig<span class="token punctuation">;</span>      <span class="token comment">/* 音频设备的配置 */</span>    bool                    bRecording<span class="token punctuation">;</span>         <span class="token comment">/* 是否正在录音 */</span><span class="token punctuation">&#125;</span>AudioRecorder_t<span class="token punctuation">;</span><span class="token comment">/** * @brief 录音对象单例 */</span><span class="token keyword">extern</span> AudioRecorder_t Recorder<span class="token punctuation">;</span><span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre><p><strong>示例代码</strong></p><pre class="line-numbers language-c" data-language="c"><code class="language-c"><span class="token keyword">int</span> <span class="token function">main</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">&#123;</span><span class="token comment">// 16000K采样，16bit采样深度，1是单声道，RecordCB是音频信息的回调函数，test.pcm是传递给回调的参数</span>    AudioConfig_t stAudioConfig <span class="token operator">=</span> <span class="token punctuation">&#123;</span><span class="token number">16000</span><span class="token punctuation">,</span> <span class="token number">16</span><span class="token punctuation">,</span> <span class="token number">1</span><span class="token punctuation">,</span> RecordCB<span class="token punctuation">,</span> <span class="token punctuation">(</span><span class="token keyword">void</span><span class="token operator">*</span><span class="token punctuation">)</span><span class="token string">"test.pcm"</span><span class="token punctuation">&#125;</span><span class="token punctuation">;</span>    <span class="token comment">// 打开音频设备</span>    Recorder<span class="token punctuation">.</span><span class="token function">open</span><span class="token punctuation">(</span><span class="token operator">&amp;</span>stAudioConfig<span class="token punctuation">)</span><span class="token punctuation">;</span>    <span class="token comment">// 开始录音，阻塞函数，需要关闭录音在其他地方调用Recorder.close()</span>    Recorder<span class="token punctuation">.</span><span class="token function">start</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>    <span class="token comment">// 关闭录音设备</span>    Recorder<span class="token punctuation">.</span><span class="token function">close</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>        <span class="token keyword">return</span> <span class="token number">0</span><span class="token punctuation">;</span><span class="token punctuation">&#125;</span><span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre><p><strong>程序运行结果</strong></p><p>程序运行成功后，可以通过编写回调函数，来获取音频数据，上面程序的回调函数可以通过以下的回调处理来保存录音数据</p><pre class="line-numbers language-c" data-language="c"><code class="language-c"><span class="token keyword">static</span> <span class="token keyword">void</span> <span class="token function">RecordCB</span><span class="token punctuation">(</span><span class="token keyword">void</span><span class="token operator">*</span> pvHandle<span class="token punctuation">,</span> <span class="token class-name">int32_t</span> iType<span class="token punctuation">,</span> <span class="token keyword">void</span><span class="token operator">*</span> pvUserData<span class="token punctuation">,</span> <span class="token keyword">void</span><span class="token operator">*</span> pvData<span class="token punctuation">,</span> <span class="token class-name">int32_t</span> iLen<span class="token punctuation">)</span><span class="token punctuation">&#123;</span>    <span class="token class-name">uint32_t</span> bytesWritten <span class="token operator">=</span> <span class="token number">0</span><span class="token punctuation">;</span>    <span class="token keyword">static</span> <span class="token class-name">uint32_t</span> totalWriten <span class="token operator">=</span> <span class="token number">0</span><span class="token punctuation">;</span>    <span class="token keyword">const</span> <span class="token keyword">char</span> <span class="token operator">*</span>pathname <span class="token operator">=</span> <span class="token punctuation">(</span><span class="token keyword">const</span> <span class="token keyword">char</span> <span class="token operator">*</span><span class="token punctuation">)</span>pvUserData<span class="token punctuation">;</span>    <span class="token keyword">static</span> FILE<span class="token operator">*</span> fp <span class="token operator">=</span> <span class="token constant">NULL</span><span class="token punctuation">;</span>    <span class="token keyword">if</span> <span class="token punctuation">(</span><span class="token operator">!</span>fp<span class="token punctuation">)</span> <span class="token punctuation">&#123;</span>        fp <span class="token operator">=</span> <span class="token function">fopen</span><span class="token punctuation">(</span>pathname<span class="token punctuation">,</span> <span class="token string">"wb+"</span><span class="token punctuation">)</span><span class="token punctuation">;</span>    <span class="token punctuation">&#125;</span>    <span class="token keyword">if</span> <span class="token punctuation">(</span>AUDIO_DATA <span class="token operator">==</span> iType<span class="token punctuation">)</span> <span class="token punctuation">&#123;</span>        <span class="token keyword">if</span> <span class="token punctuation">(</span>fp<span class="token punctuation">)</span> <span class="token punctuation">&#123;</span>            bytesWritten <span class="token operator">=</span> <span class="token function">fwrite</span><span class="token punctuation">(</span>pvData<span class="token punctuation">,</span> iLen<span class="token punctuation">,</span> <span class="token number">1</span><span class="token punctuation">,</span> fp<span class="token punctuation">)</span><span class="token punctuation">;</span>            totalWriten <span class="token operator">+=</span> bytesWritten<span class="token operator">*</span>iLen<span class="token punctuation">;</span>            <span class="token function">LOG</span><span class="token punctuation">(</span>EDEBUG<span class="token punctuation">,</span> <span class="token string">"totalWriten:%d, iLen:%d"</span><span class="token punctuation">,</span> totalWriten<span class="token punctuation">,</span> iLen<span class="token punctuation">)</span><span class="token punctuation">;</span>            <span class="token keyword">if</span> <span class="token punctuation">(</span>totalWriten <span class="token operator">></span> <span class="token number">32000</span><span class="token operator">*</span><span class="token number">5</span><span class="token punctuation">)</span> <span class="token punctuation">&#123;</span>                Recorder<span class="token punctuation">.</span><span class="token function">stop</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>            <span class="token punctuation">&#125;</span>        <span class="token punctuation">&#125;</span>    <span class="token punctuation">&#125;</span>    <span class="token keyword">else</span> <span class="token keyword">if</span> <span class="token punctuation">(</span>AUDIO_CLOSE <span class="token operator">==</span> iType<span class="token punctuation">)</span> <span class="token punctuation">&#123;</span>        <span class="token keyword">if</span> <span class="token punctuation">(</span>fp<span class="token punctuation">)</span> <span class="token function">fclose</span><span class="token punctuation">(</span>fp<span class="token punctuation">)</span><span class="token punctuation">;</span>        fp <span class="token operator">=</span> <span class="token constant">NULL</span><span class="token punctuation">;</span>        Recorder<span class="token punctuation">.</span><span class="token function">stop</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>    <span class="token punctuation">&#125;</span><span class="token punctuation">&#125;</span><span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre><p><strong>pvUserData</strong>参数是通过stAudioConfig传递进来的”test.pcm”，可以在回调中使用这个参数，把录取的音频数据保存到test.pcm中。保存之后可以通过adobe audition软件打开听取声音是否正常。</p><h2 id="3-8-多线程接口功能说明"><a href="#3-8-多线程接口功能说明" class="headerlink" title="3.8 多线程接口功能说明"></a>3.8 多线程接口功能说明</h2><p><strong>接口说明</strong></p><pre class="line-numbers language-c" data-language="c"><code class="language-c"><span class="token keyword">typedef</span> <span class="token keyword">struct</span> <span class="token class-name">ThreadFun</span> ThreadFun<span class="token punctuation">;</span><span class="token keyword">struct</span> <span class="token class-name">ThreadFun</span><span class="token punctuation">&#123;</span><span class="token keyword">void</span><span class="token operator">*</span> params<span class="token punctuation">;</span>  <span class="token comment">//线程函数的参数 </span><span class="token macro property"><span class="token directive-hash">#</span><span class="token directive keyword">if</span> <span class="token expression"><span class="token function">defined</span><span class="token punctuation">(</span>_WIN32<span class="token punctuation">)</span></span></span><span class="token keyword">unsigned</span> <span class="token keyword">int</span> <span class="token punctuation">(</span><span class="token operator">*</span>fun<span class="token punctuation">)</span><span class="token punctuation">(</span><span class="token keyword">void</span> <span class="token operator">*</span>params<span class="token punctuation">)</span><span class="token punctuation">;</span>   <span class="token comment">//线程函数指针 </span><span class="token macro property"><span class="token directive-hash">#</span><span class="token directive keyword">else</span></span><span class="token keyword">void</span><span class="token operator">*</span> <span class="token punctuation">(</span><span class="token operator">*</span>fun<span class="token punctuation">)</span><span class="token punctuation">(</span><span class="token keyword">void</span> <span class="token operator">*</span>params<span class="token punctuation">)</span><span class="token punctuation">;</span>   <span class="token comment">//线程函数指针 </span><span class="token macro property"><span class="token directive-hash">#</span><span class="token directive keyword">endif</span></span><span class="token punctuation">&#125;</span><span class="token punctuation">;</span><span class="token comment">/** * @brief 线程创建 * @param  iThreadNum       线程创建的个数 * @param  funArray         线程处理函数组 */</span><span class="token keyword">void</span> <span class="token function">vStartThread</span><span class="token punctuation">(</span><span class="token keyword">int</span> iThreadNum<span class="token punctuation">,</span> ThreadFun funArray<span class="token punctuation">[</span><span class="token punctuation">]</span><span class="token punctuation">)</span><span class="token punctuation">;</span><span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre><p><strong>示例代码</strong></p><pre class="line-numbers language-c" data-language="c"><code class="language-c"><span class="token macro property"><span class="token directive-hash">#</span><span class="token directive keyword">include</span> <span class="token string">&lt;SimpleThread.h></span></span><span class="token keyword">static</span> <span class="token keyword">void</span> <span class="token operator">*</span><span class="token function">doSomething</span><span class="token punctuation">(</span><span class="token keyword">void</span> <span class="token operator">*</span>params<span class="token punctuation">)</span><span class="token punctuation">&#123;</span>    <span class="token function">printf</span><span class="token punctuation">(</span><span class="token string">"doStomething thread:%s\r\n"</span><span class="token punctuation">,</span> <span class="token punctuation">(</span><span class="token keyword">const</span> <span class="token keyword">char</span> <span class="token operator">*</span><span class="token punctuation">)</span>params<span class="token punctuation">)</span><span class="token punctuation">;</span>    <span class="token keyword">return</span> <span class="token constant">NULL</span><span class="token punctuation">;</span><span class="token punctuation">&#125;</span><span class="token keyword">int</span> <span class="token function">main</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">&#123;</span>ThreadFun funArr<span class="token punctuation">[</span><span class="token number">1</span><span class="token punctuation">]</span><span class="token punctuation">;</span>    funArr<span class="token punctuation">[</span><span class="token number">0</span><span class="token punctuation">]</span><span class="token punctuation">.</span>fun <span class="token operator">=</span> doSomething<span class="token punctuation">;</span>    funArr<span class="token punctuation">[</span><span class="token number">0</span><span class="token punctuation">]</span><span class="token punctuation">.</span>params <span class="token operator">=</span> <span class="token punctuation">(</span><span class="token keyword">void</span> <span class="token operator">*</span><span class="token punctuation">)</span><span class="token string">"easyAIot"</span><span class="token punctuation">;</span>    <span class="token function">vStartThread</span><span class="token punctuation">(</span><span class="token number">1</span><span class="token punctuation">,</span> funArr<span class="token punctuation">)</span><span class="token punctuation">;</span><span class="token function">printf</span><span class="token punctuation">(</span><span class="token string">"main thread\n"</span><span class="token punctuation">)</span><span class="token punctuation">;</span><span class="token keyword">return</span> <span class="token number">0</span><span class="token punctuation">;</span><span class="token punctuation">&#125;</span><span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre><p><strong>程序运行结果</strong></p><pre class="line-numbers language-none"><code class="language-none">main threaddoStomething thread:easyAIot<span aria-hidden="true" class="line-numbers-rows"><span></span><span></span></span></code></pre><h2 id="3-9-加解密接口功能说明"><a href="#3-9-加解密接口功能说明" class="headerlink" title="3.9 加解密接口功能说明"></a>3.9 加解密接口功能说明</h2><h3 id="3-9-1-MD5加密"><a href="#3-9-1-MD5加密" class="headerlink" title="3.9.1 MD5加密"></a>3.9.1 MD5加密</h3><p><strong>接口说明</strong></p><pre class="line-numbers language-c" data-language="c"><code class="language-c"><span class="token comment">/** * @brief md5加密 * @param  initial_msg      加密消息串 * @param  initial_len      加密消息串长度 * @param  digest           加密后的内容，注意：长度固定16字节，在使用时一般会把每一个字节使用16进制转化为字符串 */</span><span class="token keyword">void</span> <span class="token function">vMD5</span><span class="token punctuation">(</span><span class="token keyword">const</span> <span class="token keyword">unsigned</span> <span class="token keyword">char</span> <span class="token operator">*</span>msg<span class="token punctuation">,</span> <span class="token keyword">unsigned</span> <span class="token keyword">int</span> len<span class="token punctuation">,</span> <span class="token keyword">unsigned</span> <span class="token keyword">char</span> <span class="token operator">*</span>digest<span class="token punctuation">)</span><span class="token punctuation">;</span><span class="token comment">/** * @brief md5加密 * @param  initial_msg      加密消息串 * @param  initial_len      加密消息串长度 * @param  digest           加密后的32字节小写字符串内容 */</span><span class="token keyword">void</span> <span class="token function">md5String</span><span class="token punctuation">(</span><span class="token keyword">const</span> <span class="token keyword">unsigned</span> <span class="token keyword">char</span> <span class="token operator">*</span>msg<span class="token punctuation">,</span> <span class="token keyword">unsigned</span> <span class="token keyword">int</span> len<span class="token punctuation">,</span> <span class="token keyword">unsigned</span> <span class="token keyword">char</span> <span class="token operator">*</span>digest<span class="token punctuation">)</span><span class="token punctuation">;</span><span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre><p><strong>示例代码</strong></p><pre class="line-numbers language-c" data-language="c"><code class="language-c"><span class="token keyword">int</span> <span class="token function">main</span><span class="token punctuation">(</span><span class="token keyword">int</span> argc<span class="token punctuation">,</span> <span class="token keyword">char</span> <span class="token operator">*</span>argv<span class="token punctuation">[</span><span class="token punctuation">]</span><span class="token punctuation">)</span><span class="token punctuation">&#123;</span>    <span class="token keyword">const</span> <span class="token keyword">char</span> <span class="token operator">*</span>pszString <span class="token operator">=</span> <span class="token string">"easyAIoT"</span><span class="token punctuation">;</span>    <span class="token keyword">char</span> szBuf<span class="token punctuation">[</span><span class="token number">33</span><span class="token punctuation">]</span> <span class="token operator">=</span> <span class="token punctuation">&#123;</span><span class="token number">0</span><span class="token punctuation">&#125;</span><span class="token punctuation">;</span>        <span class="token function">md5String</span><span class="token punctuation">(</span><span class="token punctuation">(</span><span class="token class-name">uint8_t</span> <span class="token operator">*</span><span class="token punctuation">)</span>pszString<span class="token punctuation">,</span> <span class="token function">strlen</span><span class="token punctuation">(</span>pszString<span class="token punctuation">)</span><span class="token punctuation">,</span> szBuf<span class="token punctuation">)</span><span class="token punctuation">;</span>    <span class="token function">printf</span><span class="token punctuation">(</span><span class="token string">"%s md5-> %s\n"</span><span class="token punctuation">,</span> pszString<span class="token punctuation">,</span> szBuf<span class="token punctuation">)</span><span class="token punctuation">;</span>    <span class="token keyword">return</span> <span class="token number">0</span><span class="token punctuation">;</span><span class="token punctuation">&#125;</span><span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre><p><strong>程序运行结果</strong></p><pre class="line-numbers language-none"><code class="language-none">easyAIoT md5-&gt; d1428978a06bcefed0e94ab70a5d1498<span aria-hidden="true" class="line-numbers-rows"><span></span></span></code></pre><h3 id="3-9-2-Base64加解密"><a href="#3-9-2-Base64加解密" class="headerlink" title="3.9.2 Base64加解密"></a>3.9.2 Base64加解密</h3><p><strong>接口说明</strong></p><pre class="line-numbers language-c" data-language="c"><code class="language-c"><span class="token comment">/** * @brief Base64编码 * @param  pcData           需要编码的数据 * @param  pcBase64         Base64编码后的数据 * @param  pcDataLen        需要编码数据的长度 * @return int 编码后数据的长度 */</span><span class="token keyword">int</span> <span class="token function">iBase64Encode</span><span class="token punctuation">(</span><span class="token keyword">const</span> <span class="token keyword">char</span> <span class="token operator">*</span>pcData<span class="token punctuation">,</span> <span class="token keyword">char</span> <span class="token operator">*</span>pcBase64<span class="token punctuation">,</span> <span class="token keyword">int</span> pcDataLen<span class="token punctuation">)</span><span class="token punctuation">;</span><span class="token comment">/** * @brief Base64解码 * @param  base64           需要解码的Base64字符串 * @param  dedata           解码后的数据内容 * @return int 解码后数据的长度 */</span><span class="token keyword">int</span> <span class="token function">iBase64Decode</span><span class="token punctuation">(</span><span class="token keyword">const</span> <span class="token keyword">char</span> <span class="token operator">*</span>base64<span class="token punctuation">,</span> <span class="token keyword">unsigned</span> <span class="token keyword">char</span> <span class="token operator">*</span>dedata<span class="token punctuation">)</span><span class="token punctuation">;</span><span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre><p><strong>示例代码</strong></p><pre class="line-numbers language-c" data-language="c"><code class="language-c"><span class="token macro property"><span class="token directive-hash">#</span><span class="token directive keyword">include</span> <span class="token string">&lt;base64.h></span></span><span class="token keyword">int</span> <span class="token function">main</span><span class="token punctuation">(</span><span class="token keyword">int</span> argc<span class="token punctuation">,</span> <span class="token keyword">char</span> <span class="token operator">*</span>argv<span class="token punctuation">[</span><span class="token punctuation">]</span><span class="token punctuation">)</span><span class="token punctuation">&#123;</span>    <span class="token keyword">const</span> <span class="token keyword">char</span> <span class="token operator">*</span>pcPlain <span class="token operator">=</span> <span class="token string">"easyAIoT"</span><span class="token punctuation">;</span>    <span class="token keyword">char</span> szEncode<span class="token punctuation">[</span><span class="token number">32</span><span class="token punctuation">]</span> <span class="token operator">=</span> <span class="token punctuation">&#123;</span><span class="token number">0</span><span class="token punctuation">&#125;</span><span class="token punctuation">;</span>    <span class="token keyword">char</span> szDecode<span class="token punctuation">[</span><span class="token number">32</span><span class="token punctuation">]</span> <span class="token operator">=</span> <span class="token punctuation">&#123;</span><span class="token number">0</span><span class="token punctuation">&#125;</span><span class="token punctuation">;</span>        <span class="token keyword">int</span> iEncodeLen <span class="token operator">=</span> <span class="token function">iBase64Encode</span><span class="token punctuation">(</span>pcPlain<span class="token punctuation">,</span> szEncode<span class="token punctuation">,</span> <span class="token function">strlen</span><span class="token punctuation">(</span>pcPlain<span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span>    <span class="token keyword">int</span> iDecodeLen <span class="token operator">=</span> <span class="token function">iBase64Decode</span><span class="token punctuation">(</span>szEncode<span class="token punctuation">,</span> szDecode<span class="token punctuation">)</span><span class="token punctuation">;</span>    <span class="token function">printf</span><span class="token punctuation">(</span><span class="token string">"encode:%s, len:%d\n"</span><span class="token punctuation">,</span> szEncode<span class="token punctuation">,</span> iEncodeLen<span class="token punctuation">)</span><span class="token punctuation">;</span>    <span class="token function">printf</span><span class="token punctuation">(</span><span class="token string">"decode:%s, len:%d\n"</span><span class="token punctuation">,</span> szDecode<span class="token punctuation">,</span> iDecodeLen<span class="token punctuation">)</span><span class="token punctuation">;</span>    <span class="token keyword">return</span> <span class="token number">0</span><span class="token punctuation">;</span><span class="token punctuation">&#125;</span><span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre><p><strong>程序运行结果</strong></p><pre class="line-numbers language-none"><code class="language-none">encode:ZWFzeUFJb1Q&#x3D;, len:12decode:easyAIoT, len:8<span aria-hidden="true" class="line-numbers-rows"><span></span><span></span></span></code></pre><h3 id="3-9-3-Sha256加解密"><a href="#3-9-3-Sha256加解密" class="headerlink" title="3.9.3 Sha256加解密"></a>3.9.3 Sha256加解密</h3><p><strong>接口说明</strong></p><pre class="line-numbers language-c" data-language="c"><code class="language-c"><span class="token comment">/** * @brief sha256加密 * @param  input            加密源字符串 * @param  ilen             加密源字符串大小 * @param  out              加密字符串，大于等于65字节 */</span><span class="token keyword">void</span> <span class="token function">sha256</span><span class="token punctuation">(</span><span class="token keyword">const</span> <span class="token keyword">unsigned</span> <span class="token keyword">char</span> <span class="token operator">*</span>input<span class="token punctuation">,</span> <span class="token class-name">size_t</span> ilen<span class="token punctuation">,</span> <span class="token keyword">unsigned</span> <span class="token keyword">char</span> <span class="token operator">*</span>out<span class="token punctuation">)</span><span class="token punctuation">;</span><span class="token comment">/** * @brief HamcSHA256加密 * @param  data             加密数据 * @param  len              加密数据长度 * @param  key              加密key * @param  len_key          加密key长度 * @param  out              加密内容，out长度大于等于65 */</span><span class="token keyword">void</span> <span class="token function">hamcSha256String</span><span class="token punctuation">(</span><span class="token keyword">const</span> <span class="token keyword">unsigned</span> <span class="token keyword">char</span> <span class="token operator">*</span>data<span class="token punctuation">,</span> <span class="token class-name">size_t</span> len<span class="token punctuation">,</span> <span class="token keyword">const</span> <span class="token keyword">unsigned</span> <span class="token keyword">char</span> <span class="token operator">*</span>key<span class="token punctuation">,</span> <span class="token keyword">int</span> len_key<span class="token punctuation">,</span> <span class="token keyword">unsigned</span> <span class="token keyword">char</span> <span class="token operator">*</span>out<span class="token punctuation">)</span><span class="token punctuation">;</span><span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre><p><strong>示例代码</strong></p><pre class="line-numbers language-c" data-language="c"><code class="language-c"><span class="token keyword">int</span> <span class="token function">main</span><span class="token punctuation">(</span><span class="token keyword">int</span> argc<span class="token punctuation">,</span> <span class="token keyword">char</span> <span class="token operator">*</span>argv<span class="token punctuation">[</span><span class="token punctuation">]</span><span class="token punctuation">)</span><span class="token punctuation">&#123;</span>    <span class="token keyword">const</span> <span class="token keyword">char</span> <span class="token operator">*</span>input <span class="token operator">=</span> <span class="token string">"easyAIoT"</span><span class="token punctuation">;</span>    <span class="token keyword">const</span> <span class="token keyword">char</span> <span class="token operator">*</span>key <span class="token operator">=</span> <span class="token string">"123456"</span><span class="token punctuation">;</span>    <span class="token keyword">char</span> out<span class="token punctuation">[</span><span class="token number">65</span><span class="token punctuation">]</span><span class="token punctuation">;</span>    <span class="token keyword">char</span> hamc_out<span class="token punctuation">[</span><span class="token number">65</span><span class="token punctuation">]</span> <span class="token operator">=</span> <span class="token punctuation">&#123;</span><span class="token number">0</span><span class="token punctuation">&#125;</span><span class="token punctuation">;</span>        <span class="token function">sha256</span><span class="token punctuation">(</span>input<span class="token punctuation">,</span> <span class="token function">strlen</span><span class="token punctuation">(</span>input<span class="token punctuation">)</span><span class="token punctuation">,</span> out<span class="token punctuation">)</span><span class="token punctuation">;</span>    <span class="token function">printf</span><span class="token punctuation">(</span><span class="token string">"out:%s\n"</span><span class="token punctuation">,</span> out<span class="token punctuation">)</span><span class="token punctuation">;</span>    <span class="token function">hamcSha256String</span><span class="token punctuation">(</span>input<span class="token punctuation">,</span> <span class="token function">strlen</span><span class="token punctuation">(</span>input<span class="token punctuation">)</span><span class="token punctuation">,</span> key<span class="token punctuation">,</span> <span class="token function">strlen</span><span class="token punctuation">(</span>key<span class="token punctuation">)</span><span class="token punctuation">,</span> hamc_out<span class="token punctuation">)</span><span class="token punctuation">;</span>    <span class="token function">printf</span><span class="token punctuation">(</span><span class="token string">"hamc_out:%s\n"</span><span class="token punctuation">,</span> hamc_out<span class="token punctuation">)</span><span class="token punctuation">;</span>    <span class="token keyword">return</span> <span class="token number">0</span><span class="token punctuation">;</span><span class="token punctuation">&#125;</span><span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre><p><strong>程序运行结果</strong></p><pre class="line-numbers language-none"><code class="language-none">out:72db9c2cd52e183d7f3a367c8f33a226090c2c73b049731908c8341093c87d77hamc_out:a46e68f86c13dbfb00a834f223cc68c516915f31c7736cdd5e1664ba69c32343<span aria-hidden="true" class="line-numbers-rows"><span></span><span></span></span></code></pre><h3 id="3-9-4-URL加解密"><a href="#3-9-4-URL加解密" class="headerlink" title="3.9.4 URL加解密"></a>3.9.4 URL加解密</h3><p><strong>接口说明</strong></p><pre class="line-numbers language-c" data-language="c"><code class="language-c"><span class="token comment">/** * @brief url网址编码，便于网络传输 * @param  in               编码前网址 * @param  out              编码后网址 */</span><span class="token keyword">void</span> <span class="token function">urlencode</span><span class="token punctuation">(</span><span class="token keyword">char</span> in<span class="token punctuation">[</span><span class="token punctuation">]</span><span class="token punctuation">,</span> <span class="token keyword">char</span> out<span class="token punctuation">[</span><span class="token punctuation">]</span><span class="token punctuation">)</span><span class="token punctuation">;</span><span class="token comment">/** * @brief url网址解码，便于查看 * @param  in               解码前网址 * @param  out              解码后网址 */</span><span class="token keyword">void</span> <span class="token function">urldecode</span><span class="token punctuation">(</span><span class="token keyword">char</span> in<span class="token punctuation">[</span><span class="token punctuation">]</span><span class="token punctuation">,</span> <span class="token keyword">char</span> out<span class="token punctuation">[</span><span class="token punctuation">]</span><span class="token punctuation">)</span><span class="token punctuation">;</span><span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre><p><strong>示例代码</strong></p><pre class="line-numbers language-c" data-language="c"><code class="language-c"><span class="token keyword">int</span> <span class="token function">main</span><span class="token punctuation">(</span><span class="token keyword">int</span> argc<span class="token punctuation">,</span> <span class="token keyword">char</span> <span class="token operator">*</span>argv<span class="token punctuation">[</span><span class="token punctuation">]</span><span class="token punctuation">)</span><span class="token punctuation">&#123;</span>    <span class="token keyword">const</span> <span class="token keyword">char</span> <span class="token operator">*</span>in <span class="token operator">=</span> <span class="token string">"http://www.easyaiot.com/index.html?param1=1 2 3&amp;param2=1:2"</span><span class="token punctuation">;</span>    <span class="token keyword">char</span> enout<span class="token punctuation">[</span><span class="token number">64</span><span class="token punctuation">]</span><span class="token punctuation">,</span> deout<span class="token punctuation">[</span><span class="token number">64</span><span class="token punctuation">]</span><span class="token punctuation">;</span>        <span class="token function">urlencode</span><span class="token punctuation">(</span>in<span class="token punctuation">,</span> enout<span class="token punctuation">)</span><span class="token punctuation">;</span>    <span class="token function">urldecode</span><span class="token punctuation">(</span>enout<span class="token punctuation">,</span> deout<span class="token punctuation">)</span><span class="token punctuation">;</span>    <span class="token function">printf</span><span class="token punctuation">(</span><span class="token string">"in:%s\n"</span><span class="token punctuation">,</span> in<span class="token punctuation">)</span><span class="token punctuation">;</span>    <span class="token function">printf</span><span class="token punctuation">(</span><span class="token string">"enout:%s\n"</span><span class="token punctuation">,</span> enout<span class="token punctuation">)</span><span class="token punctuation">;</span>    <span class="token function">printf</span><span class="token punctuation">(</span><span class="token string">"deout:%s\n"</span><span class="token punctuation">,</span> deout<span class="token punctuation">)</span><span class="token punctuation">;</span>    <span class="token keyword">return</span> <span class="token number">0</span><span class="token punctuation">;</span><span class="token punctuation">&#125;</span><span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre><p><strong>程序运行结果</strong></p><pre class="line-numbers language-none"><code class="language-none">in:http:&#x2F;&#x2F;www.easyaiot.com&#x2F;index.html?param1&#x3D;1 2 3&amp;param2&#x3D;1:2enout:http%3A&#x2F;&#x2F;www.easyaiot.com&#x2F;index.html?param1&#x3D;1+2+3&amp;param2&#x3D;1%3A2deout:http:&#x2F;&#x2F;www.easyaiot.com&#x2F;index.html?param1&#x3D;1 2 3&amp;param2&#x3D;1:2<span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span></span></code></pre><h2 id="3-10-Json接口功能说明"><a href="#3-10-Json接口功能说明" class="headerlink" title="3.10 Json接口功能说明"></a>3.10 Json接口功能说明</h2><h3 id="3-10-1-Json序列化"><a href="#3-10-1-Json序列化" class="headerlink" title="3.10.1 Json序列化"></a>3.10.1 Json序列化</h3><p><strong>接口说明</strong></p><pre class="line-numbers language-c" data-language="c"><code class="language-c"><span class="token comment">// 创建Json对象，序列化对象名：json_obj</span><span class="token macro property"><span class="token directive-hash">#</span><span class="token directive keyword">define</span> <span class="token macro-name function">JSON_SERIALIZE_CREATE_OBJECT_START</span><span class="token expression"><span class="token punctuation">(</span>json_obj<span class="token punctuation">)</span></span></span><span class="token comment">// 创建序列化数组（key, value）到json_obj对象中</span><span class="token macro property"><span class="token directive-hash">#</span><span class="token directive keyword">define</span> <span class="token macro-name function">JSON_SERIALIZE_ADD_ARRAY_TO_OBJECT</span><span class="token expression"><span class="token punctuation">(</span>json_obj<span class="token punctuation">,</span> key<span class="token punctuation">,</span> value<span class="token punctuation">)</span></span></span><span class="token comment">// 创建序列化对象（key, value）到json_obj对象中</span><span class="token macro property"><span class="token directive-hash">#</span><span class="token directive keyword">define</span> <span class="token macro-name function">JSON_SERIALIZE_ADD_OBJECT_TO_OBJECT</span><span class="token expression"><span class="token punctuation">(</span>json_obj<span class="token punctuation">,</span> key<span class="token punctuation">,</span> value<span class="token punctuation">)</span></span></span><span class="token comment">// 增加一个字符串键值对（key, value）到json_obj对象中</span><span class="token macro property"><span class="token directive-hash">#</span><span class="token directive keyword">define</span> <span class="token macro-name function">JSON_SERIALIZE_ADD_STRING_TO_OBJECT</span><span class="token expression"><span class="token punctuation">(</span>json_obj<span class="token punctuation">,</span> key<span class="token punctuation">,</span> value<span class="token punctuation">)</span></span></span><span class="token comment">// 增加一个整型键值对（key, value）到json_obj对象中</span><span class="token macro property"><span class="token directive-hash">#</span><span class="token directive keyword">define</span> <span class="token macro-name function">JSON_SERIALIZE_ADD_INT_TO_OBJECT</span><span class="token expression"><span class="token punctuation">(</span>json_obj<span class="token punctuation">,</span> key<span class="token punctuation">,</span> value<span class="token punctuation">)</span></span></span><span class="token comment">// 创建一个数组Json对象</span><span class="token macro property"><span class="token directive-hash">#</span><span class="token directive keyword">define</span> <span class="token macro-name function">JSON_SERIALIZE_CREATE_ARRAY_START</span><span class="token expression"><span class="token punctuation">(</span>json_array<span class="token punctuation">)</span></span></span><span class="token comment">// 增加一个数组Json对象（key, value）到json_array对象中</span><span class="token macro property"><span class="token directive-hash">#</span><span class="token directive keyword">define</span> <span class="token macro-name function">JSON_SERIALIZE_ADD_ARRAY_TO_ARRAY</span><span class="token expression"><span class="token punctuation">(</span>json_array<span class="token punctuation">,</span> sub_json_array<span class="token punctuation">)</span></span></span><span class="token comment">// 增加一Json对象（key, value）到数组对象json_array中</span><span class="token macro property"><span class="token directive-hash">#</span><span class="token directive keyword">define</span> <span class="token macro-name function">JSON_SERIALIZE_ADD_OBJECT_TO_ARRAY</span><span class="token expression"><span class="token punctuation">(</span>json_array<span class="token punctuation">,</span> json_obj<span class="token punctuation">)</span></span></span><span class="token comment">// 创建Json结束符</span><span class="token macro property"><span class="token directive-hash">#</span><span class="token directive keyword">define</span> <span class="token macro-name function">JSON_SERIALIZE_CREATE_END</span><span class="token expression"><span class="token punctuation">(</span>json_obj<span class="token punctuation">)</span></span></span><span class="token comment">// JSON序列化为字符串</span><span class="token macro property"><span class="token directive-hash">#</span><span class="token directive keyword">define</span> <span class="token macro-name function">JSON_SERIALIZE_STRING</span><span class="token expression"><span class="token punctuation">(</span>json_doc<span class="token punctuation">,</span> str<span class="token punctuation">,</span> len<span class="token punctuation">)</span></span></span><span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre><p><strong>示例代码</strong></p><pre class="line-numbers language-c" data-language="c"><code class="language-c"><span class="token function">JSON_SERIALIZE_CREATE_OBJECT_START</span><span class="token punctuation">(</span>json_common_obj<span class="token punctuation">)</span><span class="token punctuation">;</span><span class="token function">JSON_SERIALIZE_ADD_STRING_TO_OBJECT</span><span class="token punctuation">(</span>json_common_obj<span class="token punctuation">,</span> <span class="token string">"app_id"</span><span class="token punctuation">,</span> <span class="token string">"123456"</span><span class="token punctuation">)</span><span class="token punctuation">;</span><span class="token function">JSON_SERIALIZE_CREATE_OBJECT_START</span><span class="token punctuation">(</span>json_business_obj<span class="token punctuation">)</span><span class="token punctuation">;</span><span class="token function">JSON_SERIALIZE_ADD_STRING_TO_OBJECT</span><span class="token punctuation">(</span>json_business_obj<span class="token punctuation">,</span> <span class="token string">"language"</span><span class="token punctuation">,</span> <span class="token string">"zh_cn"</span><span class="token punctuation">)</span><span class="token punctuation">;</span><span class="token function">JSON_SERIALIZE_ADD_STRING_TO_OBJECT</span><span class="token punctuation">(</span>json_business_obj<span class="token punctuation">,</span> <span class="token string">"domain"</span><span class="token punctuation">,</span> <span class="token string">"iat"</span><span class="token punctuation">)</span><span class="token punctuation">;</span><span class="token function">JSON_SERIALIZE_ADD_STRING_TO_OBJECT</span><span class="token punctuation">(</span>json_business_obj<span class="token punctuation">,</span> <span class="token string">"accent"</span><span class="token punctuation">,</span> <span class="token string">"mandarin"</span><span class="token punctuation">)</span><span class="token punctuation">;</span><span class="token function">JSON_SERIALIZE_CREATE_OBJECT_START</span><span class="token punctuation">(</span>json_data_obj<span class="token punctuation">)</span><span class="token punctuation">;</span><span class="token function">JSON_SERIALIZE_ADD_INT_TO_OBJECT</span><span class="token punctuation">(</span>json_data_obj<span class="token punctuation">,</span> <span class="token string">"status"</span><span class="token punctuation">,</span> <span class="token number">0</span><span class="token punctuation">)</span><span class="token punctuation">;</span><span class="token function">JSON_SERIALIZE_ADD_STRING_TO_OBJECT</span><span class="token punctuation">(</span>json_data_obj<span class="token punctuation">,</span> <span class="token string">"format"</span><span class="token punctuation">,</span> <span class="token string">"audio/L16;rate=16000"</span><span class="token punctuation">)</span><span class="token punctuation">;</span><span class="token function">JSON_SERIALIZE_ADD_STRING_TO_OBJECT</span><span class="token punctuation">(</span>json_data_obj<span class="token punctuation">,</span> <span class="token string">"encoding"</span><span class="token punctuation">,</span> <span class="token string">"raw"</span><span class="token punctuation">)</span><span class="token punctuation">;</span><span class="token function">JSON_SERIALIZE_ADD_STRING_TO_OBJECT</span><span class="token punctuation">(</span>json_data_obj<span class="token punctuation">,</span> <span class="token string">"audio"</span><span class="token punctuation">,</span> <span class="token string">"exSI6ICJlbiIsCgkgICAgInBvc2l0aW9uIjogImZhbHNlIgoJf"</span><span class="token punctuation">)</span><span class="token punctuation">;</span><span class="token comment">// JSON_SERIALIZE_CREATE_END(json_data_obj);</span><span class="token function">JSON_SERIALIZE_CREATE_OBJECT_START</span><span class="token punctuation">(</span>json_frame_obj<span class="token punctuation">)</span><span class="token punctuation">;</span><span class="token function">JSON_SERIALIZE_ADD_OBJECT_TO_OBJECT</span><span class="token punctuation">(</span>json_frame_obj<span class="token punctuation">,</span> <span class="token string">"common"</span><span class="token punctuation">,</span> json_common_obj<span class="token punctuation">)</span><span class="token punctuation">;</span><span class="token function">JSON_SERIALIZE_ADD_OBJECT_TO_OBJECT</span><span class="token punctuation">(</span>json_frame_obj<span class="token punctuation">,</span> <span class="token string">"business"</span><span class="token punctuation">,</span> json_business_obj<span class="token punctuation">)</span><span class="token punctuation">;</span><span class="token function">JSON_SERIALIZE_ADD_OBJECT_TO_OBJECT</span><span class="token punctuation">(</span>json_frame_obj<span class="token punctuation">,</span> <span class="token string">"data"</span><span class="token punctuation">,</span> json_data_obj<span class="token punctuation">)</span><span class="token punctuation">;</span><span class="token function">JSON_SERIALIZE_STRING</span><span class="token punctuation">(</span>json_frame_obj<span class="token punctuation">,</span> pszRequest<span class="token punctuation">,</span> iLen<span class="token punctuation">)</span><span class="token punctuation">;</span><span class="token function">JSON_SERIALIZE_CREATE_END</span><span class="token punctuation">(</span>json_frame_obj<span class="token punctuation">)</span><span class="token punctuation">;</span><span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre><p><strong>程序运行结果</strong></p><pre class="line-numbers language-json" data-language="json"><code class="language-json"><span class="token punctuation">&#123;</span><span class="token property">"common"</span><span class="token operator">:</span> <span class="token punctuation">&#123;</span><span class="token property">"app_id"</span><span class="token operator">:</span> <span class="token string">"123456"</span><span class="token punctuation">&#125;</span><span class="token punctuation">,</span><span class="token property">"business"</span><span class="token operator">:</span> <span class="token punctuation">&#123;</span><span class="token property">"language"</span><span class="token operator">:</span> <span class="token string">"zh_cn"</span><span class="token punctuation">,</span><span class="token property">"domain"</span><span class="token operator">:</span> <span class="token string">"iat"</span><span class="token punctuation">,</span><span class="token property">"accent"</span><span class="token operator">:</span> <span class="token string">"mandarin"</span><span class="token punctuation">&#125;</span><span class="token punctuation">,</span><span class="token property">"data"</span><span class="token operator">:</span> <span class="token punctuation">&#123;</span><span class="token property">"status"</span><span class="token operator">:</span> <span class="token number">0</span><span class="token punctuation">,</span><span class="token property">"format"</span><span class="token operator">:</span> <span class="token string">"audio/L16;rate=16000"</span><span class="token punctuation">,</span><span class="token property">"encoding"</span><span class="token operator">:</span> <span class="token string">"raw"</span><span class="token punctuation">,</span><span class="token property">"audio"</span><span class="token operator">:</span> <span class="token string">"exSI6ICJlbiIsCgkgICAgInBvc2l0aW9uIjogImZhbHNlIgoJf"</span><span class="token punctuation">&#125;</span><span class="token punctuation">&#125;</span><span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre><h3 id="3-10-2-Json反序列化"><a href="#3-10-2-Json反序列化" class="headerlink" title="3.10.2 Json反序列化"></a>3.10.2 Json反序列化</h3><p><strong>接口说明</strong></p><pre class="line-numbers language-c" data-language="c"><code class="language-c"><span class="token comment">// 根据json字符串json_string创建json对象json_root</span><span class="token macro property"><span class="token directive-hash">#</span><span class="token directive keyword">define</span> <span class="token macro-name function">JSON_DESERIALIZE_START</span><span class="token expression"><span class="token punctuation">(</span>json_root<span class="token punctuation">,</span> json_string<span class="token punctuation">,</span> ret<span class="token punctuation">)</span></span></span><span class="token comment">// 根据json对象json_doc，获取键值为key的整型变量放到value中，返回值放入ret中，jump为程序跳出方式</span><span class="token macro property"><span class="token directive-hash">#</span><span class="token directive keyword">define</span> <span class="token macro-name function">JSON_DESERIALIZE_GET_INT</span><span class="token expression"><span class="token punctuation">(</span>json_doc<span class="token punctuation">,</span> key<span class="token punctuation">,</span> value<span class="token punctuation">,</span> ret<span class="token punctuation">,</span> jump<span class="token punctuation">)</span></span></span><span class="token comment">// 根据json对象json_doc，获取键值为key的浮点型变量放到value中，返回值放入ret中，jump为程序跳出方式</span><span class="token macro property"><span class="token directive-hash">#</span><span class="token directive keyword">define</span> <span class="token macro-name function">JSON_DESERIALIZE_GET_DOUBLE</span><span class="token expression"><span class="token punctuation">(</span>json_doc<span class="token punctuation">,</span> key<span class="token punctuation">,</span> value<span class="token punctuation">,</span> ret<span class="token punctuation">,</span> jump<span class="token punctuation">)</span></span></span><span class="token comment">// 根据json对象json_doc，获取键值为key的字符串指针赋值给value，返回值放入ret中，jump为程序跳出方式</span><span class="token macro property"><span class="token directive-hash">#</span><span class="token directive keyword">define</span> <span class="token macro-name function">JSON_DESERIALIZE_GET_STRING</span><span class="token expression"><span class="token punctuation">(</span>json_doc<span class="token punctuation">,</span> key<span class="token punctuation">,</span> value<span class="token punctuation">,</span> ret<span class="token punctuation">,</span> jump<span class="token punctuation">)</span></span></span><span class="token comment">// 根据json对象json_doc，获取键值为key的字符串变量放到value中，返回值放入ret中，jump为程序跳出方式</span><span class="token macro property"><span class="token directive-hash">#</span><span class="token directive keyword">define</span> <span class="token macro-name function">JSON_DESERIALIZE_GET_STRING_COPY</span><span class="token expression"><span class="token punctuation">(</span>json_doc<span class="token punctuation">,</span> key<span class="token punctuation">,</span> value<span class="token punctuation">,</span> len<span class="token punctuation">,</span> ret<span class="token punctuation">,</span> jump<span class="token punctuation">)</span></span></span><span class="token comment">// 根据json对象json_doc，获取键值为key的Json数组变量放到value中，返回值放入ret中，jump为程序跳出方式</span><span class="token macro property"><span class="token directive-hash">#</span><span class="token directive keyword">define</span> <span class="token macro-name function">JSON_DESERIALIZE_GET_ARRAY</span><span class="token expression"><span class="token punctuation">(</span>json_doc<span class="token punctuation">,</span> key<span class="token punctuation">,</span> value<span class="token punctuation">,</span> ret<span class="token punctuation">,</span> jump<span class="token punctuation">)</span></span></span><span class="token comment">// 根据json对象json_doc生成sub_item迭代器</span><span class="token macro property"><span class="token directive-hash">#</span><span class="token directive keyword">define</span> <span class="token macro-name function">JSON_DESERIALIZE_ARRAY_FOR_EACH_START</span><span class="token expression"><span class="token punctuation">(</span>json_doc<span class="token punctuation">,</span> sub_item<span class="token punctuation">,</span> pos<span class="token punctuation">,</span> total<span class="token punctuation">)</span></span></span><span class="token comment">// 数组迭代结束标识</span><span class="token macro property"><span class="token directive-hash">#</span><span class="token directive keyword">define</span> <span class="token macro-name function">JSON_DESERIALIZE_ARRAY_FOR_EACH_END</span><span class="token expression"><span class="token punctuation">(</span><span class="token punctuation">)</span></span></span><span class="token comment">// 获取json_doc对象中的Json对象，键值为key，值放到value中，正确ret值为0，否则为负值，jump为失败后的跳转方式</span><span class="token macro property"><span class="token directive-hash">#</span><span class="token directive keyword">define</span> <span class="token macro-name function">JSON_DESERIALIZE_GET_OBJECT</span><span class="token expression"><span class="token punctuation">(</span>json_doc<span class="token punctuation">,</span> key<span class="token punctuation">,</span> value<span class="token punctuation">,</span> ret<span class="token punctuation">,</span> jump<span class="token punctuation">)</span></span></span><span class="token comment">// Json反序列结束标识</span><span class="token macro property"><span class="token directive-hash">#</span><span class="token directive keyword">define</span> <span class="token macro-name function">JSON_DESERIALIZE_END</span><span class="token expression"><span class="token punctuation">(</span>json_root<span class="token punctuation">,</span> ret<span class="token punctuation">)</span></span></span><span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre><p><strong>示例代码</strong></p><p>反序列的Json字符串</p><pre class="line-numbers language-json" data-language="json"><code class="language-json"><span class="token punctuation">&#123;</span>  <span class="token property">"payload"</span><span class="token operator">:</span> <span class="token punctuation">&#123;</span>    <span class="token property">"face_compare_result"</span><span class="token operator">:</span> <span class="token punctuation">&#123;</span>      <span class="token property">"text"</span><span class="token operator">:</span> <span class="token string">"ewoJInJldCIgOiAwLAoJInNjb3JlIiA6IDAuOTk2MTg2MDc3NTk0NzU3MDgKfQo="</span>    <span class="token punctuation">&#125;</span>  <span class="token punctuation">&#125;</span><span class="token punctuation">&#125;</span><span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre><p>反序列化代码</p><pre class="line-numbers language-none"><code class="language-none">JSON_DESERIALIZE_START(json_root, szResponse, iRet);JSON_DESERIALIZE_GET_OBJECT(json_root, &quot;payload&quot;, payload_obj, iRet, JSON_CTRL_BREAK);JSON_DESERIALIZE_GET_OBJECT(payload_obj, &quot;face_compare_result&quot;, result_obj, iRet, JSON_CTRL_BREAK);JSON_DESERIALIZE_GET_STRING(result_obj, &quot;text&quot;, pText, iRet, JSON_CTRL_NULL);if (pText) text-&gt;appendStr(text, pText, strlen(pText));JSON_DESERIALIZE_END(json_root, iRet);<span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre><p><strong>程序运行结果</strong></p><p>运行结果是通过JSON_DESERIALIZE_GET_STRING把text的值存放到了pText中。</p><h2 id="3-11-基础数据处理接口"><a href="#3-11-基础数据处理接口" class="headerlink" title="3.11  基础数据处理接口"></a>3.11  基础数据处理接口</h2><h3 id="3-11-1-string数据处理"><a href="#3-11-1-string数据处理" class="headerlink" title="3.11.1 string数据处理"></a>3.11.1 string数据处理</h3><p><strong>接口说明</strong></p><pre class="line-numbers language-none"><code class="language-none">&#x2F;&#x2F; 创建一个新的字符串对象cscstring_new(cs);&#x2F;&#x2F; 创建一个新的字符串对象cstr， 长度为lencstring_new_len(cstr, len);&#x2F;&#x2F; 使用cstring_new的cstr需要通过cstring_del释放资源cstring_del(cstr);typedef struct cstring&#123;    char *str;                                                              &#x2F;&#x2F; 字符串    size_t alloced;                                                         &#x2F;&#x2F; 动态分配    size_t len;                                                             &#x2F;&#x2F; 字符长度    struct cstring *(*create)(size_t len);                                  &#x2F;&#x2F; 创建字符串    void (*destory)(struct cstring *);                                      &#x2F;&#x2F; 释放字符串    void (*appendStr)(struct cstring *cs, const char *str, size_t len);     &#x2F;&#x2F; 追加字符串    void (*appendChar)(struct cstring *cs, char c);                         &#x2F;&#x2F; 追加字符    void (*appendInt)(struct cstring *cs, int val);                         &#x2F;&#x2F; 追加整型    void (*frontStr)(struct cstring *cs, const char *str, size_t len);      &#x2F;&#x2F; 从头插入字符串    void (*frontChar)(struct cstring *cs, char c);                          &#x2F;&#x2F; 从头插入字符    void (*frontInt)(struct cstring *cs, int val);                          &#x2F;&#x2F; 从头插入整型    void (*clear)(struct cstring *cs);                                      &#x2F;&#x2F; 清空字符串内容    void (*truncate)(struct cstring *cs, size_t len);                       &#x2F;&#x2F; 截断字符串    void (*dropBegin)(struct cstring *cs, size_t len);                      &#x2F;&#x2F; 丢掉前面指定len的字符    void (*dropEnd)(struct cstring *cs, size_t len);                        &#x2F;&#x2F; 丢掉后面指定len的字符    size_t (*length)(const struct cstring *cs);                             &#x2F;&#x2F; 求取字符串长度    const char *(*peek)(const struct cstring *cs);                          &#x2F;&#x2F; 获取字符串首地址    char *(*dump)(const struct cstring *cs, size_t *len);                   &#x2F;&#x2F; 获取字符串内容&#125; cstring_t;<span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre><p><strong>示例代码</strong></p><pre class="line-numbers language-c" data-language="c"><code class="language-c"><span class="token keyword">int</span> <span class="token function">main</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">&#123;</span>    <span class="token function">cstring_new</span><span class="token punctuation">(</span>cs<span class="token punctuation">)</span><span class="token punctuation">;</span>        cs<span class="token operator">-></span><span class="token function">appendStr</span><span class="token punctuation">(</span>cs<span class="token punctuation">,</span> <span class="token string">"123"</span><span class="token punctuation">,</span> <span class="token number">0</span><span class="token punctuation">)</span><span class="token punctuation">;</span>    cs<span class="token operator">-></span><span class="token function">appendChar</span><span class="token punctuation">(</span>cs<span class="token punctuation">,</span> <span class="token string">'4'</span><span class="token punctuation">)</span><span class="token punctuation">;</span>    cs<span class="token operator">-></span><span class="token function">appendInt</span><span class="token punctuation">(</span>cs<span class="token punctuation">,</span> <span class="token string">'4'</span><span class="token punctuation">)</span><span class="token punctuation">;</span>    <span class="token function">printf</span><span class="token punctuation">(</span><span class="token string">"%s \n"</span><span class="token punctuation">,</span> cs<span class="token operator">-></span><span class="token function">peek</span><span class="token punctuation">(</span>cs<span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span>    cs<span class="token operator">-></span><span class="token function">frontStr</span><span class="token punctuation">(</span>cs<span class="token punctuation">,</span> <span class="token string">"789"</span><span class="token punctuation">,</span> <span class="token number">0</span><span class="token punctuation">)</span><span class="token punctuation">;</span>    <span class="token function">printf</span><span class="token punctuation">(</span><span class="token string">"%s \n"</span><span class="token punctuation">,</span> cs<span class="token operator">-></span><span class="token function">peek</span><span class="token punctuation">(</span>cs<span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span>    cs<span class="token operator">-></span><span class="token function">dropBegin</span><span class="token punctuation">(</span>cs<span class="token punctuation">,</span> <span class="token number">2</span><span class="token punctuation">)</span><span class="token punctuation">;</span>    <span class="token function">printf</span><span class="token punctuation">(</span><span class="token string">"%s \n"</span><span class="token punctuation">,</span> cs<span class="token operator">-></span><span class="token function">peek</span><span class="token punctuation">(</span>cs<span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span>    cs<span class="token operator">-></span><span class="token function">dropEnd</span><span class="token punctuation">(</span>cs<span class="token punctuation">,</span> <span class="token number">2</span><span class="token punctuation">)</span><span class="token punctuation">;</span>    <span class="token function">printf</span><span class="token punctuation">(</span><span class="token string">"%s \n"</span><span class="token punctuation">,</span> cs<span class="token operator">-></span><span class="token function">peek</span><span class="token punctuation">(</span>cs<span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span>    <span class="token function">cstring_del</span><span class="token punctuation">(</span>cs<span class="token punctuation">)</span><span class="token punctuation">;</span>    <span class="token keyword">return</span> <span class="token number">0</span><span class="token punctuation">;</span><span class="token punctuation">&#125;</span><span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre><p><strong>程序运行结果</strong></p><pre class="line-numbers language-none"><code class="language-none">123452789123452912345291234<span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span></span></code></pre><h3 id="3-11-2-map数据处理"><a href="#3-11-2-map数据处理" class="headerlink" title="3.11.2 map数据处理"></a>3.11.2 map数据处理</h3><p><strong>接口说明</strong></p><pre class="line-numbers language-c" data-language="c"><code class="language-c">功能：所有的map都是通过宏定义实现的<span class="token punctuation">.</span><span class="token comment">// 创建一个map结构体，T可以为自定义类型</span><span class="token class-name">map_t</span><span class="token punctuation">(</span>T<span class="token punctuation">)</span>Creates a map <span class="token keyword">struct</span> <span class="token class-name">for</span> containing values of type T<span class="token punctuation">.</span><span class="token comment">// 初始化map，map在使用前必须要调用map_init</span><span class="token function">map_init</span><span class="token punctuation">(</span>m<span class="token punctuation">)</span>map_init<span class="token comment">// 反初始化map，释放使用的资源</span><span class="token function">map_deinit</span><span class="token punctuation">(</span>m<span class="token punctuation">)</span>Deinitialises the map<span class="token punctuation">,</span> freeing the memory the map allocated during use<span class="token punctuation">;</span> this should be called when we're finished with a map<span class="token punctuation">.</span><span class="token comment">// 获取给定key的map值，返回的是指向值得指针</span><span class="token function">map_get</span><span class="token punctuation">(</span>m<span class="token punctuation">,</span> key<span class="token punctuation">)</span><span class="token comment">// 设置一个指定key的值value到map中，操作正常返回0，否则失败返回-1</span><span class="token function">map_set</span><span class="token punctuation">(</span>m<span class="token punctuation">,</span> key<span class="token punctuation">,</span> value<span class="token punctuation">)</span><span class="token comment">// 把指定为key的数据从map中移除</span><span class="token function">map_remove</span><span class="token punctuation">(</span>m<span class="token punctuation">,</span> key<span class="token punctuation">)</span><span class="token comment">// 获取map迭代器，返回一个map_iter_t类型，可以通过map_next遍历</span><span class="token function">map_iter</span><span class="token punctuation">(</span>m<span class="token punctuation">)</span>Returns a <span class="token class-name">map_iter_t</span> which can be used with <span class="token function">map_next</span><span class="token punctuation">(</span><span class="token punctuation">)</span> to iterate all the keys in the map<span class="token punctuation">.</span><span class="token comment">// 通过map_next迭代map中的数据</span><span class="token function">map_next</span><span class="token punctuation">(</span>m<span class="token punctuation">,</span> iter<span class="token punctuation">)</span>Uses the <span class="token class-name">map_iter_t</span> returned by <span class="token function">map_iter</span><span class="token punctuation">(</span><span class="token punctuation">)</span> to iterate all the keys in the map<span class="token punctuation">.</span> <span class="token function">map_next</span><span class="token punctuation">(</span><span class="token punctuation">)</span> returns a key with each call and returns <span class="token constant">NULL</span> when there are no more keys<span class="token punctuation">.</span><span class="token keyword">const</span> <span class="token keyword">char</span> <span class="token operator">*</span>key<span class="token punctuation">;</span><span class="token class-name">map_iter_t</span> iter <span class="token operator">=</span> <span class="token function">map_iter</span><span class="token punctuation">(</span><span class="token operator">&amp;</span>m<span class="token punctuation">)</span><span class="token punctuation">;</span><span class="token keyword">while</span> <span class="token punctuation">(</span><span class="token punctuation">(</span>key <span class="token operator">=</span> <span class="token function">map_next</span><span class="token punctuation">(</span><span class="token operator">&amp;</span>m<span class="token punctuation">,</span> <span class="token operator">&amp;</span>iter<span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">)</span> <span class="token punctuation">&#123;</span>  <span class="token function">printf</span><span class="token punctuation">(</span><span class="token string">"%s -> %d"</span><span class="token punctuation">,</span> key<span class="token punctuation">,</span> <span class="token operator">*</span><span class="token function">map_get</span><span class="token punctuation">(</span><span class="token operator">&amp;</span>m<span class="token punctuation">,</span> key<span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span><span class="token punctuation">&#125;</span><span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre><p><strong>示例代码</strong></p><pre class="line-numbers language-c" data-language="c"><code class="language-c"><span class="token class-name">map_int_t</span> m<span class="token punctuation">;</span><span class="token function">map_init</span><span class="token punctuation">(</span><span class="token operator">&amp;</span>m<span class="token punctuation">)</span><span class="token punctuation">;</span><span class="token function">map_set</span><span class="token punctuation">(</span><span class="token operator">&amp;</span>m<span class="token punctuation">,</span> <span class="token string">"testkey"</span><span class="token punctuation">,</span> <span class="token number">123</span><span class="token punctuation">)</span><span class="token punctuation">;</span><span class="token keyword">int</span> <span class="token operator">*</span>val <span class="token operator">=</span> <span class="token function">map_get</span><span class="token punctuation">(</span><span class="token operator">&amp;</span>m<span class="token punctuation">,</span> <span class="token string">"testkey"</span><span class="token punctuation">)</span><span class="token punctuation">;</span><span class="token keyword">if</span> <span class="token punctuation">(</span>val<span class="token punctuation">)</span> <span class="token punctuation">&#123;</span>  <span class="token function">printf</span><span class="token punctuation">(</span><span class="token string">"value: %d\n"</span><span class="token punctuation">,</span> <span class="token operator">*</span>val<span class="token punctuation">)</span><span class="token punctuation">;</span><span class="token punctuation">&#125;</span> <span class="token keyword">else</span> <span class="token punctuation">&#123;</span>  <span class="token function">printf</span><span class="token punctuation">(</span><span class="token string">"value not found\n"</span><span class="token punctuation">)</span><span class="token punctuation">;</span><span class="token punctuation">&#125;</span><span class="token function">map_deinit</span><span class="token punctuation">(</span><span class="token operator">&amp;</span>m<span class="token punctuation">)</span><span class="token punctuation">;</span><span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre><p><strong>程序运行结果</strong></p><pre class="line-numbers language-none"><code class="language-none">value: 123<span aria-hidden="true" class="line-numbers-rows"><span></span></span></code></pre><h3 id="3-11-3-循环buffer数据处理"><a href="#3-11-3-循环buffer数据处理" class="headerlink" title="3.11.3 循环buffer数据处理"></a>3.11.3 循环buffer数据处理</h3><p><strong>接口说明</strong></p><pre class="line-numbers language-c" data-language="c"><code class="language-c"><span class="token comment">// ring buffer初始化</span><span class="token keyword">void</span> <span class="token function">ring_buffer_init</span><span class="token punctuation">(</span><span class="token class-name">ring_buffer_t</span> <span class="token operator">*</span>buffer<span class="token punctuation">)</span><span class="token punctuation">;</span><span class="token comment">// 存入data字符数据到buffer中</span><span class="token keyword">void</span> <span class="token function">ring_buffer_queue</span><span class="token punctuation">(</span><span class="token class-name">ring_buffer_t</span> <span class="token operator">*</span>buffer<span class="token punctuation">,</span> <span class="token keyword">char</span> data<span class="token punctuation">)</span><span class="token punctuation">;</span><span class="token comment">// 存放长度位size的data数组到ring buffer中</span><span class="token keyword">void</span> <span class="token function">ring_buffer_queue_arr</span><span class="token punctuation">(</span><span class="token class-name">ring_buffer_t</span> <span class="token operator">*</span>buffer<span class="token punctuation">,</span> <span class="token keyword">const</span> <span class="token keyword">char</span> <span class="token operator">*</span>data<span class="token punctuation">,</span> <span class="token class-name">ring_buffer_size_t</span> size<span class="token punctuation">)</span><span class="token punctuation">;</span><span class="token comment">// 从ring buffer中获取一个字符数据到data中</span><span class="token class-name">uint8_t</span> <span class="token function">ring_buffer_dequeue</span><span class="token punctuation">(</span><span class="token class-name">ring_buffer_t</span> <span class="token operator">*</span>buffer<span class="token punctuation">,</span> <span class="token keyword">char</span> <span class="token operator">*</span>data<span class="token punctuation">)</span><span class="token punctuation">;</span><span class="token comment">// 从ring buffer中获取一个长度为len的数据到data中，返回真实的数据长度</span><span class="token class-name">ring_buffer_size_t</span> <span class="token function">ring_buffer_dequeue_arr</span><span class="token punctuation">(</span><span class="token class-name">ring_buffer_t</span> <span class="token operator">*</span>buffer<span class="token punctuation">,</span> <span class="token keyword">char</span> <span class="token operator">*</span>data<span class="token punctuation">,</span> <span class="token class-name">ring_buffer_size_t</span> len<span class="token punctuation">)</span><span class="token punctuation">;</span><span class="token comment">// 从ring buffer中index索引处获取一个字符到data中，这个操作并不会影响ring buffer的内容</span><span class="token class-name">uint8_t</span> <span class="token function">ring_buffer_peek</span><span class="token punctuation">(</span><span class="token class-name">ring_buffer_t</span> <span class="token operator">*</span>buffer<span class="token punctuation">,</span> <span class="token keyword">char</span> <span class="token operator">*</span>data<span class="token punctuation">,</span> <span class="token class-name">ring_buffer_size_t</span> index<span class="token punctuation">)</span><span class="token punctuation">;</span><span class="token comment">// 判断ring buffer是否为空</span><span class="token keyword">inline</span> <span class="token class-name">uint8_t</span> <span class="token function">ring_buffer_is_empty</span><span class="token punctuation">(</span><span class="token class-name">ring_buffer_t</span> <span class="token operator">*</span>buffer<span class="token punctuation">)</span> <span class="token punctuation">&#123;</span>  <span class="token keyword">return</span> <span class="token punctuation">(</span>buffer<span class="token operator">-></span>head_index <span class="token operator">==</span> buffer<span class="token operator">-></span>tail_index<span class="token punctuation">)</span><span class="token punctuation">;</span><span class="token punctuation">&#125;</span><span class="token comment">// 判断ring buffer内容是否已经满了</span><span class="token keyword">inline</span> <span class="token class-name">uint8_t</span> <span class="token function">ring_buffer_is_full</span><span class="token punctuation">(</span><span class="token class-name">ring_buffer_t</span> <span class="token operator">*</span>buffer<span class="token punctuation">)</span> <span class="token punctuation">&#123;</span>  <span class="token keyword">return</span> <span class="token punctuation">(</span><span class="token punctuation">(</span>buffer<span class="token operator">-></span>head_index <span class="token operator">-</span> buffer<span class="token operator">-></span>tail_index<span class="token punctuation">)</span> <span class="token operator">&amp;</span> RING_BUFFER_MASK<span class="token punctuation">)</span> <span class="token operator">==</span> RING_BUFFER_MASK<span class="token punctuation">;</span><span class="token punctuation">&#125;</span><span class="token comment">// 判断ring buffer剩余的内容大小，以字节大小返回</span><span class="token keyword">inline</span> <span class="token class-name">ring_buffer_size_t</span> <span class="token function">ring_buffer_num_items</span><span class="token punctuation">(</span><span class="token class-name">ring_buffer_t</span> <span class="token operator">*</span>buffer<span class="token punctuation">)</span> <span class="token punctuation">&#123;</span>  <span class="token keyword">return</span> <span class="token punctuation">(</span><span class="token punctuation">(</span>buffer<span class="token operator">-></span>head_index <span class="token operator">-</span> buffer<span class="token operator">-></span>tail_index<span class="token punctuation">)</span> <span class="token operator">&amp;</span> RING_BUFFER_MASK<span class="token punctuation">)</span><span class="token punctuation">;</span><span class="token punctuation">&#125;</span><span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre><p><strong>示例代码</strong></p><pre class="line-numbers language-c" data-language="c"><code class="language-c"><span class="token macro property"><span class="token directive-hash">#</span><span class="token directive keyword">include</span> <span class="token string">&lt;ringbuffer.h></span></span><span class="token keyword">int</span> <span class="token function">main</span><span class="token punctuation">(</span><span class="token keyword">void</span><span class="token punctuation">)</span> <span class="token punctuation">&#123;</span>  <span class="token keyword">int</span> i<span class="token punctuation">,</span> cnt<span class="token punctuation">;</span>    <span class="token keyword">char</span> buf<span class="token punctuation">[</span><span class="token number">50</span><span class="token punctuation">]</span><span class="token punctuation">;</span>    <span class="token comment">/* 创建循环buffer */</span>    <span class="token class-name">ring_buffer_t</span> ring_buffer<span class="token punctuation">;</span>    <span class="token function">ring_buffer_init</span><span class="token punctuation">(</span><span class="token operator">&amp;</span>ring_buffer<span class="token punctuation">)</span><span class="token punctuation">;</span>    <span class="token comment">/* 往ring buffer中写入内容 */</span>    <span class="token function">ring_buffer_queue_arr</span><span class="token punctuation">(</span><span class="token operator">&amp;</span>ring_buffer<span class="token punctuation">,</span> <span class="token string">"Hello, easyAIoT!"</span><span class="token punctuation">,</span> <span class="token number">16</span><span class="token punctuation">)</span><span class="token punctuation">;</span>    <span class="token comment">// 获取ring buffer大小</span>    cnt <span class="token operator">=</span> <span class="token function">ring_buffer_num_items</span><span class="token punctuation">(</span><span class="token operator">&amp;</span>ring_buffer<span class="token punctuation">)</span><span class="token punctuation">;</span>    <span class="token comment">/* 获取buffer中的内容 */</span>    <span class="token function">ring_buffer_dequeue_arr</span><span class="token punctuation">(</span><span class="token operator">&amp;</span>ring_buffer<span class="token punctuation">,</span> buf<span class="token punctuation">,</span> <span class="token keyword">sizeof</span><span class="token punctuation">(</span>buf<span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span>    <span class="token function">printf</span><span class="token punctuation">(</span><span class="token string">"ring buffer size:%d, content:%s\n"</span><span class="token punctuation">,</span> cnt<span class="token punctuation">,</span> buf<span class="token punctuation">)</span><span class="token punctuation">;</span>    <span class="token keyword">return</span> <span class="token number">0</span><span class="token punctuation">;</span>    <span class="token keyword">return</span> <span class="token number">0</span><span class="token punctuation">;</span><span class="token punctuation">&#125;</span><span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre><p><strong>程序运行结果</strong></p><pre class="line-numbers language-none"><code class="language-none">ring buffer size:16, content:Hello, easyAIoT!<span aria-hidden="true" class="line-numbers-rows"><span></span></span></code></pre><h2 id="3-12-其他接口"><a href="#3-12-其他接口" class="headerlink" title="3.12 其他接口"></a>3.12 其他接口</h2><h3 id="3-12-1-时间接口"><a href="#3-12-1-时间接口" class="headerlink" title="3.12.1 时间接口"></a>3.12.1 时间接口</h3><p><strong>接口说明</strong></p><pre class="line-numbers language-c" data-language="c"><code class="language-c"><span class="token comment">/** * @brief dateime结构体，通过now获取当前时间，通过format对时间进行格式化输出，输出到pDate中 */</span><span class="token keyword">typedef</span> <span class="token keyword">struct</span> <span class="token class-name">DateTime</span> <span class="token punctuation">&#123;</span>    <span class="token class-name">time_t</span> <span class="token punctuation">(</span><span class="token operator">*</span>now<span class="token punctuation">)</span><span class="token punctuation">(</span><span class="token keyword">void</span><span class="token punctuation">)</span><span class="token punctuation">;</span>    <span class="token function">bool</span> <span class="token punctuation">(</span><span class="token operator">*</span>format<span class="token punctuation">)</span><span class="token punctuation">(</span><span class="token keyword">const</span> <span class="token keyword">char</span> <span class="token operator">*</span>fmt<span class="token punctuation">,</span> <span class="token keyword">char</span> <span class="token operator">*</span>pDate<span class="token punctuation">,</span> <span class="token keyword">int</span> iLen<span class="token punctuation">)</span><span class="token punctuation">;</span><span class="token punctuation">&#125;</span>DateTime_t<span class="token punctuation">;</span><span class="token comment">/** * @brief datetime对象 */</span><span class="token keyword">extern</span> DateTime_t datetime<span class="token punctuation">;</span><span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre><p><strong>示例代码</strong></p><pre class="line-numbers language-c" data-language="c"><code class="language-c"><span class="token comment">// 获取当前时间戳</span><span class="token class-name">time_t</span> time <span class="token operator">=</span> datetime<span class="token punctuation">.</span><span class="token function">now</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span><span class="token comment">//获取GMT时间</span><span class="token keyword">char</span> szDate<span class="token punctuation">[</span><span class="token number">32</span><span class="token punctuation">]</span><span class="token punctuation">;</span>datetime<span class="token punctuation">.</span><span class="token function">format</span><span class="token punctuation">(</span><span class="token string">"GMT"</span><span class="token punctuation">,</span> szDate<span class="token punctuation">,</span> <span class="token keyword">sizeof</span><span class="token punctuation">(</span>szDate<span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span><span class="token function">printf</span><span class="token punctuation">(</span><span class="token string">"now:%d, time:%s\n"</span><span class="token punctuation">,</span> time<span class="token punctuation">,</span> szDate<span class="token punctuation">)</span><span class="token punctuation">;</span><span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre><p><strong>程序运行结果</strong></p><pre class="line-numbers language-none"><code class="language-none">now:1607614344, time:Thu, 10 Dec 2020 15:32:25 GMT<span aria-hidden="true" class="line-numbers-rows"><span></span></span></code></pre><h3 id="3-12-2-文件接口"><a href="#3-12-2-文件接口" class="headerlink" title="3.12.2 文件接口"></a>3.12.2 文件接口</h3><p><strong>接口说明</strong></p><pre class="line-numbers language-c" data-language="c"><code class="language-c"><span class="token comment">/** * @brief 读取文件内容 * @param  pathname         需要读取的文件路径名称 * @return cstring_t*       读取数据存放的字符串结构体指针，读取失败返回NULL */</span><span class="token class-name">cstring_t</span> <span class="token operator">*</span> <span class="token function">readFile</span><span class="token punctuation">(</span><span class="token keyword">const</span> <span class="token keyword">char</span> <span class="token operator">*</span>pathname<span class="token punctuation">)</span><span class="token punctuation">;</span><span class="token comment">/** * @brief 写入文件内容 * @param  pathname         要写入的文件 * @param  data             写入的数据 * @param  len              写入数据的长度 * @return size_t           真实写入的大小 */</span><span class="token class-name">size_t</span> <span class="token function">writeFile</span><span class="token punctuation">(</span><span class="token keyword">const</span> <span class="token keyword">char</span> <span class="token operator">*</span>pathname<span class="token punctuation">,</span> <span class="token keyword">void</span> <span class="token operator">*</span>data<span class="token punctuation">,</span> <span class="token keyword">int</span> len<span class="token punctuation">)</span><span class="token punctuation">;</span><span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre><p><strong>示例代码</strong></p><pre class="line-numbers language-c" data-language="c"><code class="language-c"><span class="token function">writeFile</span><span class="token punctuation">(</span><span class="token string">"test.txt"</span><span class="token punctuation">,</span> <span class="token string">"easyAIoT"</span><span class="token punctuation">,</span> <span class="token number">8</span><span class="token punctuation">)</span><span class="token punctuation">;</span><span class="token class-name">cstring_t</span> <span class="token operator">*</span> pContent <span class="token operator">=</span> <span class="token function">readFile</span><span class="token punctuation">(</span><span class="token string">"test.txt"</span><span class="token punctuation">)</span><span class="token punctuation">;</span><span class="token function">printf</span><span class="token punctuation">(</span><span class="token string">"file content:%s"</span><span class="token punctuation">,</span> pContent<span class="token operator">-></span>str<span class="token punctuation">)</span><span class="token punctuation">;</span><span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span></span></code></pre><p><strong>程序运行结果</strong></p><pre class="line-numbers language-none"><code class="language-none">file content:easyAIoT<span aria-hidden="true" class="line-numbers-rows"><span></span></span></code></pre><h3 id="3-12-3-讯飞authorization接口"><a href="#3-12-3-讯飞authorization接口" class="headerlink" title="3.12.3 讯飞authorization接口"></a>3.12.3 讯飞authorization接口</h3><p><strong>接口说明</strong></p><pre class="line-numbers language-c" data-language="c"><code class="language-c"><span class="token comment">/** * @brief 构造鉴权参数authorization字段，参考讯飞云相关文档 * @param  pszAPIKey        用户的APPID * @param  pszBaseUrl       请求的URL基地址 * @param  pszReuqestLine   请求request-line * @param  pszGMTDate       请求GMT时间戳 * @param  pAuthData        获取到的Auth数据，如果失败数据内容长度为0 * @param  iLen             pAuthData参数的数组长度 */</span><span class="token keyword">void</span> <span class="token function">vGetAuth</span><span class="token punctuation">(</span><span class="token keyword">const</span> <span class="token keyword">char</span> <span class="token operator">*</span>pszAPPKey<span class="token punctuation">,</span> <span class="token keyword">const</span> <span class="token keyword">char</span> <span class="token operator">*</span>pszAPPSecret<span class="token punctuation">,</span> <span class="token keyword">const</span> <span class="token keyword">char</span> <span class="token operator">*</span>pszBaseUrl<span class="token punctuation">,</span>         <span class="token keyword">const</span> <span class="token keyword">char</span> <span class="token operator">*</span>pszReuqestLine<span class="token punctuation">,</span> <span class="token keyword">const</span> <span class="token keyword">char</span> <span class="token operator">*</span>pszGMTDate<span class="token punctuation">,</span> <span class="token keyword">char</span> <span class="token operator">*</span>pAuthData<span class="token punctuation">,</span> <span class="token keyword">int</span> iLen<span class="token punctuation">)</span><span class="token punctuation">;</span><span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre><p><strong>示例代码</strong></p><pre class="line-numbers language-c" data-language="c"><code class="language-c"><span class="token macro property"><span class="token directive-hash">#</span><span class="token directive keyword">include</span> <span class="token string">&lt;iFlyAuth.h></span></span><span class="token keyword">int</span> <span class="token function">main</span><span class="token punctuation">(</span><span class="token keyword">int</span> argc<span class="token punctuation">,</span> <span class="token keyword">char</span> <span class="token operator">*</span>argv<span class="token punctuation">[</span><span class="token punctuation">]</span><span class="token punctuation">)</span><span class="token punctuation">&#123;</span>    <span class="token keyword">char</span> szDate<span class="token punctuation">[</span><span class="token number">64</span><span class="token punctuation">]</span> <span class="token operator">=</span> <span class="token punctuation">&#123;</span><span class="token number">0</span><span class="token punctuation">&#125;</span><span class="token punctuation">;</span>    <span class="token keyword">char</span> szAuthData<span class="token punctuation">[</span><span class="token number">256</span><span class="token punctuation">]</span> <span class="token operator">=</span> <span class="token punctuation">&#123;</span><span class="token number">0</span><span class="token punctuation">&#125;</span><span class="token punctuation">;</span>    <span class="token comment">// 获取GMT时间戳</span>    datetime<span class="token punctuation">.</span><span class="token function">format</span><span class="token punctuation">(</span><span class="token string">"GMT"</span><span class="token punctuation">,</span> szDate<span class="token punctuation">,</span> <span class="token keyword">sizeof</span><span class="token punctuation">(</span>szDate<span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span>    <span class="token comment">// 构造authorization请求参数</span>    <span class="token function">vGetAuth</span><span class="token punctuation">(</span><span class="token string">"apikey"</span><span class="token punctuation">,</span> <span class="token string">"appsecret"</span><span class="token punctuation">,</span> <span class="token string">"api.xf-yun.com"</span><span class="token punctuation">,</span>             <span class="token string">"POST /v1/private/s67c9c78c HTTP/1.1"</span><span class="token punctuation">,</span> szDate<span class="token punctuation">,</span>             szAuthData<span class="token punctuation">,</span> <span class="token keyword">sizeof</span><span class="token punctuation">(</span>szAuthData<span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span>    <span class="token function">printf</span><span class="token punctuation">(</span><span class="token string">"auth:%s\n"</span><span class="token punctuation">,</span> szAuthData<span class="token punctuation">)</span><span class="token punctuation">;</span>    <span class="token keyword">return</span> <span class="token number">0</span><span class="token punctuation">;</span><span class="token punctuation">&#125;</span><span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre><p><strong>程序运行结果</strong></p><pre class="line-numbers language-none"><code class="language-none">auth:YXBpX2tleT0iYXBpa2V5IiwgYWxnb3JpdGhtPSJobWFjLXNoYTI1NiIsIGhlYWRlcnM9Imhvc3QgZGF0ZSByZXF1ZXN0LWxpbmUiLCBzaWduYXR1cmU9IkNXLzZzUWxobVZtQVVDRW5oOE9XV2FZak4zZ2MybXF1NXlDYmUrQzJBRUk9Ig&#x3D;&#x3D;<span aria-hidden="true" class="line-numbers-rows"><span></span></span></code></pre><h1 id="四、环境搭建"><a href="#四、环境搭建" class="headerlink" title="四、环境搭建"></a>四、环境搭建</h1><h2 id="4-1-vscode环境搭建"><a href="#4-1-vscode环境搭建" class="headerlink" title="4.1 vscode环境搭建"></a>4.1 vscode环境搭建</h2><p>vscode是微软近几年推出的一款<a href="https://code.visualstudio.com/" rel="external nofollow noreferrer">免费</a>、<a href="https://github.com/Microsoft/vscode" rel="external nofollow noreferrer">开源</a>、<a href="https://www.electronjs.org/" rel="external nofollow noreferrer">跨平台</a>、资源占用（较）少、架构优良、插件扩展丰富（不会像eclipse一样卡顿）的一款IDE代码编辑、编译、调试一体化的工具，是目前即全面又好用的IDE开发环境。</p><p>可能以下的配置过程略显麻烦，我们也提供了一个完整的环境，方便大家直接使用开发代码的protable版本，适用于windows的32和64位的版本：</p><pre class="line-numbers language-none"><code class="language-none">32位下载链接：https:&#x2F;&#x2F;pan.baidu.com&#x2F;s&#x2F;1YRwBz-EsxpNGmm1yHk3CLw提取码：123464位下载链接：https:&#x2F;&#x2F;pan.baidu.com&#x2F;s&#x2F;11vZUjX_a_0YlQykP0w4bqw提取码：1234<span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span></span></code></pre><p>以上只要把解压后的CMake/bin和mingw下的bin目录配置到系统的path中就可以直接使用了。</p><h3 id="4-1-1-vscode软件下载"><a href="#4-1-1-vscode软件下载" class="headerlink" title="4.1.1 vscode软件下载"></a>4.1.1 vscode软件下载</h3><p>vscode支持windows平台的protable免安装版本，再也不用下载之后还要在系统上安装了，可怜的C盘终于不用塞那么多软件了，如果你喜欢，甚至可以把软件放在U盘里，插到电脑上来使用，更加便捷。</p><p>由于是便捷版本，插件下载时必须设置相关目录才能被正常使用，接下来看看怎么使用这款神奇的软件吧。</p><p><strong>便携版下载地址：</strong></p><p>直接在浏览器搜索vscode即可，<a href="https://code.visualstudio.com/#alt-downloads" rel="external nofollow noreferrer">点击下载</a></p><p>根据自己的平台选择。windows平台选择zip为免安装版本，根据自己的电脑选择对应的版本，目前台式电脑还是x86的天下（苹果M1芯片将改变x86架构在PC端一统江湖的地位），对于目前电脑都是64bit的了，选择64bit即可。</p><p><img src="https://cdn.jsdelivr.net/gh/aibittek/ImageHost/img/image-20201204153255342.png" alt="image-20201204153255342"></p><p>下载解压就可以用了，但是作为”真正”的便携，我们还需要为它做一些事情，有关描述，vscode开发者，也就是微软，给了详细的<a href="https://code.visualstudio.com/docs/editor/portable" rel="external nofollow noreferrer">说明</a>，流程如下：</p><p>1、使能便携模式</p><p>Window/Linux用户：</p><p>解压zip压缩包，并创建data目录</p><pre class="line-numbers language-none"><code class="language-none">|- VSCode-win32-x64-1.50.1|   |- Code.exe (or code executable)|   |- data|   |- ...<span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span></span></code></pre><p>macOS用户：</p><p>解压后，创建code-portable-data目录</p><pre class="line-numbers language-none"><code class="language-none">|- Visual Studio Code.app|- code-portable-data<span aria-hidden="true" class="line-numbers-rows"><span></span><span></span></span></code></pre><p>如果处于隔离模式，需要输入以下信息：</p><pre class="line-numbers language-none"><code class="language-none">xattr -dr com.apple.quarantine Visual\ Studio\ Code.app<span aria-hidden="true" class="line-numbers-rows"><span></span></span></code></pre><p>如果是Insiders（开发版）模式，创建的目录名称是<strong>code-insiders-portable-data</strong></p><p><strong>设置完整的便携模式流程</strong></p><ol><li> 下载VS Code ZIP包</li><li> 创建data或者code-portable-data目录</li><li> 拷贝目前系统上的Code目录到data目录下，并重新命名为user-data:</li></ol><ul><li>  <strong>Windows</strong> <code>%APPDATA%\Code</code></li><li>  <strong>macOS</strong> <code>$HOME/Library/Application Support/Code</code></li><li>  <strong>Linux</strong> <code>$HOME/.config/Code</code></li></ul><ol start="4"><li> 拷贝扩展包（下载的插件）目录到data目录下：</li></ol><ul><li>  <strong>Windows</strong> <code>%USERPROFILE%\.vscode\extensions</code></li><li>  <strong>macOS</strong> <code>~/.vscode/extensions</code></li><li>  <strong>Linux</strong> <code>~/.vscode/extensions</code></li></ul><p>最终的目录结构大概是这样：</p><pre class="line-numbers language-none"><code class="language-none">|- VSCode-win32-x64-1.50.1|   |- Code.exe (or code executable)|   |- data|   |   |- user-data|   |   |   |- ...|   |   |- extensions|   |   |   |- ...|   |- ...<span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre><p>vscode在运行的过程中会产生一些临时文件，如果你想”收留”它们的话，可以在data目录下创建一个TMP目录用于存放vscode的一些临时数据内容。</p><h3 id="4-1-2-插件下载"><a href="#4-1-2-插件下载" class="headerlink" title="4.1.2 插件下载"></a>4.1.2 插件下载</h3><p>工欲善其事必先利其器，vscode只是一个IDE环境，丰富的插件才是vscode的灵魂所在。本项目中必选的插件如下：</p><ul><li>  <strong>C/C++ IntelliSense</strong>：必选，负责代码编辑、调试、代码浏览。比如好用的代码提示的功能；</li><li>  <strong>CMake Tools</strong>：必选，负责CMake工程的配置、创建、构建、调试；</li><li>  <strong>Chinese (Simplified) Language Pack</strong>：可选，IDE环境的中文支持；</li><li>  <strong>CMake</strong>：可选，编写CMake文件时提供CMake语法支持和提示信息，需要手动写CMake配置文件必备；</li></ul><p>以上这些可以通过左侧侧边栏扩展功能窗口，在搜索框中输入这些插件的名字来下载获得，下载好后，这些插件会存放到上一节创建的data/extensions目录下。快捷键ctrl+shift+x</p><p><img src="https://cdn.jsdelivr.net/gh/aibittek/ImageHost/img/image-20201204164135462.png" alt="image-20201204164135462"></p><h3 id="4-1-3-Mingw工具下载"><a href="#4-1-3-Mingw工具下载" class="headerlink" title="4.1.3 Mingw工具下载"></a>4.1.3 Mingw工具下载</h3><p>MinGW（Minimalist GNU for Windows），主要提供了针对 win32 应用的 GCC等工具集。另外如果想在windows平台模拟Linux的开发环境，也可以使用Cygwin，只适合学习，效率受到了模拟环境的影响。</p><p><a href="https://osdn.net/projects/mingw/releases/" rel="external nofollow noreferrer">下载地址</a></p><p><img src="https://cdn.jsdelivr.net/gh/aibittek/ImageHost/img/image-20201204165807471.png" alt="image-20201204165807471"></p><p>它是一个MinGW的在线下载工具，可以在线下载需要的组件，选择的配置信息如下：</p><p><img src="https://cdn.jsdelivr.net/gh/aibittek/ImageHost/img/image-20201207201730104.png" alt="image-20201207201730104"></p><p>由于线上下载速度可能会比较慢，可以通过以下给定的网盘下来离线版本，这里为了兼容Windows平台的录音库，并没有使用Posix版本。</p><p>链接：<a href="https://pan.baidu.com/s/16zvws1R-pNZoQQIGEQggDw" rel="external nofollow noreferrer">https://pan.baidu.com/s/16zvws1R-pNZoQQIGEQggDw</a><br>        提取码：1234</p><p>解压之后，把mingw64/bin目录设置到系统PATH变量中；</p><p><img src="https://cdn.jsdelivr.net/gh/aibittek/ImageHost/img/image-20201207202348621.png" alt="image-20201207202348621"></p><p>设置完成后，打开cmd命令，输入gcc -v，得到如下信息，表示安装成功。</p><p><img src="https://cdn.jsdelivr.net/gh/aibittek/ImageHost/img/image-20201207202438631.png" alt="image-20201207202438631"></p><h3 id="4-1-4-cmake工具下载"><a href="#4-1-4-cmake工具下载" class="headerlink" title="4.1.4 cmake工具下载"></a>4.1.4 cmake工具下载</h3><p>CMake是自动工程管理工具。当源代码变多的时候，使用GCC需要自己维护编译的过程，通过CMake可以更加方便的管理。</p><p><a href="https://cmake.org/download/" rel="external nofollow noreferrer">CMake的下载</a>：按照自己的平台下载对应的软件安装即可。</p><p>提供额外的链接：<a href="https://pan.baidu.com/s/1XccI2MEFUouxZkQKzEhG3w" rel="external nofollow noreferrer">https://pan.baidu.com/s/1XccI2MEFUouxZkQKzEhG3w</a><br>        提取码：1234</p><p>安装完成后，打开cmd命令行输入”cmake  -version”验证cmake工具是否能够正常运行。</p><pre class="line-numbers language-none"><code class="language-none">C:\Users\AIBIT&gt;cmake -versioncmake version 3.17.5CMake suite maintained and supported by Kitware (kitware.com&#x2F;cmake).<span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span></span></code></pre><p>看到cmake版本的展示说明软件安装成功。</p><h2 id="4-2-编译与调试"><a href="#4-2-编译与调试" class="headerlink" title="4.2 编译与调试"></a>4.2 编译与调试</h2><p>一个源代码工程可能由多个源文件组成，并且这些源文件可能由.c/.cpp或者其他语言的编译文件组成，这些源代码怎么编译呢？这就需要一个编译管理的工具，跨平台通用的管理工具叫做Make，我们只需要提供Makefile文件即可，这个文件中描述了我们要怎样编译源代码文件。</p><p>接下来的问题是，Makefile本身维护也很复杂，特别在目录多了后。那么有没有一款可以跨平台的代码编译管理工具呢？CMake即是最好的选择，仅仅写一些简单的描述，就会生成编译需要的Makfile文件，从而通过Make编译生成需要的最终程序运行文件。</p><p>在VSCode中怎样使用CMake来维护咱们的源代码工程呢？一起来看看吧。</p><h3 id="4-2-1-使用CMake管理工程"><a href="#4-2-1-使用CMake管理工程" class="headerlink" title="4.2.1 使用CMake管理工程"></a>4.2.1 使用CMake管理工程</h3><p>CMake管理编译工程的流程：<img src="https://cdn.jsdelivr.net/gh/aibittek/ImageHost/img/image-20201208104717071.png" alt="image-20201208104717071"></p><ol><li><p><strong>CMake环境配置</strong></p><p> 首先，ctrl+shift+x快捷键打开扩展，在应用商店中搜索CMake Tools，这个插件是VSCode支持CMake功能的插件；</p><p> 其次，需要安装CMake程序，这个在之前章节中有<a href="https://cmake.org/download/" rel="external nofollow noreferrer">下载</a>使用说明；</p><p> 最后，通过ctrl+shift+p打开命令面板，输入cmake:scan for Kits和cmake:select a kit查找编译器和选择编译器</p></li><li><p><strong>CMakeLists.txt配置</strong></p><p> CMakeLists.txt是一个描述文件，用于生成Makefile文件以便指导源代码的编译。既然是描述文件就会有自己的语法，官方提供了<a href="https://cmake.org/cmake/help/latest/guide/tutorial/index.html" rel="external nofollow noreferrer">教程</a>。本文不具体介绍语法，通过项目提供的CMakeLists.txt文件，来说明介绍。</p><p> <img src="https://cdn.jsdelivr.net/gh/aibittek/ImageHost/img/image-20201208113318460.png" alt="image-20201208113318460"></p></li><li><p><strong>Makefile构建</strong></p><p> 这个步骤的目标是通过CMakeLists.txt生成真正的Makefile工程文件。可以通过ctrl+shift+p命令面板输入cmake:configure，成功后会在当前目录下生成build目录</p></li><li><p><strong>源代码编译</strong></p><p> 这个步骤的主要目标是通过Makefile工程文件生成可执行的程序的过程。可以直接通过F7快捷键即可进行编译的过程，也可以通过ctrl+shift+p命令面板输入cmake:build来完成</p></li><li><p><strong>链接生成可执行文件</strong></p><p> 这一个步骤是和上一个步骤同步完成的，但是要注意的是，如果发现undefined reference类似的错误是在这个阶段导致的，需要开发者增加缺失的符号，可能来自自己的代码，也可能是缺少第三方或者系统库的依赖。缺少第三方或系统库可以通过在CMakeLists.txt文件中增加对应的target_link_libraries依赖库文件即可（注意依赖库的名称，比如依赖库的名字为libpthread.so, 只需要填写pthread即可，不需要前面的lib，也不需要后面的.so）</p></li><li><p><strong>程序运行</strong></p><p> 编译成功后，直接使用VSCode提供Ctrl+F5进行程序的运行调试即可。运行程序会启动内部调试窗口，开发者可通过查看终端来进行代码的简单调试。更加复杂的调试可参考后面的内容</p></li></ol><h3 id="4-2-2-程序的调试过程"><a href="#4-2-2-程序的调试过程" class="headerlink" title="4.2.2 程序的调试过程"></a>4.2.2 程序的调试过程</h3><p>程序的调试非常重要，不仅能够帮助开发者找到程序的BUG，也是分析代码最重要的手段，强烈建议初学者就应该学习掌握。VSCode提供了非常简单直观的调试界面，通过调试的过程图来说明。</p><p><img src="https://cdn.jsdelivr.net/gh/aibittek/ImageHost/img/image-20201208120647496.png" alt="image-20201208120647496"></p><p>一般的调试流程：</p><ul><li>  设置断点</li><li>  运行程序</li><li>  断点处单步执行程序，观察变量值的变化</li></ul><p>从而发现问题和解决问题的过程</p><h1 id="五、AI能力应用开发流程"><a href="#五、AI能力应用开发流程" class="headerlink" title="五、AI能力应用开发流程"></a>五、AI能力应用开发流程</h1><p>以人脸比对作为说明。</p><h2 id="5-1-开发流程"><a href="#5-1-开发流程" class="headerlink" title="5.1 开发流程"></a>5.1 开发流程</h2><p>项目开发对于研发人员一般分为需求确认、技术调研、系统程序设计、软件编码、测试验收等环节。</p><p>以人脸比对应用举例，需求就是<strong>完成一个基本的人脸比对应用，能够比较给定的两张照片相似度，具体形式不限制</strong>。为了完成这个需求，需要做技术上的调研，分析抽象出人脸比对由哪些基础技术组成，再一个个的攻克这些基础问题。</p><p><strong>用例图</strong></p><p><img src="https://cdn.jsdelivr.net/gh/aibittek/ImageHost/img/image-20201222143316997.png" alt="image-20201222143316997"></p><p><strong>使用到的技术</strong></p><p>输入比对照片：文件读取（两张照片读取）；</p><p>构造发送请求：NTP时间、Base64加解密、MD5加密、URL加解密；</p><p>发送服务器：HTTP客户端Post请求；</p><p>服务器验证APPID和请求合法性：提供APPID、APIKEY、APP PARAM、Json序列化；</p><p>人脸比对算法：获得HTTP人脸比对服务的接口URL；</p><p>返回比对结果：JSON数据反序列化；</p><h2 id="5-2-程序流程图"><a href="#5-2-程序流程图" class="headerlink" title="5.2 程序流程图"></a>5.2 程序流程图</h2><p>以上明确了人脸比对应用到的技术和问题，这里假设已经掌握了这些基础技术，那么怎么组合这些技术，按照一定的流程来完成需求呢？来看一下整体的程序时序和流程图</p><p>人脸比对时序图</p><p><img src="https://cdn.jsdelivr.net/gh/aibittek/ImageHost/img/image-20201222162637000.png" alt="image-20201222162637000"></p><p>人脸比对程序流程图</p><p><img src="https://cdn.jsdelivr.net/gh/aibittek/ImageHost/img/image-20201222162709968.png" alt="image-20201222162709968"></p><h2 id="5-3-编码"><a href="#5-3-编码" class="headerlink" title="5.3 编码"></a>5.3 编码</h2><p>针对目标的时序和流程有了，流程涉及到的知识也掌握了，接下来就可以通过编码的方式应用这些技术点完成这个流程，从而完成需求的过程。</p><pre class="line-numbers language-c" data-language="c"><code class="language-c"><span class="token keyword">double</span> <span class="token function">fFaceCompare</span><span class="token punctuation">(</span><span class="token keyword">const</span> <span class="token keyword">char</span> <span class="token operator">*</span>pszAPPID<span class="token punctuation">,</span>                   <span class="token keyword">const</span> <span class="token keyword">char</span> <span class="token operator">*</span>pszAPPSecret<span class="token punctuation">,</span> <span class="token keyword">const</span> <span class="token keyword">char</span> <span class="token operator">*</span>pszAPPKey<span class="token punctuation">,</span>                   <span class="token keyword">const</span> <span class="token keyword">char</span> <span class="token operator">*</span>pszImagePath1<span class="token punctuation">,</span> <span class="token keyword">const</span> <span class="token keyword">char</span> <span class="token operator">*</span>pszImagePath2<span class="token punctuation">)</span><span class="token punctuation">&#123;</span>    <span class="token keyword">double</span> fScore <span class="token operator">=</span> <span class="token number">0.0f</span><span class="token punctuation">;</span>    <span class="token keyword">char</span> szDate<span class="token punctuation">[</span><span class="token number">64</span><span class="token punctuation">]</span><span class="token punctuation">;</span>    <span class="token keyword">char</span> szAuthData<span class="token punctuation">[</span><span class="token number">512</span><span class="token punctuation">]</span><span class="token punctuation">;</span>    <span class="token keyword">char</span> szFullUrl<span class="token punctuation">[</span><span class="token number">1024</span><span class="token punctuation">]</span><span class="token punctuation">;</span>    <span class="token keyword">char</span> <span class="token operator">*</span>szBaseUrl <span class="token operator">=</span> <span class="token string">"http://api.xf-yun.com/v1/private/s67c9c78c?host=%s&amp;date=%s&amp;authorization=%s"</span><span class="token punctuation">;</span>    <span class="token comment">// 构造authorization请求参数</span>    datetime<span class="token punctuation">.</span><span class="token function">format</span><span class="token punctuation">(</span><span class="token string">"GMT"</span><span class="token punctuation">,</span> szDate<span class="token punctuation">,</span> <span class="token keyword">sizeof</span><span class="token punctuation">(</span>szDate<span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span>    <span class="token function">vGetAuth</span><span class="token punctuation">(</span>pszAPPKey<span class="token punctuation">,</span> pszAPPSecret<span class="token punctuation">,</span> <span class="token string">"api.xf-yun.com"</span><span class="token punctuation">,</span>             <span class="token string">"POST /v1/private/s67c9c78c HTTP/1.1"</span><span class="token punctuation">,</span> szDate<span class="token punctuation">,</span>             szAuthData<span class="token punctuation">,</span> <span class="token keyword">sizeof</span><span class="token punctuation">(</span>szAuthData<span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span>    <span class="token comment">// 构造完整的请求URL</span>    <span class="token function">snprintf</span><span class="token punctuation">(</span>szFullUrl<span class="token punctuation">,</span> <span class="token keyword">sizeof</span><span class="token punctuation">(</span>szFullUrl<span class="token punctuation">)</span><span class="token punctuation">,</span> szBaseUrl<span class="token punctuation">,</span> <span class="token string">"api.xf-yun.com"</span><span class="token punctuation">,</span> szDate<span class="token punctuation">,</span> szAuthData<span class="token punctuation">)</span><span class="token punctuation">;</span>    <span class="token function">LOG</span><span class="token punctuation">(</span>EDEBUG<span class="token punctuation">,</span> <span class="token string">"url:%s"</span><span class="token punctuation">,</span> szFullUrl<span class="token punctuation">)</span><span class="token punctuation">;</span>    <span class="token comment">// 构造body数据</span>    <span class="token class-name">cstring_t</span> <span class="token operator">*</span>pBody <span class="token operator">=</span> <span class="token function">pstGenBody</span><span class="token punctuation">(</span>pszAPPID<span class="token punctuation">,</span> pszImagePath1<span class="token punctuation">,</span> pszImagePath2<span class="token punctuation">)</span><span class="token punctuation">;</span>    <span class="token keyword">if</span> <span class="token punctuation">(</span><span class="token operator">!</span>pBody<span class="token punctuation">)</span> <span class="token punctuation">&#123;</span>        <span class="token function">LOG</span><span class="token punctuation">(</span>EERROR<span class="token punctuation">,</span> <span class="token string">"empty body error"</span><span class="token punctuation">)</span><span class="token punctuation">;</span>        <span class="token keyword">return</span> <span class="token number">.0f</span><span class="token punctuation">;</span>    <span class="token punctuation">&#125;</span>    <span class="token comment">// LOG(EDEBUG, "body:#%s#", pBody->str);</span>    <span class="token comment">// 构造需要的额外HTTP头</span>    <span class="token keyword">const</span> <span class="token keyword">char</span> szHeader<span class="token punctuation">[</span><span class="token punctuation">]</span> <span class="token operator">=</span> <span class="token punctuation">&#123;</span>        <span class="token string">"content-type: application/json\r\n"</span>    <span class="token punctuation">&#125;</span><span class="token punctuation">;</span>    <span class="token comment">// 发起HTTP Post语音识别的请求</span>    SEIHttpInfo_t stHttpInfo<span class="token punctuation">;</span>    <span class="token function">bConnectHttpServer</span><span class="token punctuation">(</span><span class="token operator">&amp;</span>stHttpInfo<span class="token punctuation">,</span> szFullUrl<span class="token punctuation">,</span> szHeader<span class="token punctuation">,</span>                       <span class="token punctuation">(</span><span class="token keyword">void</span> <span class="token operator">*</span><span class="token punctuation">)</span>pBody<span class="token operator">-></span><span class="token function">peek</span><span class="token punctuation">(</span>pBody<span class="token punctuation">)</span><span class="token punctuation">,</span> <span class="token punctuation">(</span><span class="token keyword">int</span><span class="token punctuation">)</span>pBody<span class="token operator">-></span><span class="token function">length</span><span class="token punctuation">(</span>pBody<span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span>    <span class="token function">LOG</span><span class="token punctuation">(</span>EDEBUG<span class="token punctuation">,</span> <span class="token string">"status:%d"</span><span class="token punctuation">,</span> stHttpInfo<span class="token punctuation">.</span>stResponse<span class="token punctuation">.</span>iStatus<span class="token punctuation">)</span><span class="token punctuation">;</span>    <span class="token function">LOG</span><span class="token punctuation">(</span>EDEBUG<span class="token punctuation">,</span> <span class="token string">"body:%s"</span><span class="token punctuation">,</span> stHttpInfo<span class="token punctuation">.</span>stResponse<span class="token punctuation">.</span>pstBody<span class="token operator">-></span>sBuffer<span class="token punctuation">)</span><span class="token punctuation">;</span>    <span class="token comment">// 获得人脸对比得分</span>    fScore <span class="token operator">=</span> <span class="token function">fGetScoreResult</span><span class="token punctuation">(</span>stHttpInfo<span class="token punctuation">.</span>stResponse<span class="token punctuation">.</span>pstBody<span class="token operator">-></span>sBuffer<span class="token punctuation">)</span><span class="token punctuation">;</span>    <span class="token comment">// 关闭HTTP</span>    <span class="token function">bHttpClose</span><span class="token punctuation">(</span><span class="token operator">&amp;</span>stHttpInfo<span class="token punctuation">)</span><span class="token punctuation">;</span>    <span class="token function">cstring_del</span><span class="token punctuation">(</span>pBody<span class="token punctuation">)</span><span class="token punctuation">;</span>    <span class="token keyword">return</span> fScore<span class="token punctuation">;</span><span class="token punctuation">&#125;</span><span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre><h2 id="5-4-测试及结果"><a href="#5-4-测试及结果" class="headerlink" title="5.4 测试及结果"></a>5.4 测试及结果</h2><p>程序是否按照既定的流程走了呢？有没有可能在不同的的场景下会偏离流程，而出现不可预知的结果呢？测试在这里就起到了这样的作用：列举出用户使用的所有可能的场景，对场景的流程进行列举，再通过这些场景的流程去验证程序的流程正确性的过程。</p><p>测试过程可以选择</p><ol><li> 不同角度的人脸照片；</li><li> 不同分辨率图片大小；</li><li> 不同明暗度的图片；</li><li> 不同格式的图片；</li><li> 扩展自己的测试用例；</li></ol><p><img src="https://cdn.jsdelivr.net/gh/aibittek/ImageHost/img/image-20201222162955059.png" alt="image-20201222162955059"></p>]]></content>
      
      
      <categories>
          
          <category> MarsRescue </category>
          
      </categories>
      
      
        <tags>
            
            <tag> C语言项目 </tag>
            
            <tag> 人工智能应用 </tag>
            
            <tag> easyAIoT </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>比特人生的小破站</title>
      <link href="2021/01/hello-world/"/>
      <url>2021/01/hello-world/</url>
      
        <content type="html"><![CDATA[<p>欢迎来到比特人生的世界！</p><p>Welcome to <a href="https://hexo.io/" rel="external nofollow noreferrer">Hexo</a>! This is your very first post. Check <a href="https://hexo.io/docs/" rel="external nofollow noreferrer">documentation</a> for more info. If you get any problems when using Hexo, you can find the answer in <a href="https://hexo.io/docs/troubleshooting.html" rel="external nofollow noreferrer">troubleshooting</a> or you can ask me on <a href="https://github.com/hexojs/hexo/issues" rel="external nofollow noreferrer">GitHub</a>.</p><h2 id="Quick-Start"><a href="#Quick-Start" class="headerlink" title="Quick Start"></a>Quick Start</h2><h3 id="Create-a-new-post"><a href="#Create-a-new-post" class="headerlink" title="Create a new post"></a>Create a new post</h3><pre class="line-numbers language-bash" data-language="bash"><code class="language-bash">$ hexo new <span class="token string">"My New Post"</span><span aria-hidden="true" class="line-numbers-rows"><span></span></span></code></pre><p>More info: <a href="https://hexo.io/docs/writing.html" rel="external nofollow noreferrer">Writing</a></p><h3 id="Run-server"><a href="#Run-server" class="headerlink" title="Run server"></a>Run server</h3><pre class="line-numbers language-bash" data-language="bash"><code class="language-bash">$ hexo server<span aria-hidden="true" class="line-numbers-rows"><span></span></span></code></pre><p>More info: <a href="https://hexo.io/docs/server.html" rel="external nofollow noreferrer">Server</a></p><h3 id="Generate-static-files"><a href="#Generate-static-files" class="headerlink" title="Generate static files"></a>Generate static files</h3><pre class="line-numbers language-bash" data-language="bash"><code class="language-bash">$ hexo generate<span aria-hidden="true" class="line-numbers-rows"><span></span></span></code></pre><p>More info: <a href="https://hexo.io/docs/generating.html" rel="external nofollow noreferrer">Generating</a></p><h3 id="Deploy-to-remote-sites"><a href="#Deploy-to-remote-sites" class="headerlink" title="Deploy to remote sites"></a>Deploy to remote sites</h3><pre class="line-numbers language-bash" data-language="bash"><code class="language-bash">$ hexo deploy<span aria-hidden="true" class="line-numbers-rows"><span></span></span></code></pre><p>More info: <a href="https://hexo.io/docs/one-command-deployment.html" rel="external nofollow noreferrer">Deployment</a></p>]]></content>
      
      
      
        <tags>
            
            <tag> 比特人生的世界 </tag>
            
            <tag> hexo </tag>
            
            <tag> 个人网站 </tag>
            
        </tags>
      
    </entry>
    
    
  
  
</search>
